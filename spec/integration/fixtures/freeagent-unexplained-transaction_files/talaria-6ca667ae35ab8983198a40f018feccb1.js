//  Copyright (c) 2012 YourAmigo Ltd
//  The above copyright notice and this permission notice shall be included in
//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
function MultiTouchTracker(e){e=void 0===e?{}:e;var t={cookie_domain:document.domain,cookie_name:"multitouch",cookie_lifetime:180,max_cookie_size:2048,allow_internal:!1,fieldsep:"!",recsep:"*"};for(i in t)this[i]=void 0===e[i]?t[i]:e[i];this.engines=[["rambler","words"],["ekolay","q"],["mynet","q"],["terra","query"],["ozu","q"],["sesam","q"],["kvasir","q"],["pchome","q"],["yam","k"],["szukacz","q"],["onet","qt"],["wp","szukaj"],["search","q"],["seznam","q"],["mama","query"],["aol","q"],["najdi","q"],["yandex","text"],["alice","qs"],["baidu","wd"],["live","q"],["virgilio","qs"],["voila","rdata"],["alltheweb","q"],["mamma","query"],["about","terms"],["cnn","query"],["netscape","query"],["altavista","q"],["ask","q"],["lycos","query"],["aol","encquery"],["aol","query"],["images.google","q"],["naver","query"],["eniro","search_word"],["daum","q"],["bing","q"],["msn","q"],["yahoo","p"],["google","q"]]}function setAJAXCallbacksForAnyProcessingFiles(){$("#files .processing, #attachable_documents .processing").length>0&&setInterval(function(){$("#files .processing, #attachable_documents .processing").each(function(){$.ajax({url:"/files/"+$(this).data("document-id")+".js"})})},3e3)}function resetUploadForm(){$("form#new_document :submit").removeClass("disabled").val("Upload File").enable(),$('form#new_document input[type="file"]').val(""),setAJAXCallbacksForAnyProcessingFiles()}"undefined"==typeof window.Fa&&(window.Fa={}),/*!
 * jQuery JavaScript Library v1.8.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 */
function(e,t){function n(e){var t=ft[e]={};return J.each(e.split(tt),function(e,n){t[n]=!0}),t}function i(e,n,i){if(i===t&&1===e.nodeType){var r="data-"+n.replace(gt,"-$1").toLowerCase();if(i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:mt.test(i)?J.parseJSON(i):i}catch(a){}J.data(e,n,i)}else i=t}return i}function r(e){var t;for(t in e)if(("data"!==t||!J.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function a(){return!1}function o(){return!0}function s(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function l(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function c(e,t,n){if(t=t||0,J.isFunction(t))return J.grep(e,function(e,i){var r=!!t.call(e,i,e);return r===n});if(t.nodeType)return J.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=J.grep(e,function(e){return 1===e.nodeType});if(It.test(t))return J.filter(t,i,!n);t=J.filter(t,i)}return J.grep(e,function(e){return J.inArray(e,t)>=0===n})}function u(e){var t=Ht.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function h(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function d(e,t){if(1===t.nodeType&&J.hasData(e)){var n,i,r,a=J._data(e),o=J._data(t,a),s=a.events;if(s){delete o.handle,o.events={};for(n in s)for(i=0,r=s[n].length;r>i;i++)J.event.add(t,n,s[n][i])}o.data&&(o.data=J.extend({},o.data))}}function p(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),J.support.html5Clone&&e.innerHTML&&!J.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Kt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.selected=e.defaultSelected:"input"===n||"textarea"===n?t.defaultValue=e.defaultValue:"script"===n&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(J.expando))}function f(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function m(e){Kt.test(e.type)&&(e.defaultChecked=e.checked)}function g(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=yn.length;r--;)if(t=yn[r]+n,t in e)return t;return i}function v(e,t){return e=t||e,"none"===J.css(e,"display")||!J.contains(e.ownerDocument,e)}function y(e,t){for(var n,i,r=[],a=0,o=e.length;o>a;a++)n=e[a],n.style&&(r[a]=J._data(n,"olddisplay"),t?(r[a]||"none"!==n.style.display||(n.style.display=""),""===n.style.display&&v(n)&&(r[a]=J._data(n,"olddisplay",x(n.nodeName)))):(i=nn(n,"display"),r[a]||"none"===i||J._data(n,"olddisplay",i)));for(a=0;o>a;a++)n=e[a],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?r[a]||"":"none"));return e}function b(e,t,n){var i=hn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function _(e,t,n,i){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>r;r+=2)"margin"===n&&(a+=J.css(e,n+vn[r],!0)),i?("content"===n&&(a-=parseFloat(nn(e,"padding"+vn[r]))||0),"margin"!==n&&(a-=parseFloat(nn(e,"border"+vn[r]+"Width"))||0)):(a+=parseFloat(nn(e,"padding"+vn[r]))||0,"padding"!==n&&(a+=parseFloat(nn(e,"border"+vn[r]+"Width"))||0));return a}function w(e,t,n){var i="width"===t?e.offsetWidth:e.offsetHeight,r=!0,a=J.support.boxSizing&&"border-box"===J.css(e,"boxSizing");if(0>=i||null==i){if(i=nn(e,t),(0>i||null==i)&&(i=e.style[t]),dn.test(i))return i;r=a&&(J.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+_(e,t,n||(a?"border":"content"),r)+"px"}function x(e){if(fn[e])return fn[e];var t=J("<"+e+">").appendTo(W.body),n=t.css("display");return t.remove(),("none"===n||""===n)&&(rn=W.body.appendChild(rn||J.extend(W.createElement("iframe"),{frameBorder:0,width:0,height:0})),an&&rn.createElement||(an=(rn.contentWindow||rn.contentDocument).document,an.write("<!doctype html><html><body>"),an.close()),t=an.body.appendChild(an.createElement(e)),n=nn(t,"display"),W.body.removeChild(rn)),fn[e]=n,n}function C(e,t,n,i){var r;if(J.isArray(t))J.each(t,function(t,r){n||wn.test(e)?i(e,r):C(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==J.type(t))i(e,t);else for(r in t)C(e+"["+r+"]",t[r],n,i)}function k(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r,a,o=t.toLowerCase().split(tt),s=0,l=o.length;if(J.isFunction(n))for(;l>s;s++)i=o[s],a=/^\+/.test(i),a&&(i=i.substr(1)||"*"),r=e[i]=e[i]||[],r[a?"unshift":"push"](n)}}function T(e,n,i,r,a,o){a=a||n.dataTypes[0],o=o||{},o[a]=!0;for(var s,l=e[a],c=0,u=l?l.length:0,h=e===Ln;u>c&&(h||!s);c++)s=l[c](n,i,r),"string"==typeof s&&(!h||o[s]?s=t:(n.dataTypes.unshift(s),s=T(e,n,i,r,s,o)));return!h&&s||o["*"]||(s=T(e,n,i,r,"*",o)),s}function E(e,n){var i,r,a=J.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((a[i]?e:r||(r={}))[i]=n[i]);r&&J.extend(!0,e,r)}function S(e,n,i){var r,a,o,s,l=e.contents,c=e.dataTypes,u=e.responseFields;for(a in u)a in i&&(n[u[a]]=i[a]);for(;"*"===c[0];)c.shift(),r===t&&(r=e.mimeType||n.getResponseHeader("content-type"));if(r)for(a in l)if(l[a]&&l[a].test(r)){c.unshift(a);break}if(c[0]in i)o=c[0];else{for(a in i){if(!c[0]||e.converters[a+" "+c[0]]){o=a;break}s||(s=a)}o=o||s}return o?(o!==c[0]&&c.unshift(o),i[o]):void 0}function D(e,t){var n,i,r,a,o=e.dataTypes.slice(),s=o[0],l={},c=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),o[1])for(n in e.converters)l[n.toLowerCase()]=e.converters[n];for(;r=o[++c];)if("*"!==r){if("*"!==s&&s!==r){if(n=l[s+" "+r]||l["* "+r],!n)for(i in l)if(a=i.split(" "),a[1]===r&&(n=l[s+" "+a[0]]||l["* "+a[0]])){n===!0?n=l[i]:l[i]!==!0&&(r=a[0],o.splice(c--,0,r));break}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(u){return{state:"parsererror",error:n?u:"No conversion from "+s+" to "+r}}}s=r}return{state:"success",data:t}}function A(){try{return new e.XMLHttpRequest}catch(t){}}function N(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function M(){return setTimeout(function(){Xn=t},0),Xn=J.now()}function R(e,t){J.each(t,function(t,n){for(var i=(ei[t]||[]).concat(ei["*"]),r=0,a=i.length;a>r;r++)if(i[r].call(e,t,n))return})}function P(e,t,n){var i,r=0,a=Zn.length,o=J.Deferred().always(function(){delete s.elem}),s=function(){for(var t=Xn||M(),n=Math.max(0,l.startTime+l.duration-t),i=n/l.duration||0,r=1-i,a=0,s=l.tweens.length;s>a;a++)l.tweens[a].run(r);return o.notifyWith(e,[l,r,n]),1>r&&s?n:(o.resolveWith(e,[l]),!1)},l=o.promise({elem:e,props:J.extend({},t),opts:J.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||M(),duration:n.duration,tweens:[],createTween:function(t,n){var i=J.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){for(var n=0,i=t?l.tweens.length:0;i>n;n++)l.tweens[n].run(1);return t?o.resolveWith(e,[l,t]):o.rejectWith(e,[l,t]),this}}),c=l.props;for(O(c,l.opts.specialEasing);a>r;r++)if(i=Zn[r].call(l,e,c,l.opts))return i;return R(l,c),J.isFunction(l.opts.start)&&l.opts.start.call(e,l),J.fx.timer(J.extend(s,{anim:l,queue:l.opts.queue,elem:e})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function O(e,t){var n,i,r,a,o;for(n in e)if(i=J.camelCase(n),r=t[i],a=e[n],J.isArray(a)&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),o=J.cssHooks[i],o&&"expand"in o){a=o.expand(a),delete e[i];for(n in a)n in e||(e[n]=a[n],t[n]=r)}else t[i]=r}function F(e,t,n){var i,r,a,o,s,l,c,u,h,d=this,p=e.style,f={},m=[],g=e.nodeType&&v(e);n.queue||(u=J._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,h=u.empty.fire,u.empty.fire=function(){u.unqueued||h()}),u.unqueued++,d.always(function(){d.always(function(){u.unqueued--,J.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===J.css(e,"display")&&"none"===J.css(e,"float")&&(J.support.inlineBlockNeedsLayout&&"inline"!==x(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",J.support.shrinkWrapBlocks||d.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Gn.exec(a)){if(delete t[i],l=l||"toggle"===a,a===(g?"hide":"show"))continue;m.push(i)}if(o=m.length){s=J._data(e,"fxshow")||J._data(e,"fxshow",{}),"hidden"in s&&(g=s.hidden),l&&(s.hidden=!g),g?J(e).show():d.done(function(){J(e).hide()}),d.done(function(){var t;J.removeData(e,"fxshow",!0);for(t in f)J.style(e,t,f[t])});for(i=0;o>i;i++)r=m[i],c=d.createTween(r,g?s[r]:0),f[r]=s[r]||J.style(e,r),r in s||(s[r]=c.start,g&&(c.end=c.start,c.start="width"===r||"height"===r?1:0))}}function I(e,t,n,i,r){return new I.prototype.init(e,t,n,i,r)}function L(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=vn[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function j(e){return J.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var H,B,W=e.document,z=e.location,$=e.navigator,U=e.jQuery,q=e.$,Y=Array.prototype.push,V=Array.prototype.slice,X=Array.prototype.indexOf,K=Object.prototype.toString,G=Object.prototype.hasOwnProperty,Q=String.prototype.trim,J=function(e,t){return new J.fn.init(e,t,H)},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,nt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,it=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^[\],:{}\s]*$/,ot=/(?:^|:|,)(?:\s*\[)+/g,st=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,lt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ct=/^-ms-/,ut=/-([\da-z])/gi,ht=function(e,t){return(t+"").toUpperCase()},dt=function(){W.addEventListener?(W.removeEventListener("DOMContentLoaded",dt,!1),J.ready()):"complete"===W.readyState&&(W.detachEvent("onreadystatechange",dt),J.ready())},pt={};J.fn=J.prototype={constructor:J,init:function(e,n,i){var r,a,o;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:it.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1])return n=n instanceof J?n[0]:n,o=n&&n.nodeType?n.ownerDocument||n:W,e=J.parseHTML(r[1],o,!0),rt.test(r[1])&&J.isPlainObject(n)&&this.attr.call(e,n,!0),J.merge(this,e);if(a=W.getElementById(r[2]),a&&a.parentNode){if(a.id!==r[2])return i.find(e);this.length=1,this[0]=a}return this.context=W,this.selector=e,this}return J.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),J.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return V.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=J.merge(this.constructor(),e);return i.prevObject=this,i.context=this.context,"find"===t?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return J.each(this,e,t)},ready:function(e){return J.ready.promise().done(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(V.apply(this,arguments),"slice",V.call(arguments).join(","))},map:function(e){return this.pushStack(J.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:[].sort,splice:[].splice},J.fn.init.prototype=J.fn,J.extend=J.fn.extend=function(){var e,n,i,r,a,o,s=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},l=2),"object"==typeof s||J.isFunction(s)||(s={}),c===l&&(s=this,--l);c>l;l++)if(null!=(e=arguments[l]))for(n in e)i=s[n],r=e[n],s!==r&&(u&&r&&(J.isPlainObject(r)||(a=J.isArray(r)))?(a?(a=!1,o=i&&J.isArray(i)?i:[]):o=i&&J.isPlainObject(i)?i:{},s[n]=J.extend(u,o,r)):r!==t&&(s[n]=r));return s},J.extend({noConflict:function(t){return e.$===J&&(e.$=q),t&&e.jQuery===J&&(e.jQuery=U),J},isReady:!1,readyWait:1,holdReady:function(e){e?J.readyWait++:J.ready(!0)},ready:function(e){if(e===!0?!--J.readyWait:!J.isReady){if(!W.body)return setTimeout(J.ready,1);J.isReady=!0,e!==!0&&--J.readyWait>0||(B.resolveWith(W,[J]),J.fn.trigger&&J(W).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===J.type(e)},isArray:Array.isArray||function(e){return"array"===J.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):pt[K.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==J.type(e)||e.nodeType||J.isWindow(e))return!1;try{if(e.constructor&&!G.call(e,"constructor")&&!G.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||G.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var i;return e&&"string"==typeof e?("boolean"==typeof t&&(n=t,t=0),t=t||W,(i=rt.exec(e))?[t.createElement(i[1])]:(i=J.buildFragment([e],t,n?null:[]),J.merge([],(i.cacheable?J.clone(i.fragment):i.fragment).childNodes))):null},parseJSON:function(t){return t&&"string"==typeof t?(t=J.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):at.test(t.replace(st,"@").replace(lt,"]").replace(ot,""))?new Function("return "+t)():(J.error("Invalid JSON: "+t),void 0)):null},parseXML:function(n){var i,r;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(a){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||J.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ct,"ms-").replace(ut,ht)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,i){var r,a=0,o=e.length,s=o===t||J.isFunction(e);if(i)if(s){for(r in e)if(n.apply(e[r],i)===!1)break}else for(;o>a&&n.apply(e[a++],i)!==!1;);else if(s){for(r in e)if(n.call(e[r],r,e[r])===!1)break}else for(;o>a&&n.call(e[a],a,e[a++])!==!1;);return e},trim:Q&&!Q.call("﻿ ")?function(e){return null==e?"":Q.call(e)}:function(e){return null==e?"":(e+"").replace(nt,"")},makeArray:function(e,t){var n,i=t||[];return null!=e&&(n=J.type(e),null==e.length||"string"===n||"function"===n||"regexp"===n||J.isWindow(e)?Y.call(i,e):J.merge(i,e)),i},inArray:function(e,t,n){var i;if(t){if(X)return X.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,r=e.length,a=0;if("number"==typeof i)for(;i>a;a++)e[r++]=n[a];else for(;n[a]!==t;)e[r++]=n[a++];return e.length=r,e},grep:function(e,t,n){var i,r=[],a=0,o=e.length;for(n=!!n;o>a;a++)i=!!t(e[a],a),n!==i&&r.push(e[a]);return r},map:function(e,n,i){var r,a,o=[],s=0,l=e.length,c=e instanceof J||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||J.isArray(e));if(c)for(;l>s;s++)r=n(e[s],s,i),null!=r&&(o[o.length]=r);else for(a in e)r=n(e[a],a,i),null!=r&&(o[o.length]=r);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var i,r,a;return"string"==typeof n&&(i=e[n],n=e,e=i),J.isFunction(e)?(r=V.call(arguments,2),a=function(){return e.apply(n,r.concat(V.call(arguments)))},a.guid=e.guid=e.guid||J.guid++,a):t},access:function(e,n,i,r,a,o,s){var l,c=null==i,u=0,h=e.length;if(i&&"object"==typeof i){for(u in i)J.access(e,n,u,i[u],1,o,r);a=1}else if(r!==t){if(l=s===t&&J.isFunction(r),c&&(l?(l=n,n=function(e,t,n){return l.call(J(e),n)}):(n.call(e,r),n=null)),n)for(;h>u;u++)n(e[u],i,l?r.call(e[u],u,n(e[u],i)):r,s);a=1}return a?e:c?n.call(e):h?n(e[0],i):o},now:function(){return(new Date).getTime()}}),J.ready.promise=function(t){if(!B)if(B=J.Deferred(),"complete"===W.readyState)setTimeout(J.ready,1);else if(W.addEventListener)W.addEventListener("DOMContentLoaded",dt,!1),e.addEventListener("load",J.ready,!1);else{W.attachEvent("onreadystatechange",dt),e.attachEvent("onload",J.ready);var n=!1;try{n=null==e.frameElement&&W.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!J.isReady){try{n.doScroll("left")}catch(e){return setTimeout(r,50)}J.ready()}}()}return B.promise(t)},J.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){pt["[object "+t+"]"]=t.toLowerCase()}),H=J(W);var ft={};J.Callbacks=function(e){e="string"==typeof e?ft[e]||n(e):J.extend({},e);var i,r,a,o,s,l,c=[],u=!e.once&&[],h=function(t){for(i=e.memory&&t,r=!0,l=o||0,o=0,s=c.length,a=!0;c&&s>l;l++)if(c[l].apply(t[0],t[1])===!1&&e.stopOnFalse){i=!1;break}a=!1,c&&(u?u.length&&h(u.shift()):i?c=[]:d.disable())},d={add:function(){if(c){var t=c.length;!function n(t){J.each(t,function(t,i){var r=J.type(i);"function"===r?e.unique&&d.has(i)||c.push(i):i&&i.length&&"string"!==r&&n(i)})}(arguments),a?s=c.length:i&&(o=t,h(i))}return this},remove:function(){return c&&J.each(arguments,function(e,t){for(var n;(n=J.inArray(t,c,n))>-1;)c.splice(n,1),a&&(s>=n&&s--,l>=n&&l--)}),this},has:function(e){return J.inArray(e,c)>-1},empty:function(){return c=[],this},disable:function(){return c=u=i=t,this},disabled:function(){return!c},lock:function(){return u=t,i||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||r&&!u||(a?u.push(t):h(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},J.extend({Deferred:function(e){var t=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return J.Deferred(function(n){J.each(t,function(t,i){var a=i[0],o=e[t];r[i[1]](J.isFunction(o)?function(){var e=o.apply(this,arguments);e&&J.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n:this,[e])}:n[a])}),e=null}).promise()},promise:function(e){return null!=e?J.extend(e,i):i}},r={};return i.pipe=i.then,J.each(t,function(e,a){var o=a[2],s=a[3];i[a[1]]=o.add,s&&o.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[a[0]]=o.fire,r[a[0]+"With"]=o.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,a=V.call(arguments),o=a.length,s=1!==o||e&&J.isFunction(e.promise)?o:0,l=1===s?e:J.Deferred(),c=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?V.call(arguments):r,i===t?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(o>1)for(t=new Array(o),n=new Array(o),i=new Array(o);o>r;r++)a[r]&&J.isFunction(a[r].promise)?a[r].promise().done(c(r,i,a)).fail(l.reject).progress(c(r,n,t)):--s;return s||l.resolveWith(i,a),l.promise()}}),J.support=function(){var t,n,i,r,a,o,s,l,c,u,h,d=W.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),i=d.getElementsByTagName("a")[0],!n||!i||!n.length)return{};r=W.createElement("select"),a=r.appendChild(W.createElement("option")),o=d.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:"on"===o.value,optSelected:a.selected,getSetAttribute:"t"!==d.className,enctype:!!W.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==W.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===W.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!a.disabled;try{delete d.test}catch(p){t.deleteExpando=!1}if(!d.addEventListener&&d.attachEvent&&d.fireEvent&&(d.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),d.cloneNode(!0).fireEvent("onclick"),d.detachEvent("onclick",h)),o=W.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","checked"),o.setAttribute("name","t"),d.appendChild(o),s=W.createDocumentFragment(),s.appendChild(d.lastChild),t.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,s.removeChild(o),s.appendChild(d),d.attachEvent)for(c in{submit:!0,change:!0,focusin:!0})l="on"+c,u=l in d,u||(d.setAttribute(l,"return;"),u="function"==typeof d[l]),t[c+"Bubbles"]=u;return J(function(){var n,i,r,a,o="padding:0;margin:0;border:0;display:block;overflow:hidden;",s=W.getElementsByTagName("body")[0];s&&(n=W.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",s.insertBefore(n,s.firstChild),i=W.createElement("div"),n.appendChild(i),i.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=i.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",t.reliableHiddenOffsets=u&&0===r[0].offsetHeight,i.innerHTML="",i.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===i.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(i,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(i,null)||{width:"4px"}).width,a=W.createElement("div"),a.style.cssText=i.style.cssText=o,a.style.marginRight=a.style.width="0",i.style.width="1px",i.appendChild(a),t.reliableMarginRight=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight)),"undefined"!=typeof i.style.zoom&&(i.innerHTML="",i.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===i.offsetWidth,i.style.display="block",i.style.overflow="visible",i.innerHTML="<div></div>",i.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==i.offsetWidth,n.style.zoom=1),s.removeChild(n),n=i=r=a=null)}),s.removeChild(d),n=i=r=a=o=s=d=null,t}();var mt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,gt=/([A-Z])/g;J.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(J.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?J.cache[e[J.expando]]:e[J.expando],!!e&&!r(e)},data:function(e,n,i,r){if(J.acceptData(e)){var a,o,s=J.expando,l="string"==typeof n,c=e.nodeType,u=c?J.cache:e,h=c?e[s]:e[s]&&s;if(h&&u[h]&&(r||u[h].data)||!l||i!==t)return h||(c?e[s]=h=J.deletedIds.pop()||J.guid++:h=s),u[h]||(u[h]={},c||(u[h].toJSON=J.noop)),("object"==typeof n||"function"==typeof n)&&(r?u[h]=J.extend(u[h],n):u[h].data=J.extend(u[h].data,n)),a=u[h],r||(a.data||(a.data={}),a=a.data),i!==t&&(a[J.camelCase(n)]=i),l?(o=a[n],null==o&&(o=a[J.camelCase(n)])):o=a,o}},removeData:function(e,t,n){if(J.acceptData(e)){var i,a,o,s=e.nodeType,l=s?J.cache:e,c=s?e[J.expando]:J.expando;if(l[c]){if(t&&(i=n?l[c]:l[c].data)){J.isArray(t)||(t in i?t=[t]:(t=J.camelCase(t),t=t in i?[t]:t.split(" ")));for(a=0,o=t.length;o>a;a++)delete i[t[a]];if(!(n?r:J.isEmptyObject)(i))return}(n||(delete l[c].data,r(l[c])))&&(s?J.cleanData([e],!0):J.support.deleteExpando||l!=l.window?delete l[c]:l[c]=null)}}},_data:function(e,t,n){return J.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&J.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),J.fn.extend({data:function(e,n){var r,a,o,s,l,c=this[0],u=0,h=null;if(e===t){if(this.length&&(h=J.data(c),1===c.nodeType&&!J._data(c,"parsedAttrs"))){for(o=c.attributes,l=o.length;l>u;u++)s=o[u].name,s.indexOf("data-")||(s=J.camelCase(s.substring(5)),i(c,s,h[s]));J._data(c,"parsedAttrs",!0)}return h}return"object"==typeof e?this.each(function(){J.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",a=r[1]+"!",J.access(this,function(n){return n===t?(h=this.triggerHandler("getData"+a,[r[0]]),h===t&&c&&(h=J.data(c,e),h=i(c,e,h)),h===t&&r[1]?this.data(r[0]):h):(r[1]=n,this.each(function(){var t=J(this);t.triggerHandler("setData"+a,r),J.data(this,e,n),t.triggerHandler("changeData"+a,r)}),void 0)},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){J.removeData(this,e)})}}),J.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=J._data(e,t),n&&(!i||J.isArray(n)?i=J._data(e,t,J.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=J.queue(e,t),i=n.length,r=n.shift(),a=J._queueHooks(e,t),o=function(){J.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,o,a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J._data(e,n)||J._data(e,n,{empty:J.Callbacks("once memory").add(function(){J.removeData(e,t+"queue",!0),J.removeData(e,n,!0)})})}}),J.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?J.queue(this[0],e):n===t?this:this.each(function(){var t=J.queue(this,e,n);J._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&J.dequeue(this,e)})},dequeue:function(e){return this.each(function(){J.dequeue(this,e)})},delay:function(e,t){return e=J.fx?J.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,r=1,a=J.Deferred(),o=this,s=this.length,l=function(){--r||a.resolveWith(o,[o])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)i=J._data(o[s],e+"queueHooks"),i&&i.empty&&(r++,i.empty.add(l));return l(),a.promise(n)}});var vt,yt,bt,_t=/[\t\r\n]/g,wt=/\r/g,xt=/^(?:button|input)$/i,Ct=/^(?:button|input|object|select|textarea)$/i,kt=/^a(?:rea|)$/i,Tt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Et=J.support.getSetAttribute;J.fn.extend({attr:function(e,t){return J.access(this,J.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){J.removeAttr(this,e)})},prop:function(e,t){return J.access(this,J.prop,e,t,arguments.length>1)},removeProp:function(e){return e=J.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,r,a,o,s;if(J.isFunction(e))return this.each(function(t){J(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(tt),n=0,i=this.length;i>n;n++)if(r=this[n],1===r.nodeType)if(r.className||1!==t.length){for(a=" "+r.className+" ",o=0,s=t.length;s>o;o++)a.indexOf(" "+t[o]+" ")<0&&(a+=t[o]+" ");r.className=J.trim(a)}else r.className=e;return this},removeClass:function(e){var n,i,r,a,o,s,l;if(J.isFunction(e))return this.each(function(t){J(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(n=(e||"").split(tt),s=0,l=this.length;l>s;s++)if(r=this[s],1===r.nodeType&&r.className){for(i=(" "+r.className+" ").replace(_t," "),a=0,o=n.length;o>a;a++)for(;i.indexOf(" "+n[a]+" ")>=0;)i=i.replace(" "+n[a]+" "," ");r.className=e?J.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return J.isFunction(e)?this.each(function(n){J(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var r,a=0,o=J(this),s=t,l=e.split(tt);r=l[a++];)s=i?s:!o.hasClass(r),o[s?"addClass":"removeClass"](r);else("undefined"===n||"boolean"===n)&&(this.className&&J._data(this,"__className__",this.className),this.className=this.className||e===!1?"":J._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(_t," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,r,a=this[0];{if(arguments.length)return r=J.isFunction(e),this.each(function(i){var a,o=J(this);1===this.nodeType&&(a=r?e.call(this,i,o.val()):e,null==a?a="":"number"==typeof a?a+="":J.isArray(a)&&(a=J.map(a,function(e){return null==e?"":e+""})),n=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,a,"value")!==t||(this.value=a))});if(a)return n=J.valHooks[a.type]||J.valHooks[a.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(a,"value"))!==t?i:(i=a.value,"string"==typeof i?i.replace(wt,""):null==i?"":i)}}}),J.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,a="select-one"===e.type||0>r,o=a?null:[],s=a?r+1:i.length,l=0>r?s:a?r:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==r||(J.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&J.nodeName(n.parentNode,"optgroup"))){if(t=J(n).val(),a)return t;o.push(t)}return o},set:function(e,t){var n=J.makeArray(t);return J(e).find("option").each(function(){this.selected=J.inArray(J(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,i,r){var a,o,s,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return r&&J.isFunction(J.fn[n])?J(e)[n](i):"undefined"==typeof e.getAttribute?J.prop(e,n,i):(s=1!==l||!J.isXMLDoc(e),s&&(n=n.toLowerCase(),o=J.attrHooks[n]||(Tt.test(n)?yt:vt)),i!==t?null===i?(J.removeAttr(e,n),void 0):o&&"set"in o&&s&&(a=o.set(e,i,n))!==t?a:(e.setAttribute(n,i+""),i):o&&"get"in o&&s&&null!==(a=o.get(e,n))?a:(a=e.getAttribute(n),null===a?t:a))},removeAttr:function(e,t){var n,i,r,a,o=0;if(t&&1===e.nodeType)for(i=t.split(tt);o<i.length;o++)r=i[o],r&&(n=J.propFix[r]||r,a=Tt.test(r),a||J.attr(e,r,""),e.removeAttribute(Et?r:n),a&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(xt.test(e.nodeName)&&e.parentNode)J.error("type property can't be changed");else if(!J.support.radioValue&&"radio"===t&&J.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return vt&&J.nodeName(e,"button")?vt.get(e,t):t in e?e.value:null},set:function(e,t,n){return vt&&J.nodeName(e,"button")?vt.set(e,t,n):(e.value=t,void 0)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var r,a,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!J.isXMLDoc(e),o&&(n=J.propFix[n]||n,a=J.propHooks[n]),i!==t?a&&"set"in a&&(r=a.set(e,i,n))!==t?r:e[n]=i:a&&"get"in a&&null!==(r=a.get(e,n))?r:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):Ct.test(e.nodeName)||kt.test(e.nodeName)&&e.href?0:t}}}}),yt={get:function(e,n){var i,r=J.prop(e,n);return r===!0||"boolean"!=typeof r&&(i=e.getAttributeNode(n))&&i.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var i;return t===!1?J.removeAttr(e,n):(i=J.propFix[n]||n,i in e&&(e[i]=!0),e.setAttribute(n,n.toLowerCase())),n}},Et||(bt={name:!0,id:!0,coords:!0},vt=J.valHooks.button={get:function(e,n){var i;return i=e.getAttributeNode(n),i&&(bt[n]?""!==i.value:i.specified)?i.value:t},set:function(e,t,n){var i=e.getAttributeNode(n);return i||(i=W.createAttribute(n),e.setAttributeNode(i)),i.value=t+""}},J.each(["width","height"],function(e,t){J.attrHooks[t]=J.extend(J.attrHooks[t],{set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}})}),J.attrHooks.contenteditable={get:vt.get,set:function(e,t,n){""===t&&(t="false"),vt.set(e,t,n)}}),J.support.hrefNormalized||J.each(["href","src","width","height"],function(e,n){J.attrHooks[n]=J.extend(J.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return null===i?t:i}})}),J.support.style||(J.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),J.support.optSelected||(J.propHooks.selected=J.extend(J.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),J.support.enctype||(J.propFix.enctype="encoding"),J.support.checkOn||J.each(["radio","checkbox"],function(){J.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value
}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]=J.extend(J.valHooks[this],{set:function(e,t){return J.isArray(t)?e.checked=J.inArray(J(e).val(),t)>=0:void 0}})});var St=/^(?:textarea|input|select)$/i,Dt=/^([^\.]*|)(?:\.(.+)|)$/,At=/(?:^|\s)hover(\.\S+|)\b/,Nt=/^key/,Mt=/^(?:mouse|contextmenu)|click/,Rt=/^(?:focusinfocus|focusoutblur)$/,Pt=function(e){return J.event.special.hover?e:e.replace(At,"mouseenter$1 mouseleave$1")};J.event={add:function(e,n,i,r,a){var o,s,l,c,u,h,d,p,f,m,g;if(3!==e.nodeType&&8!==e.nodeType&&n&&i&&(o=J._data(e))){for(i.handler&&(f=i,i=f.handler,a=f.selector),i.guid||(i.guid=J.guid++),l=o.events,l||(o.events=l={}),s=o.handle,s||(o.handle=s=function(e){return"undefined"==typeof J||e&&J.event.triggered===e.type?t:J.event.dispatch.apply(s.elem,arguments)},s.elem=e),n=J.trim(Pt(n)).split(" "),c=0;c<n.length;c++)u=Dt.exec(n[c])||[],h=u[1],d=(u[2]||"").split(".").sort(),g=J.event.special[h]||{},h=(a?g.delegateType:g.bindType)||h,g=J.event.special[h]||{},p=J.extend({type:h,origType:u[1],data:r,handler:i,guid:i.guid,selector:a,needsContext:a&&J.expr.match.needsContext.test(a),namespace:d.join(".")},f),m=l[h],m||(m=l[h]=[],m.delegateCount=0,g.setup&&g.setup.call(e,r,d,s)!==!1||(e.addEventListener?e.addEventListener(h,s,!1):e.attachEvent&&e.attachEvent("on"+h,s))),g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=i.guid)),a?m.splice(m.delegateCount++,0,p):m.push(p),J.event.global[h]=!0;e=null}},global:{},remove:function(e,t,n,i,r){var a,o,s,l,c,u,h,d,p,f,m,g=J.hasData(e)&&J._data(e);if(g&&(d=g.events)){for(t=J.trim(Pt(t||"")).split(" "),a=0;a<t.length;a++)if(o=Dt.exec(t[a])||[],s=l=o[1],c=o[2],s){for(p=J.event.special[s]||{},s=(i?p.delegateType:p.bindType)||s,f=d[s]||[],u=f.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=0;h<f.length;h++)m=f[h],!r&&l!==m.origType||n&&n.guid!==m.guid||c&&!c.test(m.namespace)||i&&i!==m.selector&&("**"!==i||!m.selector)||(f.splice(h--,1),m.selector&&f.delegateCount--,p.remove&&p.remove.call(e,m));0===f.length&&u!==f.length&&(p.teardown&&p.teardown.call(e,c,g.handle)!==!1||J.removeEvent(e,s,g.handle),delete d[s])}else for(s in d)J.event.remove(e,s+t[a],n,i,!0);J.isEmptyObject(d)&&(delete g.handle,J.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,i,r,a){if(!r||3!==r.nodeType&&8!==r.nodeType){var o,s,l,c,u,h,d,p,f,m,g=n.type||n,v=[];if(!Rt.test(g+J.event.triggered)&&(g.indexOf("!")>=0&&(g=g.slice(0,-1),s=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),r&&!J.event.customEvent[g]||J.event.global[g]))if(n="object"==typeof n?n[J.expando]?n:new J.Event(g,n):new J.Event(g),n.type=g,n.isTrigger=!0,n.exclusive=s,n.namespace=v.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=g.indexOf(":")<0?"on"+g:"",r){if(n.result=t,n.target||(n.target=r),i=null!=i?J.makeArray(i):[],i.unshift(n),d=J.event.special[g]||{},!d.trigger||d.trigger.apply(r,i)!==!1){if(f=[[r,d.bindType||g]],!a&&!d.noBubble&&!J.isWindow(r)){for(m=d.delegateType||g,c=Rt.test(m+g)?r:r.parentNode,u=r;c;c=c.parentNode)f.push([c,m]),u=c;u===(r.ownerDocument||W)&&f.push([u.defaultView||u.parentWindow||e,m])}for(l=0;l<f.length&&!n.isPropagationStopped();l++)c=f[l][0],n.type=f[l][1],p=(J._data(c,"events")||{})[n.type]&&J._data(c,"handle"),p&&p.apply(c,i),p=h&&c[h],p&&J.acceptData(c)&&p.apply&&p.apply(c,i)===!1&&n.preventDefault();return n.type=g,a||n.isDefaultPrevented()||d._default&&d._default.apply(r.ownerDocument,i)!==!1||"click"===g&&J.nodeName(r,"a")||!J.acceptData(r)||h&&r[g]&&("focus"!==g&&"blur"!==g||0!==n.target.offsetWidth)&&!J.isWindow(r)&&(u=r[h],u&&(r[h]=null),J.event.triggered=g,r[g](),J.event.triggered=t,u&&(r[h]=u)),n.result}}else{o=J.cache;for(l in o)o[l].events&&o[l].events[g]&&J.event.trigger(n,i,o[l].handle.elem,!0)}}},dispatch:function(n){n=J.event.fix(n||e.event);var i,r,a,o,s,l,c,u,h,d=(J._data(this,"events")||{})[n.type]||[],p=d.delegateCount,f=V.call(arguments),m=!n.exclusive&&!n.namespace,g=J.event.special[n.type]||{},v=[];if(f[0]=n,n.delegateTarget=this,!g.preDispatch||g.preDispatch.call(this,n)!==!1){if(p&&(!n.button||"click"!==n.type))for(a=n.target;a!=this;a=a.parentNode||this)if(a.disabled!==!0||"click"!==n.type){for(s={},c=[],i=0;p>i;i++)u=d[i],h=u.selector,s[h]===t&&(s[h]=u.needsContext?J(h,this).index(a)>=0:J.find(h,this,null,[a]).length),s[h]&&c.push(u);c.length&&v.push({elem:a,matches:c})}for(d.length>p&&v.push({elem:this,matches:d.slice(p)}),i=0;i<v.length&&!n.isPropagationStopped();i++)for(l=v[i],n.currentTarget=l.elem,r=0;r<l.matches.length&&!n.isImmediatePropagationStopped();r++)u=l.matches[r],(m||!n.namespace&&!u.namespace||n.namespace_re&&n.namespace_re.test(u.namespace))&&(n.data=u.data,n.handleObj=u,o=((J.event.special[u.origType]||{}).handle||u.handler).apply(l.elem,f),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation())));return g.postDispatch&&g.postDispatch.call(this,n),n.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,a,o=n.button,s=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||W,r=i.documentElement,a=i.body,e.pageX=n.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?n.toElement:s),e.which||o===t||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[J.expando])return e;var t,n,i=e,r=J.event.fixHooks[e.type]||{},a=r.props?this.props.concat(r.props):this.props;for(e=J.Event(i),t=a.length;t;)n=a[--t],e[n]=i[n];return e.target||(e.target=i.srcElement||W),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,i):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){J.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,i){var r=J.extend(new J.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?J.event.trigger(r,null,t):J.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},J.event.handle=J.event.dispatch,J.removeEvent=W.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&("undefined"==typeof e[i]&&(e[i]=null),e.detachEvent(i,n))},J.Event=function(e,t){return this instanceof J.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?o:a):this.type=e,t&&J.extend(this,t),this.timeStamp=e&&e.timeStamp||J.now(),this[J.expando]=!0,void 0):new J.Event(e,t)},J.Event.prototype={preventDefault:function(){this.isDefaultPrevented=o;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=o;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a},J.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){J.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,a=e.handleObj;return a.selector,(!r||r!==i&&!J.contains(i,r))&&(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),J.support.submitBubbles||(J.event.special.submit={setup:function(){return J.nodeName(this,"form")?!1:(J.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=J.nodeName(n,"input")||J.nodeName(n,"button")?n.form:t;i&&!J._data(i,"_submit_attached")&&(J.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),J._data(i,"_submit_attached",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&J.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return J.nodeName(this,"form")?!1:(J.event.remove(this,"._submit"),void 0)}}),J.support.changeBubbles||(J.event.special.change={setup:function(){return St.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(J.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),J.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),J.event.simulate("change",this,e,!0)})),!1):(J.event.add(this,"beforeactivate._change",function(e){var t=e.target;St.test(t.nodeName)&&!J._data(t,"_change_attached")&&(J.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||J.event.simulate("change",this.parentNode,e,!0)}),J._data(t,"_change_attached",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return J.event.remove(this,"._change"),!St.test(this.nodeName)}}),J.support.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){J.event.simulate(t,e.target,J.event.fix(e),!0)};J.event.special[t]={setup:function(){0===n++&&W.addEventListener(e,i,!0)},teardown:function(){0===--n&&W.removeEventListener(e,i,!0)}}}),J.fn.extend({on:function(e,n,i,r,o){var s,l;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(l in e)this.on(l,n,i,e[l],o);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),r===!1)r=a;else if(!r)return this;return 1===o&&(s=r,r=function(e){return J().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=J.guid++)),this.each(function(){J.event.add(this,e,r,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,J(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=a),this.each(function(){J.event.remove(this,e,i,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return J(this.context).on(e,this.selector,t,n),this},die:function(e,t){return J(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){J.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?J.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,n=e.guid||J.guid++,i=0,r=function(n){var r=(J._data(this,"lastToggle"+e.guid)||0)%i;return J._data(this,"lastToggle"+e.guid,r+1),n.preventDefault(),t[r].apply(this,arguments)||!1};for(r.guid=n;i<t.length;)t[i++].guid=n;return this.click(r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){J.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Nt.test(t)&&(J.event.fixHooks[t]=J.event.keyHooks),Mt.test(t)&&(J.event.fixHooks[t]=J.event.mouseHooks)}),/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
function(e,t){function n(e,t,n,i){n=n||[],t=t||M;var r,a,o,s,l=t.nodeType;if(!e||"string"!=typeof e)return n;if(1!==l&&9!==l)return[];if(o=w(t),!o&&!i&&(r=nt.exec(e)))if(s=r[1]){if(9===l){if(a=t.getElementById(s),!a||!a.parentNode)return n;if(a.id===s)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(s))&&x(t,a)&&a.id===s)return n.push(a),n}else{if(r[2])return I.apply(n,L.call(t.getElementsByTagName(e),0)),n;if((s=r[3])&&dt&&t.getElementsByClassName)return I.apply(n,L.call(t.getElementsByClassName(s),0)),n}return m(e.replace(Q,"$1"),t,n,i,o)}function i(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function r(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function a(e){return H(function(t){return t=+t,H(function(n,i){for(var r,a=e([],n.length,t),o=a.length;o--;)n[r=a[o]]&&(n[r]=!(i[r]=n[r]))})})}function o(e,t,n){if(e===t)return n;for(var i=e.nextSibling;i;){if(i===t)return-1;i=i.nextSibling}return 1}function s(e,t){var i,r,a,o,s,l,c,u=z[A][e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=b.preFilter;s;){(!i||(r=Z.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(a=[])),i=!1,(r=et.exec(s))&&(a.push(i=new N(r.shift())),s=s.slice(i.length),i.type=r[0].replace(Q," "));for(o in b.filter)!(r=st[o].exec(s))||c[o]&&!(r=c[o](r))||(a.push(i=new N(r.shift())),s=s.slice(i.length),i.type=o,i.matches=r);if(!i)break}return t?s.length:s?n.error(e):z(e,l).slice(0)}function l(e,t,n){var i=t.dir,r=n&&"parentNode"===t.dir,a=O++;return t.first?function(t,n,a){for(;t=t[i];)if(r||1===t.nodeType)return e(t,n,a)}:function(t,n,o){if(o){for(;t=t[i];)if((r||1===t.nodeType)&&e(t,n,o))return t}else for(var s,l=P+" "+a+" ",c=l+v;t=t[i];)if(r||1===t.nodeType){if((s=t[A])===c)return t.sizset;if("string"==typeof s&&0===s.indexOf(l)){if(t.sizset)return t}else{if(t[A]=c,e(t,n,o))return t.sizset=!0,t;t.sizset=!1}}}}function c(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function u(e,t,n,i,r){for(var a,o=[],s=0,l=e.length,c=null!=t;l>s;s++)(a=e[s])&&(!n||n(a,i,r))&&(o.push(a),c&&t.push(s));return o}function h(e,t,n,i,r,a){return i&&!i[A]&&(i=h(i)),r&&!r[A]&&(r=h(r,a)),H(function(a,o,s,l){var c,h,d,p=[],m=[],g=o.length,v=a||f(t||"*",s.nodeType?[s]:s,[]),y=!e||!a&&t?v:u(v,p,e,s,l),b=n?r||(a?e:g||i)?[]:o:y;if(n&&n(y,b,s,l),i)for(c=u(b,m),i(c,[],s,l),h=c.length;h--;)(d=c[h])&&(b[m[h]]=!(y[m[h]]=d));if(a){if(r||e){if(r){for(c=[],h=b.length;h--;)(d=b[h])&&c.push(y[h]=d);r(null,b=[],c,l)}for(h=b.length;h--;)(d=b[h])&&(c=r?j.call(a,d):p[h])>-1&&(a[c]=!(o[c]=d))}}else b=u(b===o?b.splice(g,b.length):b),r?r(null,o,b,l):I.apply(o,b)})}function d(e){for(var t,n,i,r=e.length,a=b.relative[e[0].type],o=a||b.relative[" "],s=a?1:0,u=l(function(e){return e===t},o,!0),p=l(function(e){return j.call(t,e)>-1},o,!0),f=[function(e,n,i){return!a&&(i||n!==E)||((t=n).nodeType?u(e,n,i):p(e,n,i))}];r>s;s++)if(n=b.relative[e[s].type])f=[l(c(f),n)];else{if(n=b.filter[e[s].type].apply(null,e[s].matches),n[A]){for(i=++s;r>i&&!b.relative[e[i].type];i++);return h(s>1&&c(f),s>1&&e.slice(0,s-1).join("").replace(Q,"$1"),n,i>s&&d(e.slice(s,i)),r>i&&d(e=e.slice(i)),r>i&&e.join(""))}f.push(n)}return c(f)}function p(e,t){var i=t.length>0,r=e.length>0,a=function(o,s,l,c,h){var d,p,f,m=[],g=0,y="0",_=o&&[],w=null!=h,x=E,C=o||r&&b.find.TAG("*",h&&s.parentNode||s),k=P+=null==x?1:Math.E;for(w&&(E=s!==M&&s,v=a.el);null!=(d=C[y]);y++){if(r&&d){for(p=0;f=e[p];p++)if(f(d,s,l)){c.push(d);break}w&&(P=k,v=++a.el)}i&&((d=!f&&d)&&g--,o&&_.push(d))}if(g+=y,i&&y!==g){for(p=0;f=t[p];p++)f(_,m,s,l);if(o){if(g>0)for(;y--;)_[y]||m[y]||(m[y]=F.call(c));m=u(m)}I.apply(c,m),w&&!o&&m.length>0&&g+t.length>1&&n.uniqueSort(c)}return w&&(P=k,E=x),_};return a.el=0,i?H(a):a}function f(e,t,i){for(var r=0,a=t.length;a>r;r++)n(e,t[r],i);return i}function m(e,t,n,i,r){var a,o,l,c,u,h=s(e);if(h.length,!i&&1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(l=o[0]).type&&9===t.nodeType&&!r&&b.relative[o[1].type]){if(t=b.find.ID(l.matches[0].replace(ot,""),t,r)[0],!t)return n;e=e.slice(o.shift().length)}for(a=st.POS.test(e)?-1:o.length-1;a>=0&&(l=o[a],!b.relative[c=l.type]);a--)if((u=b.find[c])&&(i=u(l.matches[0].replace(ot,""),it.test(o[0].type)&&t.parentNode||t,r))){if(o.splice(a,1),e=i.length&&o.join(""),!e)return I.apply(n,L.call(i,0)),n;break}}return C(e,h)(i,t,r,n,it.test(e)),n}function g(){}var v,y,b,_,w,x,C,k,T,E,S=!0,D="undefined",A=("sizcache"+Math.random()).replace(".",""),N=String,M=e.document,R=M.documentElement,P=0,O=0,F=[].pop,I=[].push,L=[].slice,j=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},H=function(e,t){return e[A]=null==t||t,e},B=function(){var e={},t=[];return H(function(n,i){return t.push(n)>b.cacheLength&&delete e[t.shift()],e[n+" "]=i},e)},W=B(),z=B(),$=B(),U="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",Y=q.replace("w","w#"),V="([*^$|!~]?=)",X="\\["+U+"*("+q+")"+U+"*(?:"+V+U+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+Y+")|)|)"+U+"*\\]",K=":("+q+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+X+")|[^:]|\\\\.)*|.*))\\)|)",G=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+U+"*((?:-\\d)?\\d*)"+U+"*\\)|)(?=[^-]|$)",Q=new RegExp("^"+U+"+|((?:^|[^\\\\])(?:\\\\.)*)"+U+"+$","g"),Z=new RegExp("^"+U+"*,"+U+"*"),et=new RegExp("^"+U+"*([\\x20\\t\\r\\n\\f>+~])"+U+"*"),tt=new RegExp(K),nt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,it=/[\x20\t\r\n\f]*[+~]/,rt=/h\d/i,at=/input|select|textarea|button/i,ot=/\\(?!\\)/g,st={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),NAME:new RegExp("^\\[name=['\"]?("+q+")['\"]?\\]"),TAG:new RegExp("^("+q.replace("w","w*")+")"),ATTR:new RegExp("^"+X),PSEUDO:new RegExp("^"+K),POS:new RegExp(G,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+U+"*(even|odd|(([+-]|)(\\d*)n|)"+U+"*(?:([+-]|)"+U+"*(\\d+)|))"+U+"*\\)|)","i"),needsContext:new RegExp("^"+U+"*[>+~]|"+G,"i")},lt=function(e){var t=M.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},ct=lt(function(e){return e.appendChild(M.createComment("")),!e.getElementsByTagName("*").length}),ut=lt(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==D&&"#"===e.firstChild.getAttribute("href")}),ht=lt(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),dt=lt(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),pt=lt(function(e){e.id=A+0,e.innerHTML="<a name='"+A+"'></a><div name='"+A+"'></div>",R.insertBefore(e,R.firstChild);var t=M.getElementsByName&&M.getElementsByName(A).length===2+M.getElementsByName(A+0).length;return y=!M.getElementById(A),R.removeChild(e),t});try{L.call(R.childNodes,0)[0].nodeType}catch(ft){L=function(e){for(var t,n=[];t=this[e];e++)n.push(t);return n}}n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){return n(t,null,null,[e]).length>0},_=n.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=_(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i];i++)n+=_(t);return n},w=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},x=n.contains=R.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!!(i&&1===i.nodeType&&n.contains&&n.contains(i))}:R.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},n.attr=function(e,t){var n,i=w(e);return i||(t=t.toLowerCase()),(n=b.attrHandle[t])?n(e):i||ht?e.getAttribute(t):(n=e.getAttributeNode(t),n?"boolean"==typeof e[t]?e[t]?t:null:n.specified?n.value:null:null)},b=n.selectors={cacheLength:50,createPseudo:H,match:st,attrHandle:ut?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:y?function(e,t,n){if(typeof t.getElementById!==D&&!n){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}}:function(e,n,i){if(typeof n.getElementById!==D&&!i){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==D&&r.getAttributeNode("id").value===e?[r]:t:[]}},TAG:ct?function(e,t){return typeof t.getElementsByTagName!==D?t.getElementsByTagName(e):void 0}:function(e,t){var n=t.getElementsByTagName(e);if("*"===e){for(var i,r=[],a=0;i=n[a];a++)1===i.nodeType&&r.push(i);return r}return n},NAME:pt&&function(e,t){return typeof t.getElementsByName!==D?t.getElementsByName(name):void 0},CLASS:dt&&function(e,t,n){return typeof t.getElementsByClassName===D||n?void 0:t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ot,""),e[3]=(e[4]||e[5]||"").replace(ot,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||n.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&n.error(e[0]),e},PSEUDO:function(e){var t,n;return st.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(tt.test(t)&&(n=s(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t),e.slice(0,3))}},filter:{ID:y?function(e){return e=e.replace(ot,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(ot,""),function(t){var n=typeof t.getAttributeNode!==D&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(ot,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=W[A][e+" "];return t||(t=new RegExp("(^|"+U+")"+e+"("+U+"|$)"))&&W(e,function(e){return t.test(e.className||typeof e.getAttribute!==D&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(r){var a=n.attr(r,e);return null==a?"!="===t:t?(a+="","="===t?a===i:"!="===t?a!==i:"^="===t?i&&0===a.indexOf(i):"*="===t?i&&a.indexOf(i)>-1:"$="===t?i&&a.substr(a.length-i.length)===i:"~="===t?(" "+a+" ").indexOf(i)>-1:"|="===t?a===i||a.substr(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i){return"nth"===e?function(e){var t,r,a=e.parentNode;if(1===n&&0===i)return!0;if(a)for(r=0,t=a.firstChild;t&&(1!==t.nodeType||(r++,e!==t));t=t.nextSibling);return r-=i,r===n||0===r%n&&r/n>=0}:function(t){var n=t;switch(e){case"only":case"first":for(;n=n.previousSibling;)if(1===n.nodeType)return!1;if("first"===e)return!0;n=t;case"last":for(;n=n.nextSibling;)if(1===n.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var i,r=b.pseudos[e]||b.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return r[A]?r(t):r.length>1?(i=[e,e,"",t],b.setFilters.hasOwnProperty(e.toLowerCase())?H(function(e,n){for(var i,a=r(e,t),o=a.length;o--;)i=j.call(e,a[o]),e[i]=!(n[i]=a[o])}):function(e){return r(e,0,i)}):r}},pseudos:{not:H(function(e){var t=[],n=[],i=C(e.replace(Q,"$1"));return i[A]?H(function(e,t,n,r){for(var a,o=i(e,null,r,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,r,a){return t[0]=e,i(t,null,a,n),!n.pop()}}),has:H(function(e){return function(t){return n(e,t).length>0}}),contains:H(function(e){return function(t){return(t.textContent||t.innerText||_(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!b.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return rt.test(e.nodeName)},text:function(e){var t,n;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(n=e.getAttribute("type"))||n.toLowerCase()===t)},radio:i("radio"),checkbox:i("checkbox"),file:i("file"),password:i("password"),image:i("image"),submit:r("submit"),reset:r("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return at.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:a(function(){return[0]}),last:a(function(e,t){return[t-1]}),eq:a(function(e,t,n){return[0>n?n+t:n]}),even:a(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:a(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:a(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:a(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},k=R.compareDocumentPosition?function(e,t){return e===t?(T=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return T=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,i,r=[],a=[],s=e.parentNode,l=t.parentNode,c=s;if(s===l)return o(e,t);if(!s)return-1;if(!l)return 1;for(;c;)r.unshift(c),c=c.parentNode;for(c=l;c;)a.unshift(c),c=c.parentNode;n=r.length,i=a.length;for(var u=0;n>u&&i>u;u++)if(r[u]!==a[u])return o(r[u],a[u]);return u===n?o(e,a[u],-1):o(r[u],t,1)},[0,0].sort(k),S=!T,n.uniqueSort=function(e){var t,n=[],i=1,r=0;if(T=S,e.sort(k),T){for(;t=e[i];i++)t===e[i-1]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},C=n.compile=function(e,t){var n,i=[],r=[],a=$[A][e+" "];if(!a){for(t||(t=s(e)),n=t.length;n--;)a=d(t[n]),a[A]?i.push(a):r.push(a);a=$(e,p(r,i))}return a},M.querySelectorAll&&!function(){var e,t=m,i=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,a=[":focus"],o=[":active"],l=R.matchesSelector||R.mozMatchesSelector||R.webkitMatchesSelector||R.oMatchesSelector||R.msMatchesSelector;lt(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||a.push("\\["+U+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||a.push(":checked")}),lt(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&a.push("[*^$]="+U+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||a.push(":enabled",":disabled")}),a=new RegExp(a.join("|")),m=function(e,n,r,o,l){if(!o&&!l&&!a.test(e)){var c,u,h=!0,d=A,p=n,f=9===n.nodeType&&e;if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){for(c=s(e),(h=n.getAttribute("id"))?d=h.replace(i,"\\$&"):n.setAttribute("id",d),d="[id='"+d+"'] ",u=c.length;u--;)c[u]=d+c[u].join("");p=it.test(e)&&n.parentNode||n,f=c.join(",")}if(f)try{return I.apply(r,L.call(p.querySelectorAll(f),0)),r}catch(m){}finally{h||n.removeAttribute("id")}}return t(e,n,r,o,l)},l&&(lt(function(t){e=l.call(t,"div");try{l.call(t,"[test!='']:sizzle"),o.push("!=",K)}catch(n){}}),o=new RegExp(o.join("|")),n.matchesSelector=function(t,i){if(i=i.replace(r,"='$1']"),!w(t)&&!o.test(i)&&!a.test(i))try{var s=l.call(t,i);if(s||e||t.document&&11!==t.document.nodeType)return s}catch(c){}return n(i,null,null,[t]).length>0})}(),b.pseudos.nth=b.pseudos.eq,b.filters=g.prototype=b.pseudos,b.setFilters=new g,n.attr=J.attr,J.find=n,J.expr=n.selectors,J.expr[":"]=J.expr.pseudos,J.unique=n.uniqueSort,J.text=n.getText,J.isXMLDoc=n.isXML,J.contains=n.contains}(e);var Ot=/Until$/,Ft=/^(?:parents|prev(?:Until|All))/,It=/^.[^:#\[\.,]*$/,Lt=J.expr.match.needsContext,jt={children:!0,contents:!0,next:!0,prev:!0};J.fn.extend({find:function(e){var t,n,i,r,a,o,s=this;if("string"!=typeof e)return J(e).filter(function(){for(t=0,n=s.length;n>t;t++)if(J.contains(s[t],this))return!0});for(o=this.pushStack("","find",e),t=0,n=this.length;n>t;t++)if(i=o.length,J.find(e,this[t],o),t>0)for(r=i;r<o.length;r++)for(a=0;i>a;a++)if(o[a]===o[r]){o.splice(r--,1);break}return o},has:function(e){var t,n=J(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(J.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(c(this,e,!1),"not",e)},filter:function(e){return this.pushStack(c(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?Lt.test(e)?J(e,this.context).index(this[0])>=0:J.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,i=0,r=this.length,a=[],o=Lt.test(e)||"string"!=typeof e?J(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(o?o.index(n)>-1:J.find.matchesSelector(n,e)){a.push(n);break}n=n.parentNode}return a=a.length>1?J.unique(a):a,this.pushStack(a,"closest",e)},index:function(e){return e?"string"==typeof e?J.inArray(this[0],J(e)):J.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?J(e,t):J.makeArray(e&&e.nodeType?[e]:e),i=J.merge(this.get(),n);return this.pushStack(s(n[0])||s(i[0])?i:J.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),J.fn.andSelf=J.fn.addBack,J.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return J.dir(e,"parentNode")},parentsUntil:function(e,t,n){return J.dir(e,"parentNode",n)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return J.dir(e,"nextSibling")},prevAll:function(e){return J.dir(e,"previousSibling")},nextUntil:function(e,t,n){return J.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return J.dir(e,"previousSibling",n)},siblings:function(e){return J.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return J.sibling(e.firstChild)},contents:function(e){return J.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:J.merge([],e.childNodes)}},function(e,t){J.fn[e]=function(n,i){var r=J.map(this,t,n);return Ot.test(e)||(i=n),i&&"string"==typeof i&&(r=J.filter(i,r)),r=this.length>1&&!jt[e]?J.unique(r):r,this.length>1&&Ft.test(e)&&(r=r.reverse()),this.pushStack(r,e,V.call(arguments).join(","))}}),J.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?J.find.matchesSelector(t[0],e)?[t[0]]:[]:J.find.matches(e,t)},dir:function(e,n,i){for(var r=[],a=e[n];a&&9!==a.nodeType&&(i===t||1!==a.nodeType||!J(a).is(i));)1===a.nodeType&&r.push(a),a=a[n];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Bt=/ jQuery\d+="(?:null|\d+)"/g,Wt=/^\s+/,zt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$t=/<([\w:]+)/,Ut=/<tbody/i,qt=/<|&#?\w+;/,Yt=/<(?:script|style|link)/i,Vt=/<(?:script|object|embed|option|style)/i,Xt=new RegExp("<(?:"+Ht+")[\\s/>]","i"),Kt=/^(?:checkbox|radio)$/,Gt=/checked\s*(?:[^=]|=\s*.checked.)/i,Qt=/\/(java|ecma)script/i,Jt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},en=u(W),tn=en.appendChild(W.createElement("div"));Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td,J.support.htmlSerialize||(Zt._default=[1,"X<div>","</div>"]),J.fn.extend({text:function(e){return J.access(this,function(e){return e===t?J.text(this):this.empty().append((this[0]&&this[0].ownerDocument||W).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(J.isFunction(e))return this.each(function(t){J(this).wrapAll(e.call(this,t))});if(this[0]){var t=J(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return J.isFunction(e)?this.each(function(t){J(this).wrapInner(e.call(this,t))}):this.each(function(){var t=J(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=J.isFunction(e);return this.each(function(n){J(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!s(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=J.clean(arguments);return this.pushStack(J.merge(e,this),"before",this.selector)}},after:function(){if(!s(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=J.clean(arguments);return this.pushStack(J.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||J.filter(e,[n]).length)&&(t||1!==n.nodeType||(J.cleanData(n.getElementsByTagName("*")),J.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&J.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return J.clone(this,e,t)})},html:function(e){return J.access(this,function(e){var n=this[0]||{},i=0,r=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Bt,""):t;if(!("string"!=typeof e||Yt.test(e)||!J.support.htmlSerialize&&Xt.test(e)||!J.support.leadingWhitespace&&Wt.test(e)||Zt[($t.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(zt,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(J.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(a){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return s(this[0])?this.length?this.pushStack(J(J.isFunction(e)?e():e),"replaceWith",e):this:J.isFunction(e)?this.each(function(t){var n=J(this),i=n.html();n.replaceWith(e.call(this,t,i))}):("string"!=typeof e&&(e=J(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;J(this).remove(),t?J(t).before(e):J(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){e=[].concat.apply([],e);var r,a,o,s,l=0,c=e[0],u=[],d=this.length;if(!J.support.checkClone&&d>1&&"string"==typeof c&&Gt.test(c))return this.each(function(){J(this).domManip(e,n,i)});if(J.isFunction(c))return this.each(function(r){var a=J(this);e[0]=c.call(this,r,n?a.html():t),a.domManip(e,n,i)});if(this[0]){if(r=J.buildFragment(e,this,u),o=r.fragment,a=o.firstChild,1===o.childNodes.length&&(o=a),a)for(n=n&&J.nodeName(a,"tr"),s=r.cacheable||d-1;d>l;l++)i.call(n&&J.nodeName(this[l],"table")?h(this[l],"tbody"):this[l],l===s?o:J.clone(o,!0,!0));o=a=null,u.length&&J.each(u,function(e,t){t.src?J.ajax?J.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):J.error("no ajax"):J.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Jt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),J.buildFragment=function(e,n,i){var r,a,o,s=e[0];return n=n||W,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,!(1===e.length&&"string"==typeof s&&s.length<512&&n===W&&"<"===s.charAt(0))||Vt.test(s)||!J.support.checkClone&&Gt.test(s)||!J.support.html5Clone&&Xt.test(s)||(a=!0,r=J.fragments[s],o=r!==t),r||(r=n.createDocumentFragment(),J.clean(e,n,r,i),a&&(J.fragments[s]=o&&r)),{fragment:r,cacheable:a}},J.fragments={},J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){J.fn[e]=function(n){var i,r=0,a=[],o=J(n),s=o.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===s)return o[t](this[0]),this;for(;s>r;r++)i=(r>0?this.clone(!0):this).get(),J(o[r])[t](i),a=a.concat(i);return this.pushStack(a,e,o.selector)}}),J.extend({clone:function(e,t,n){var i,r,a,o;if(J.support.html5Clone||J.isXMLDoc(e)||!Xt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(tn.innerHTML=e.outerHTML,tn.removeChild(o=tn.firstChild)),!(J.support.noCloneEvent&&J.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||J.isXMLDoc(e)))for(p(e,o),i=f(e),r=f(o),a=0;i[a];++a)r[a]&&p(i[a],r[a]);if(t&&(d(e,o),n))for(i=f(e),r=f(o),a=0;i[a];++a)d(i[a],r[a]);return i=r=null,o},clean:function(e,t,n,i){var r,a,o,s,l,c,h,d,p,f,g,v=t===W&&en,y=[];for(t&&"undefined"!=typeof t.createDocumentFragment||(t=W),r=0;null!=(o=e[r]);r++)if("number"==typeof o&&(o+=""),o){if("string"==typeof o)if(qt.test(o)){for(v=v||u(t),h=t.createElement("div"),v.appendChild(h),o=o.replace(zt,"<$1></$2>"),s=($t.exec(o)||["",""])[1].toLowerCase(),l=Zt[s]||Zt._default,c=l[0],h.innerHTML=l[1]+o+l[2];c--;)h=h.lastChild;if(!J.support.tbody)for(d=Ut.test(o),p="table"!==s||d?"<table>"!==l[1]||d?[]:h.childNodes:h.firstChild&&h.firstChild.childNodes,a=p.length-1;a>=0;--a)J.nodeName(p[a],"tbody")&&!p[a].childNodes.length&&p[a].parentNode.removeChild(p[a]);!J.support.leadingWhitespace&&Wt.test(o)&&h.insertBefore(t.createTextNode(Wt.exec(o)[0]),h.firstChild),o=h.childNodes,h.parentNode.removeChild(h)}else o=t.createTextNode(o);o.nodeType?y.push(o):J.merge(y,o)}if(h&&(o=h=v=null),!J.support.appendChecked)for(r=0;null!=(o=y[r]);r++)J.nodeName(o,"input")?m(o):"undefined"!=typeof o.getElementsByTagName&&J.grep(o.getElementsByTagName("input"),m);if(n)for(f=function(e){return!e.type||Qt.test(e.type)?i?i.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e):void 0},r=0;null!=(o=y[r]);r++)J.nodeName(o,"script")&&f(o)||(n.appendChild(o),"undefined"!=typeof o.getElementsByTagName&&(g=J.grep(J.merge([],o.getElementsByTagName("script")),f),y.splice.apply(y,[r+1,0].concat(g)),r+=g.length));return y},cleanData:function(e,t){for(var n,i,r,a,o=0,s=J.expando,l=J.cache,c=J.support.deleteExpando,u=J.event.special;null!=(r=e[o]);o++)if((t||J.acceptData(r))&&(i=r[s],n=i&&l[i])){if(n.events)for(a in n.events)u[a]?J.event.remove(r,a):J.removeEvent(r,a,n.handle);l[i]&&(delete l[i],c?delete r[s]:r.removeAttribute?r.removeAttribute(s):r[s]=null,J.deletedIds.push(i))}}}),function(){var e,t;J.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=J.uaMatch($.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),J.browser=t,J.sub=function(){function e(t,n){return new e.fn.init(t,n)}J.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof J&&!(i instanceof e)&&(i=e(i)),J.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(W);return e}}();var nn,rn,an,on=/alpha\([^)]*\)/i,sn=/opacity=([^)]*)/,ln=/^(top|right|bottom|left)$/,cn=/^(none|table(?!-c[ea]).+)/,un=/^margin/,hn=new RegExp("^("+Z+")(.*)$","i"),dn=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),pn=new RegExp("^([-+])=("+Z+")","i"),fn={BODY:"block"},mn={position:"absolute",visibility:"hidden",display:"block"},gn={letterSpacing:0,fontWeight:400},vn=["Top","Right","Bottom","Left"],yn=["Webkit","O","Moz","ms"],bn=J.fn.toggle;J.fn.extend({css:function(e,n){return J.access(this,function(e,n,i){return i!==t?J.style(e,n,i):J.css(e,n)},e,n,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e,t){var n="boolean"==typeof e;return J.isFunction(e)&&J.isFunction(t)?bn.apply(this,arguments):this.each(function(){(n?e:v(this))?J(this).show():J(this).hide()})}}),J.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=nn(e,"opacity");return""===n?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":J.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,s,l=J.camelCase(n),c=e.style;if(n=J.cssProps[l]||(J.cssProps[l]=g(c,l)),s=J.cssHooks[n]||J.cssHooks[l],i===t)return s&&"get"in s&&(a=s.get(e,!1,r))!==t?a:c[n];if(o=typeof i,"string"===o&&(a=pn.exec(i))&&(i=(a[1]+1)*a[2]+parseFloat(J.css(e,n)),o="number"),!(null==i||"number"===o&&isNaN(i)||("number"!==o||J.cssNumber[l]||(i+="px"),s&&"set"in s&&(i=s.set(e,i,r))===t)))try{c[n]=i}catch(u){}}},css:function(e,n,i,r){var a,o,s,l=J.camelCase(n);return n=J.cssProps[l]||(J.cssProps[l]=g(e.style,l)),s=J.cssHooks[n]||J.cssHooks[l],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=nn(e,n)),"normal"===a&&n in gn&&(a=gn[n]),i||r!==t?(o=parseFloat(a),i||J.isNumeric(o)?o||0:a):a},swap:function(e,t,n){var i,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];i=n.call(e);for(r in t)e.style[r]=a[r];return i}}),e.getComputedStyle?nn=function(t,n){var i,r,a,o,s=e.getComputedStyle(t,null),l=t.style;return s&&(i=s.getPropertyValue(n)||s[n],""!==i||J.contains(t.ownerDocument,t)||(i=J.style(t,n)),dn.test(i)&&un.test(n)&&(r=l.width,a=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=i,i=s.width,l.width=r,l.minWidth=a,l.maxWidth=o)),i}:W.documentElement.currentStyle&&(nn=function(e,t){var n,i,r=e.currentStyle&&e.currentStyle[t],a=e.style;return null==r&&a&&a[t]&&(r=a[t]),dn.test(r)&&!ln.test(t)&&(n=a.left,i=e.runtimeStyle&&e.runtimeStyle.left,i&&(e.runtimeStyle.left=e.currentStyle.left),a.left="fontSize"===t?"1em":r,r=a.pixelLeft+"px",a.left=n,i&&(e.runtimeStyle.left=i)),""===r?"auto":r}),J.each(["height","width"],function(e,t){J.cssHooks[t]={get:function(e,n,i){return n?0===e.offsetWidth&&cn.test(nn(e,"display"))?J.swap(e,mn,function(){return w(e,t,i)}):w(e,t,i):void 0},set:function(e,n,i){return b(e,n,i?_(e,t,i,J.support.boxSizing&&"border-box"===J.css(e,"boxSizing")):0)}}}),J.support.opacity||(J.cssHooks.opacity={get:function(e,t){return sn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=J.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=i&&i.filter||n.filter||"";n.zoom=1,t>=1&&""===J.trim(a.replace(on,""))&&n.removeAttribute&&(n.removeAttribute("filter"),i&&!i.filter)||(n.filter=on.test(a)?a.replace(on,r):a+" "+r)}}),J(function(){J.support.reliableMarginRight||(J.cssHooks.marginRight={get:function(e,t){return J.swap(e,{display:"inline-block"},function(){return t?nn(e,"marginRight"):void 0})}}),!J.support.pixelPosition&&J.fn.position&&J.each(["top","left"],function(e,t){J.cssHooks[t]={get:function(e,n){if(n){var i=nn(e,t);return dn.test(i)?J(e).position()[t]+"px":i}}}})}),J.expr&&J.expr.filters&&(J.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!J.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||nn(e,"display"))},J.expr.filters.visible=function(e){return!J.expr.filters.hidden(e)}),J.each({margin:"",padding:"",border:"Width"},function(e,t){J.cssHooks[e+t]={expand:function(n){var i,r="string"==typeof n?n.split(" "):[n],a={};for(i=0;4>i;i++)a[e+vn[i]+t]=r[i]||r[i-2]||r[0];return a}},un.test(e)||(J.cssHooks[e+t].set=b)});var _n=/%20/g,wn=/\[\]$/,xn=/\r?\n/g,Cn=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,kn=/^(?:select|textarea)/i;J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?J.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||kn.test(this.nodeName)||Cn.test(this.type))}).map(function(e,t){var n=J(this).val();return null==n?null:J.isArray(n)?J.map(n,function(e){return{name:t.name,value:e.replace(xn,"\r\n")}}):{name:t.name,value:n.replace(xn,"\r\n")}}).get()}}),J.param=function(e,n){var i,r=[],a=function(e,t){t=J.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)
};if(n===t&&(n=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(e)||e.jquery&&!J.isPlainObject(e))J.each(e,function(){a(this.name,this.value)});else for(i in e)C(i,e[i],n,a);return r.join("&").replace(_n,"+")};var Tn,En,Sn=/#.*$/,Dn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,An=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Nn=/^(?:GET|HEAD)$/,Mn=/^\/\//,Rn=/\?/,Pn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,On=/([?&])_=[^&]*/,Fn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,In=J.fn.load,Ln={},jn={},Hn=["*/"]+["*"];try{En=z.href}catch(Bn){En=W.createElement("a"),En.href="",En=En.href}Tn=Fn.exec(En.toLowerCase())||[],J.fn.load=function(e,n,i){if("string"!=typeof e&&In)return In.apply(this,arguments);if(!this.length)return this;var r,a,o,s=this,l=e.indexOf(" ");return l>=0&&(r=e.slice(l,e.length),e=e.slice(0,l)),J.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(a="POST"),J.ajax({url:e,type:a,dataType:"html",data:n,complete:function(e,t){i&&s.each(i,o||[e.responseText,t,e])}}).done(function(e){o=arguments,s.html(r?J("<div>").append(e.replace(Pn,"")).find(r):e)}),this},J.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){J.fn[t]=function(e){return this.on(t,e)}}),J.each(["get","post"],function(e,n){J[n]=function(e,i,r,a){return J.isFunction(i)&&(a=a||r,r=i,i=t),J.ajax({type:n,url:e,data:i,success:r,dataType:a})}}),J.extend({getScript:function(e,n){return J.get(e,t,n,"script")},getJSON:function(e,t,n){return J.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?E(e,J.ajaxSettings):(t=e,e=J.ajaxSettings),E(e,t),e},ajaxSettings:{url:En,isLocal:An.test(Tn[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Hn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:k(Ln),ajaxTransport:k(jn),ajax:function(e,n){function i(e,n,i,o){var c,h,y,b,w,C=n;2!==_&&(_=2,l&&clearTimeout(l),s=t,a=o||"",x.readyState=e>0?4:0,i&&(b=S(d,x,i)),e>=200&&300>e||304===e?(d.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(J.lastModified[r]=w),w=x.getResponseHeader("Etag"),w&&(J.etag[r]=w)),304===e?(C="notmodified",c=!0):(c=D(d,b),C=c.state,h=c.data,y=c.error,c=!y)):(y=C,(!C||e)&&(C="error",0>e&&(e=0))),x.status=e,x.statusText=(n||C)+"",c?m.resolveWith(p,[h,C,x]):m.rejectWith(p,[x,C,y]),x.statusCode(v),v=t,u&&f.trigger("ajax"+(c?"Success":"Error"),[x,d,c?h:y]),g.fireWith(p,[x,C]),u&&(f.trigger("ajaxComplete",[x,d]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,a,o,s,l,c,u,h,d=J.ajaxSetup({},n),p=d.context||d,f=p!==d&&(p.nodeType||p instanceof J)?J(p):J.event,m=J.Deferred(),g=J.Callbacks("once memory"),v=d.statusCode||{},y={},b={},_=0,w="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!_){var n=e.toLowerCase();e=b[n]=b[n]||e,y[e]=t}return this},getAllResponseHeaders:function(){return 2===_?a:null},getResponseHeader:function(e){var n;if(2===_){if(!o)for(o={};n=Dn.exec(a);)o[n[1].toLowerCase()]=n[2];n=o[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return _||(d.mimeType=e),this},abort:function(e){return e=e||w,s&&s.abort(e),i(0,e),this}};if(m.promise(x),x.success=x.done,x.error=x.fail,x.complete=g.add,x.statusCode=function(e){if(e){var t;if(2>_)for(t in e)v[t]=[v[t],e[t]];else t=e[x.status],x.always(t)}return this},d.url=((e||d.url)+"").replace(Sn,"").replace(Mn,Tn[1]+"//"),d.dataTypes=J.trim(d.dataType||"*").toLowerCase().split(tt),null==d.crossDomain&&(c=Fn.exec(d.url.toLowerCase()),d.crossDomain=!(!c||c[1]===Tn[1]&&c[2]===Tn[2]&&(c[3]||("http:"===c[1]?80:443))==(Tn[3]||("http:"===Tn[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=J.param(d.data,d.traditional)),T(Ln,d,n,x),2===_)return x;if(u=d.global,d.type=d.type.toUpperCase(),d.hasContent=!Nn.test(d.type),u&&0===J.active++&&J.event.trigger("ajaxStart"),!d.hasContent&&(d.data&&(d.url+=(Rn.test(d.url)?"&":"?")+d.data,delete d.data),r=d.url,d.cache===!1)){var C=J.now(),k=d.url.replace(On,"$1_="+C);d.url=k+(k===d.url?(Rn.test(d.url)?"&":"?")+"_="+C:"")}(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(r=r||d.url,J.lastModified[r]&&x.setRequestHeader("If-Modified-Since",J.lastModified[r]),J.etag[r]&&x.setRequestHeader("If-None-Match",J.etag[r])),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Hn+"; q=0.01":""):d.accepts["*"]);for(h in d.headers)x.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(d.beforeSend.call(p,x,d)===!1||2===_))return x.abort();w="abort";for(h in{success:1,error:1,complete:1})x[h](d[h]);if(s=T(jn,d,n,x)){x.readyState=1,u&&f.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},d.timeout));try{_=1,s.send(y,i)}catch(E){if(!(2>_))throw E;i(-1,E)}}else i(-1,"No Transport");return x},active:0,lastModified:{},etag:{}});var Wn=[],zn=/\?/,$n=/(=)\?(?=&|$)|\?\?/,Un=J.now();J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wn.pop()||J.expando+"_"+Un++;return this[e]=!0,e}}),J.ajaxPrefilter("json jsonp",function(n,i,r){var a,o,s,l=n.data,c=n.url,u=n.jsonp!==!1,h=u&&$n.test(c),d=u&&!h&&"string"==typeof l&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&$n.test(l);return"jsonp"===n.dataTypes[0]||h||d?(a=n.jsonpCallback=J.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[a],h?n.url=c.replace($n,"$1"+a):d?n.data=l.replace($n,"$1"+a):u&&(n.url+=(zn.test(c)?"&":"?")+n.jsonp+"="+a),n.converters["script json"]=function(){return s||J.error(a+" was not called"),s[0]},n.dataTypes[0]="json",e[a]=function(){s=arguments},r.always(function(){e[a]=o,n[a]&&(n.jsonpCallback=i.jsonpCallback,Wn.push(a)),s&&J.isFunction(o)&&o(s[0]),s=o=t}),"script"):void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return J.globalEval(e),e}}}),J.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),J.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=W.head||W.getElementsByTagName("head")[0]||W.documentElement;return{send:function(r,a){n=W.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,r){(r||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n=t,r||a(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var qn,Yn=e.ActiveXObject?function(){for(var e in qn)qn[e](0,1)}:!1,Vn=0;J.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&A()||N()}:A,function(e){J.extend(J.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(J.ajaxSettings.xhr()),J.support.ajax&&J.ajaxTransport(function(n){if(!n.crossDomain||J.support.cors){var i;return{send:function(r,a){var o,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(s in r)l.setRequestHeader(s,r[s])}catch(c){}l.send(n.hasContent&&n.data||null),i=function(e,r){var s,c,u,h,d;try{if(i&&(r||4===l.readyState))if(i=t,o&&(l.onreadystatechange=J.noop,Yn&&delete qn[o]),r)4!==l.readyState&&l.abort();else{s=l.status,u=l.getAllResponseHeaders(),h={},d=l.responseXML,d&&d.documentElement&&(h.xml=d);try{h.text=l.responseText}catch(p){}try{c=l.statusText}catch(p){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=h.text?200:404}}catch(f){r||a(-1,f)}h&&a(s,c,h,u)},n.async?4===l.readyState?setTimeout(i,0):(o=++Vn,Yn&&(qn||(qn={},J(e).unload(Yn)),qn[o]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(0,1)}}}});var Xn,Kn,Gn=/^(?:toggle|show|hide)$/,Qn=new RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Jn=/queueHooks$/,Zn=[F],ei={"*":[function(e,t){var n,i,r=this.createTween(e,t),a=Qn.exec(t),o=r.cur(),s=+o||0,l=1,c=20;if(a){if(n=+a[2],i=a[3]||(J.cssNumber[e]?"":"px"),"px"!==i&&s){s=J.css(r.elem,e,!0)||n||1;do l=l||".5",s/=l,J.style(r.elem,e,s+i);while(l!==(l=r.cur()/o)&&1!==l&&--c)}r.unit=i,r.start=s,r.end=a[1]?s+(a[1]+1)*n:n}return r}]};J.Animation=J.extend(P,{tweener:function(e,t){J.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],ei[n]=ei[n]||[],ei[n].unshift(t)},prefilter:function(e,t){t?Zn.unshift(e):Zn.push(e)}}),J.Tween=I,I.prototype={constructor:I,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(J.cssNumber[n]?"":"px")},cur:function(){var e=I.propHooks[this.prop];return e&&e.get?e.get(this):I.propHooks._default.get(this)},run:function(e){var t,n=I.propHooks[this.prop];return this.pos=t=this.options.duration?J.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):I.propHooks._default.set(this),this}},I.prototype.init.prototype=I.prototype,I.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=J.css(e.elem,e.prop,!1,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){J.fx.step[e.prop]?J.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[J.cssProps[e.prop]]||J.cssHooks[e.prop])?J.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},I.propHooks.scrollTop=I.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},J.each(["toggle","show","hide"],function(e,t){var n=J.fn[t];J.fn[t]=function(i,r,a){return null==i||"boolean"==typeof i||!e&&J.isFunction(i)&&J.isFunction(r)?n.apply(this,arguments):this.animate(L(t,!0),i,r,a)}}),J.fn.extend({fadeTo:function(e,t,n,i){return this.filter(v).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=J.isEmptyObject(e),a=J.speed(t,n,i),o=function(){var t=P(this,J.extend({},e),a);r&&t.stop(!0)};return r||a.queue===!1?this.each(o):this.queue(a.queue,o)},stop:function(e,n,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",a=J.timers,o=J._data(this);if(n)o[n]&&o[n].stop&&r(o[n]);else for(n in o)o[n]&&o[n].stop&&Jn.test(n)&&r(o[n]);for(n=a.length;n--;)a[n].elem!==this||null!=e&&a[n].queue!==e||(a[n].anim.stop(i),t=!1,a.splice(n,1));(t||!i)&&J.dequeue(this,e)})}}),J.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){J.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),J.speed=function(e,t,n){var i=e&&"object"==typeof e?J.extend({},e):{complete:n||!n&&t||J.isFunction(e)&&e,duration:e,easing:n&&t||t&&!J.isFunction(t)&&t};return i.duration=J.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in J.fx.speeds?J.fx.speeds[i.duration]:J.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){J.isFunction(i.old)&&i.old.call(this),i.queue&&J.dequeue(this,i.queue)},i},J.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},J.timers=[],J.fx=I.prototype.init,J.fx.tick=function(){var e,n=J.timers,i=0;for(Xn=J.now();i<n.length;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);n.length||J.fx.stop(),Xn=t},J.fx.timer=function(e){e()&&J.timers.push(e)&&!Kn&&(Kn=setInterval(J.fx.tick,J.fx.interval))},J.fx.interval=13,J.fx.stop=function(){clearInterval(Kn),Kn=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fx.step={},J.expr&&J.expr.filters&&(J.expr.filters.animated=function(e){return J.grep(J.timers,function(t){return e===t.elem}).length});var ti=/^(?:body|html)$/i;J.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){J.offset.setOffset(this,e,t)});var n,i,r,a,o,s,l,c={top:0,left:0},u=this[0],h=u&&u.ownerDocument;if(h)return(i=h.body)===u?J.offset.bodyOffset(u):(n=h.documentElement,J.contains(n,u)?("undefined"!=typeof u.getBoundingClientRect&&(c=u.getBoundingClientRect()),r=j(h),a=n.clientTop||i.clientTop||0,o=n.clientLeft||i.clientLeft||0,s=r.pageYOffset||n.scrollTop,l=r.pageXOffset||n.scrollLeft,{top:c.top+s-a,left:c.left+l-o}):c)},J.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return J.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(J.css(e,"marginTop"))||0,n+=parseFloat(J.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var i=J.css(e,"position");"static"===i&&(e.style.position="relative");var r,a,o=J(e),s=o.offset(),l=J.css(e,"top"),c=J.css(e,"left"),u=("absolute"===i||"fixed"===i)&&J.inArray("auto",[l,c])>-1,h={},d={};u?(d=o.position(),r=d.top,a=d.left):(r=parseFloat(l)||0,a=parseFloat(c)||0),J.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(h.top=t.top-s.top+r),null!=t.left&&(h.left=t.left-s.left+a),"using"in t?t.using.call(e,h):o.css(h)}},J.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),n=this.offset(),i=ti.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(J.css(e,"marginTop"))||0,n.left-=parseFloat(J.css(e,"marginLeft"))||0,i.top+=parseFloat(J.css(t[0],"borderTopWidth"))||0,i.left+=parseFloat(J.css(t[0],"borderLeftWidth"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||W.body;e&&!ti.test(e.nodeName)&&"static"===J.css(e,"position");)e=e.offsetParent;return e||W.body})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);J.fn[e]=function(r){return J.access(this,function(e,r,a){var o=j(e);return a===t?o?n in o?o[n]:o.document.documentElement[r]:e[r]:(o?o.scrollTo(i?J(o).scrollLeft():a,i?a:J(o).scrollTop()):e[r]=a,void 0)},e,r,arguments.length,null)}}),J.each({Height:"height",Width:"width"},function(e,n){J.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,r){J.fn[r]=function(r,a){var o=arguments.length&&(i||"boolean"!=typeof r),s=i||(r===!0||a===!0?"margin":"border");return J.access(this,function(n,i,r){var a;return J.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(a=n.documentElement,Math.max(n.body["scroll"+e],a["scroll"+e],n.body["offset"+e],a["offset"+e],a["client"+e])):r===t?J.css(n,i,r,s):J.style(n,i,r,s)},n,o?r:t,o,null)}})}),e.jQuery=e.$=J,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return J})}(window),function(e){e.extend({isEmpty:function(e){return!e||String(e).match(/^\s*$/)?!0:!1}})}(jQuery),jQuery.ajaxSetup({cache:!1}),function(e){e(function(){e("body").ajaxStop(function(){e(".spinner").removeClass("spinner"),e(".loading").hide()}),e(document).ajaxComplete(function(e,t){401==t.status&&this.location.reload()})})}(jQuery),/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
function(e,t){function n(t,n){var r,a,o,s=t.nodeName.toLowerCase();return"area"===s?(r=t.parentNode,a=r.name,t.href&&a&&"map"===r.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&i(o)):!1):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var r=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,r,a=e(this[0]);a.length&&a[0]!==document;){if(i=a.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(a.css("zIndex"),10),!isNaN(r)&&0!==r))return r;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function r(t,n,i,r){return e.each(a,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var a="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?s["inner"+i].call(this):this.each(function(){e(this).css(o,r(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?s["outer"+i].call(this,t):this.each(function(){e(this).css(o,r(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var r,a=e.ui[t].prototype;for(r in i)a.plugins[r]=a.plugins[r]||[],a.plugins[r].push([n,i[r]])},call:function(e,t,n){var i,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)}})}(jQuery),function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(a){}r(t)},e.widget=function(t,n,i){var r,a,o,s,l={},c=t.split(".")[0];t=t.split(".")[1],r=c+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[c]=e[c]||{},a=e[c][t],o=e[c][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,a=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=a,t}}(),void 0):(l[t]=i,void 0)}),o.prototype=e.widget.extend(s,{widgetEventPrefix:a?s.widgetEventPrefix:t},l,{constructor:o,namespace:c,widgetName:t,widgetFullName:r}),a?(e.each(a._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete a._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){for(var r,a,o=i.call(arguments,1),s=0,l=o.length;l>s;s++)for(r in o[s])a=o[s][r],o[s].hasOwnProperty(r)&&a!==t&&(n[r]=e.isPlainObject(a)?e.isPlainObject(n[r])?e.widget.extend({},n[r],a):e.widget.extend({},a):a);return n},e.widget.bridge=function(n,r){var a=r.prototype.widgetFullName||n;e.fn[n]=function(o){var s="string"==typeof o,l=i.call(arguments,1),c=this;return o=!s&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,s?this.each(function(){var i,r=e.data(this,a);return r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(i=r[o].apply(r,l),i!==r&&i!==t?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+o+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(o||{})._init():e.data(this,a,new r(o,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,a,o,s=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(s={},r=n.split("."),n=r.shift(),r.length){for(a=s[n]=e.widget.extend({},this.options[n]),o=0;o<r.length-1;o++)a[r[o]]=a[r[o]]||{},a=a[r[o]];if(n=r.pop(),i===t)return a[n]===t?null:a[n];a[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];s[n]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var r,a=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,o){function s(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?r.delegate(u,c,s):n.bind(c,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,a,o=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(r in a)r in n||(n[r]=a[r]);return this.element.trigger(n,i),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,a){"string"==typeof r&&(r={effect:r});var o,s=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),o=!e.isEmptyObject(r),r.complete=a,r.delay&&i.delay(r.delay),o&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,a):i.queue(function(n){e(this)[t](),a&&a.call(i[0]),n()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,a="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return r&&!a&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;return r.containment?"window"===r.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===r.containment?(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):r.containment.constructor===Array?(this.containment=r.containment,void 0):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=e(r.containment),i=n[0],i&&(t="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n),void 0):(this.containment=null,void 0)},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(t){var n,i,r,a,o=this.options,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),o.grid&&(r=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-o.grid[1]:r+o.grid[1]:r,a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=n?a-this.offset.click.left>=n[0]||a-this.offset.click.left>n[2]?a:a-this.offset.click.left>=n[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var i=e(this).data("ui-draggable"),r=i.options,a=e.extend({},n,{item:i.element});i.sortables=[],e(r.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,a))})},stop:function(t,n){var i=e(this).data("ui-draggable"),r=e.extend({},n,{item:i.element});e.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))})},drag:function(t,n){var i=e(this).data("ui-draggable"),r=this;e.each(i.sortables,function(){var a=!1,o=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var i=e(n.helper),r=e(this).data("ui-draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(t,n){var i=e(this).data("ui-draggable").options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),i=n.options,r=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(document).scrollTop()<i.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(document).scrollLeft()<i.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),i=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(t,n){var i,r,a,o,s,l,c,u,h,d,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=n.offset.left,v=g+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(h=p.snapElements.length-1;h>=0;h--)s=p.snapElements[h].left,l=s+p.snapElements[h].width,c=p.snapElements[h].top,u=c+p.snapElements[h].height,s-m>v||g>l+m||c-m>b||y>u+m||!e.contains(p.snapElements[h].item.ownerDocument,p.snapElements[h].item)?(p.snapElements[h].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(i=Math.abs(c-b)<=m,r=Math.abs(u-y)<=m,a=Math.abs(s-v)<=m,o=Math.abs(l-g)<=m,i&&(n.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),r&&(n.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),a&&(n.position.left=p._convertPositionTo("relative",{top:0,left:s-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),d=i||r||a||o,"outer"!==f.snapMode&&(i=Math.abs(c-y)<=m,r=Math.abs(u-b)<=m,a=Math.abs(s-g)<=m,o=Math.abs(l-v)<=m,i&&(n.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),r&&(n.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),a&&(n.position.left=p._convertPositionTo("relative",{top:0,left:s}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[h].snapping&&(i||r||a||o||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=i||r||a||o||d)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,i=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});i.length&&(t=parseInt(e(i[0]).css("zIndex"),10)||0,e(i).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+i.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var i=e(n.helper),r=e(this).data("ui-draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(t,n){var i=e(this).data("ui-draggable").options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(e){function t(e,t,n){return e>t&&t+n>e}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,n=e.ui.ddmanager.droppables[this.options.scope];t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){"accept"===t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))
},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var i=n||e.ui.ddmanager.current,r=!1;return i&&(i.currentItem||i.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&e.ui.intersect(i,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,n,i){if(!n.offset)return!1;var r,a,o=(e.positionAbs||e.position.absolute).left,s=o+e.helperProportions.width,l=(e.positionAbs||e.position.absolute).top,c=l+e.helperProportions.height,u=n.offset.left,h=u+n.proportions.width,d=n.offset.top,p=d+n.proportions.height;switch(i){case"fit":return o>=u&&h>=s&&l>=d&&p>=c;case"intersect":return u<o+e.helperProportions.width/2&&s-e.helperProportions.width/2<h&&d<l+e.helperProportions.height/2&&c-e.helperProportions.height/2<p;case"pointer":return r=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,a=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(a,d,n.proportions.height)&&t(r,u,n.proportions.width);case"touch":return(l>=d&&p>=l||c>=d&&p>=c||d>l&&c>p)&&(o>=u&&h>=o||s>=u&&h>=s||u>o&&s>h);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var i,r,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<a.length;i++)if(!(a[i].options.disabled||t&&!a[i].accept.call(a[i].element[0],t.currentItem||t.element))){for(r=0;r<s.length;r++)if(s[r]===a[i].element[0]){a[i].proportions.height=0;continue e}a[i].visible="none"!==a[i].element.css("display"),a[i].visible&&("mousedown"===o&&a[i]._activate.call(a[i],n),a[i].offset=a[i].element.offset(),a[i].proportions={width:a[i].element[0].offsetWidth,height:a[i].element[0].offsetHeight})}},drop:function(t,n){var i=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,r,a,o=e.ui.intersect(t,this,this.options.tolerance),s=!o&&this.isover?"isout":o&&!this.isover?"isover":null;s&&(this.options.greedy&&(r=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===r}),a.length&&(i=e.data(a[0],"ui-droppable"),i.greedyChild="isover"===s)),i&&"isover"===s&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,n),i&&"isout"===s&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function n(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,i,r,a,o=this,s=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!s.aspectRatio,aspectRatio:s.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:s.helper||s.ghost||s.animate?s.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;n<t.length;n++)i=e.trim(t[n]),a="ui-resizable-"+i,r=e("<div class='ui-resizable-handle "+a+"'></div>"),r.css({zIndex:s.zIndex}),"se"===i&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(r);this._renderAxis=function(t){var n,i,r,a;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=e(this.handles[n],this.element),a=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(r,a),this._proportionallyResize()),e(this.handles[n]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=r&&r[1]?r[1]:"se")}),s.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){s.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){s.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,i,r=!1;for(n in this.handles)i=e(this.handles[n])[0],(i===t.target||e.contains(i,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(n){var i,r,a,o=this.options,s=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),i=t(this.helper.css("left")),r=t(this.helper.css("top")),o.containment&&(i+=e(o.containment).scrollLeft()||0,r+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:r},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),l.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(t){var n,i=this.helper,r={},a=this.originalMousePosition,o=this.axis,s=this.position.top,l=this.position.left,c=this.size.width,u=this.size.height,h=t.pageX-a.left||0,d=t.pageY-a.top||0,p=this._change[o];return p?(n=p.apply(this,[t,h,d]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==s&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==c&&(r.width=this.size.width+"px"),this.size.height!==u&&(r.height=this.size.height+"px"),i.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,i,r,a,o,s,l,c=this.options,u=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),r=i&&e.ui.hasScroll(n[0],"left")?0:u.sizeDiff.height,a=i?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-r},s=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(o,{top:l,left:s})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,r,a,o,s=this.options;o={minWidth:n(s.minWidth)?s.minWidth:0,maxWidth:n(s.maxWidth)?s.maxWidth:1/0,minHeight:n(s.minHeight)?s.minHeight:0,maxHeight:n(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),r>o.minHeight&&(o.minHeight=r),i<o.maxWidth&&(o.maxWidth=i),a<o.maxHeight&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,r=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,r=n(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=n(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=n(e.width)&&t.minWidth&&t.minWidth>e.width,s=n(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(i),h=/nw|ne|n/.test(i);return o&&(e.width=t.minWidth),s&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),o&&u&&(e.left=l-t.minWidth),r&&u&&(e.left=l-t.maxWidth),s&&h&&(e.top=c-t.minHeight),a&&h&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,n,i,r,a=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(r=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],n=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],i=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(i[t],10)||0);r.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize,r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),i=n.options,r=n._proportionallyResizeElements,a=r.length&&/textarea/i.test(r[0].nodeName),o=a&&e.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,s=a?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-o},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var n,i,r,a,o,s,l,c=e(this).data("ui-resizable"),u=c.options,h=c.element,d=u.containment,p=d instanceof e?d.get(0):/parent/.test(d)?h.parent().get(0):d;p&&(c.containerElement=e(p),/document/.test(d)||d===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(n=e(p),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){i[e]=t(n.css("padding"+r))}),c.containerOffset=n.offset(),c.containerPosition=n.position(),c.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},r=c.containerOffset,a=c.containerSize.height,o=c.containerSize.width,s=e.ui.hasScroll(p,"left")?p.scrollWidth:o,l=e.ui.hasScroll(p)?p.scrollHeight:a,c.parentData={element:p,left:r.left,top:r.top,width:s,height:l}))},resize:function(t){var n,i,r,a,o=e(this).data("ui-resizable"),s=o.options,l=o.containerOffset,c=o.position,u=o._aspectRatio||t.shiftKey,h={top:0,left:0},d=o.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(h=l),c.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-h.left),u&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=s.helper?l.left:0),c.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-h.left:o.offset.left-h.left)+o.sizeDiff.width),i=Math.abs((o._helper?o.offset.top-h.top:o.offset.top-l.top)+o.sizeDiff.height),r=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),r&&a&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,u&&(o.size.height=o.size.width/o.aspectRatio)),i+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-i,u&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.containerOffset,r=t.containerPosition,a=t.containerElement,o=e(t.helper),s=o.offset(),l=o.outerWidth()-t.sizeDiff.width,c=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(a.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(a.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,i=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):e.each(n.alsoResize,function(e){i(e)})},resize:function(t,n){var i=e(this).data("ui-resizable"),r=i.options,a=i.originalSize,o=i.originalPosition,s={height:i.size.height-a.height||0,width:i.size.width-a.width||0,top:i.position.top-o.top||0,left:i.position.left-o.left||0},l=function(t,i){e(t).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),a={},o=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(r[t]||0)+(s[t]||0);n&&n>=0&&(a[t]=n||null)}),t.css(a)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):e.each(r.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size,r=t.originalSize,a=t.originalPosition,o=t.axis,s="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=s[0]||1,c=s[1]||1,u=Math.round((i.width-r.width)/l)*l,h=Math.round((i.height-r.height)/c)*c,d=r.width+u,p=r.height+h,f=n.maxWidth&&n.maxWidth<d,m=n.maxHeight&&n.maxHeight<p,g=n.minWidth&&n.minWidth>d,v=n.minHeight&&n.minHeight>p;n.grid=s,g&&(d+=l),v&&(p+=c),f&&(d-=l),m&&(p-=c),/^(se|s|e)$/.test(o)?(t.size.width=d,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=d,t.size.height=p,t.position.top=a.top-h):/^(sw)$/.test(o)?(t.size.width=d,t.size.height=p,t.position.left=a.left-u):(t.size.width=d,t.size.height=p,t.position.top=a.top-h,t.position.left=a.left-u)}})}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,i=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=e.data(this,"selectable-item");i.startselected=!0,t.metaKey||t.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))}),e(t.target).parents().addBack().each(function(){var i,r=e.data(this,"selectable-item");return r?(i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,i=this,r=this.options,a=this.opos[0],o=this.opos[1],s=t.pageX,l=t.pageY;return a>s&&(n=s,s=a,a=n),o>l&&(n=l,l=o,o=n),this.helper.css({left:a,top:o,width:s-a,height:l-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),c=!1;n&&n.element!==i.element[0]&&("touch"===r.tolerance?c=!(n.left>s||n.right<a||n.top>l||n.bottom<o):"fit"===r.tolerance&&(c=n.left>a&&n.right<s&&n.top>o&&n.bottom<l),c?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,i._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),i._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",t,{unselected:i.element})}),e(".ui-selecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",t,{selected:i.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){function t(e,t,n){return e>t&&t+n>e}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=null,r=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(i=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(i=e(t.target)),i?!this.options.handle||n||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(r=!0)}),r)?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,n,i){var r,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,r,a,o=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),s!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],r=i.item[0],a=this._intersectsWithPointer(i),a&&i.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],r):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)
}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,a=e.left,o=a+e.width,s=e.top,l=s+e.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||i+c>s&&l>i+c,d="y"===this.options.axis||t+u>a&&o>t+u,p=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:a<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&s<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var n="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=n&&i,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return r?this.floating?o&&"right"===o||"down"===a?2:1:a&&("down"===a?2:1):!1},_intersectsWithSides:function(e){var n=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&i||"left"===a&&!i:r&&("down"===r&&n||"up"===r&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,i,r,a,o=[],s=[],l=this._connectWith();if(l&&t)for(n=l.length-1;n>=0;n--)for(r=e(l[n]),i=r.length-1;i>=0;i--)a=e.data(r[i],this.widgetFullName),a&&a!==this&&!a.options.disabled&&s.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,r,a,o,s,l,c,u=this.items,h=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(r=e(d[n]),i=r.length-1;i>=0;i--)a=e.data(r[i],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(h.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(n=h.length-1;n>=0;n--)for(o=h[n][1],s=h[n][0],i=0,c=s.length;c>i;i++)l=e(s[i]),l.data(this.widgetName+"-item",o),u.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,a;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),a=r.offset(),i.left=a.left,i.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)a=this.containers[n].element.offset(),this.containers[n].containerCache.left=a.left,this.containers[n].containerCache.top=a.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)}):"img"===i&&r.attr("src",t.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(e,r){(!n||i.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(i){var r,a,o,s,l,c,u,h,d,p,f=null,m=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(f&&e.contains(this.containers[r].element[0],f.element[0]))continue;f=this.containers[r],m=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",i,this._uiHash(this)),this.containers[r].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(o=1e4,s=null,p=f.floating||n(this.currentItem),l=p?"left":"top",c=p?"width":"height",u=this.positionAbs[l]+this.offset.click[l],a=this.items.length-1;a>=0;a--)e.contains(this.containers[m].element[0],this.items[a].item[0])&&this.items[a].item[0]!==this.currentItem[0]&&(!p||t(this.positionAbs.top+this.offset.click.top,this.items[a].top,this.items[a].height))&&(h=this.items[a].item.offset()[l],d=!1,Math.abs(h-u)>Math.abs(h+this.items[a][c]-u)&&(d=!0,h+=this.items[a][c]),Math.abs(h-u)<o&&(o=Math.abs(h-u),s=this.items[a],this.direction=d?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;s?this._rearrange(i,s,null,!0):this._rearrange(i,null,this.containers[m].element,!0),this._trigger("change",i,this._uiHash()),this.containers[m]._trigger("change",i,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],n=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,a=t.pageX,o=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((a-this.originalPageX)/r.grid[0])*r.grid[0],a=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var n="ui-effects-";e.effects={effect:{}},/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(e,t){function n(e,t,n){var i=h[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function i(t){var n=c(),i=n._rgba=[];return t=t.toLowerCase(),f(l,function(e,r){var a,o=r.re.exec(t),s=o&&r.parse(o),l=r.space||"rgba";return s?(a=n[l](s),n[u[l].cache]=a[u[l].cache],i=n._rgba=a._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&e.extend(i,a.transparent),n):a[t]}function r(e,t,n){return n=(n+1)%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,n,i,r){return new e.Color.fn.parse(t,n,i,r)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=c.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(r,o,s,l){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(o),o=t);var h=this,d=e.type(r),p=this._rgba=[];return o!==t&&(r=[r,o,s,l],d="array"),"string"===d?this.parse(i(r)||a._default):"array"===d?(f(u.rgba.props,function(e,t){p[t.idx]=n(r[t.idx],t)}),this):"object"===d?(r instanceof c?f(u,function(e,t){r[t.cache]&&(h[t.cache]=r[t.cache].slice())}):f(u,function(t,i){var a=i.cache;f(i.props,function(e,t){if(!h[a]&&i.to){if("alpha"===e||null==r[e])return;h[a]=i.to(h._rgba)}h[a][t.idx]=n(r[e],t,!0)}),h[a]&&e.inArray(null,h[a].slice(0,3))<0&&(h[a][3]=1,i.from&&(h._rgba=i.from(h[a])))}),this):void 0},is:function(e){var t=c(e),n=!0,i=this;return f(u,function(e,r){var a,o=t[r.cache];return o&&(a=i[r.cache]||r.to&&r.to(i._rgba)||[],f(r.props,function(e,t){return null!=o[t.idx]?n=o[t.idx]===a[t.idx]:void 0})),n}),n},_space:function(){var e=[],t=this;return f(u,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var i=c(e),r=i._space(),a=u[r],o=0===this.alpha()?c("transparent"):this,s=o[a.cache]||a.to(o._rgba),l=s.slice();return i=i[a.cache],f(a.props,function(e,r){var a=r.idx,o=s[a],c=i[a],u=h[r.type]||{};null!==c&&(null===o?l[a]=c:(u.mod&&(c-o>u.mod/2?o+=u.mod:o-c>u.mod/2&&(o-=u.mod)),l[a]=n((c-o)*t+o,r)))}),this[r](l)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=c(t)._rgba;return c(e.map(n,function(e,t){return(1-i)*r[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,r=e[1]/255,a=e[2]/255,o=e[3],s=Math.max(i,r,a),l=Math.min(i,r,a),c=s-l,u=s+l,h=.5*u;return t=l===s?0:i===s?60*(r-a)/c+360:r===s?60*(a-i)/c+120:60*(i-r)/c+240,n=0===c?0:.5>=h?c/u:c/(2-u),[Math.round(t)%360,n,h,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],a=e[3],o=.5>=i?i*(1+n):i+n-i*n,s=2*i-o;return[Math.round(255*r(s,o,t+1/3)),Math.round(255*r(s,o,t)),Math.round(255*r(s,o,t-1/3)),a]},f(u,function(i,r){var a=r.props,o=r.cache,l=r.to,u=r.from;c.fn[i]=function(i){if(l&&!this[o]&&(this[o]=l(this._rgba)),i===t)return this[o].slice();var r,s=e.type(i),h="array"===s||"object"===s?i:arguments,d=this[o].slice();return f(a,function(e,t){var i=h["object"===s?e:t.idx];null==i&&(i=d[t.idx]),d[t.idx]=n(i,t)}),u?(r=c(u(d)),r[o]=d,r):c(d)},f(a,function(t,n){c.fn[t]||(c.fn[t]=function(r){var a,o=e.type(r),l="alpha"===t?this._hsla?"hsla":"rgba":i,c=this[l](),u=c[n.idx];return"undefined"===o?u:("function"===o&&(r=r.call(this,u),o=e.type(r)),null==r&&n.empty?this:("string"===o&&(a=s.exec(r),a&&(r=u+parseFloat(a[2])*("+"===a[1]?1:-1))),c[n.idx]=r,this[l](c)))})})}),c.hook=function(t){var n=t.split(" ");f(n,function(t,n){e.cssHooks[n]={set:function(t,r){var a,o,s="";if("transparent"!==r&&("string"!==e.type(r)||(a=i(r)))){if(r=c(a||r),!d.rgba&&1!==r._rgba[3]){for(o="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&o&&o.style;)try{s=e.css(o,"backgroundColor"),o=o.parentNode}catch(l){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(l){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=c(t.elem,n),t.end=c(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(t){var n,i,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(r&&r.length&&r[0]&&r[r[0]])for(i=r.length;i--;)n=r[i],"string"==typeof r[n]&&(a[e.camelCase(n)]=r[n]);else for(n in r)"string"==typeof r[n]&&(a[n]=r[n]);return a}function i(t,n){var i,r,o={};for(i in n)r=n[i],t[i]!==r&&(a[i]||(e.fx.step[i]||!isNaN(parseFloat(r)))&&(o[i]=r));return o}var r=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,a,o,s){var l=e.speed(a,o,s);return this.queue(function(){var a,o=e(this),s=o.attr("class")||"",c=l.children?o.find("*").addBack():o;c=c.map(function(){var t=e(this);return{el:t,start:n(this)}}),a=function(){e.each(r,function(e,n){t[n]&&o[n+"Class"](t[n])})},a(),c=c.map(function(){return this.end=n(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",s),c=c.map(function(){var t=this,n=e.Deferred(),i=e.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,c.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(n,i,r,a){return i?e.effects.animateClass.call(this,{add:n},i,r,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,i,r,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,r,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(n){return function(i,r,a,o,s){return"boolean"==typeof r||r===t?a?e.effects.animateClass.call(this,r?{add:i}:{remove:i},a,o,s):n.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},r,a,o)}}(e.fn.toggleClass),switchClass:function(t,n,i,r,a){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,a)}})}(),function(){function i(t,n,i,r){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=r||n.complete,t}function r(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.3",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,i){var r,a;for(a=0;a<i.length;a++)null!==i[a]&&(r=e.data(n+i[a]),r===t&&(r=""),e.css(i[a],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(i),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var a=t.cssUnit(n);a[0]>0&&(r[n]=a[0]*i+a[1])}),r}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(a)&&a.call(r[0]),e.isFunction(t)&&t()}var r=e(this),a=n.complete,s=n.mode;(r.is(":hidden")?"hide"===s:"show"===s)?(r[s](),i()):o.call(r[0],n,i)}var n=i.apply(this,arguments),r=n.mode,a=n.queue,o=e.effects.effect[n.effect];return e.fx.off||!o?r?this[r](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):a===!1?this.each(t):this.queue(a||"fx",t)},show:function(e){return function(t){if(r(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(r(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(r(t)||"boolean"==typeof t)return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(e){var t=0,n={},i={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,i=this.headers.length,r=this.headers.index(t.target),a=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:a=this.headers[(r+1)%i];break;case n.LEFT:case n.UP:a=this.headers[(r-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:a=this.headers[0];break;case n.END:a=this.headers[i-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var n,i=this.options,r=i.heightStyle,a=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),i=n.attr("id"),r=n.next(),a=r.attr("id");i||(i=o+"-header-"+t,n.attr("id",i)),a||(a=o+"-panel-"+t,r.attr("id",a)),n.attr("aria-controls",a),r.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===r?(n=a.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))}),this.headers.each(function(){n-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===r&&(n=0,this.headers.next().each(function(){n=Math.max(n,e(this).css("height","").height())}).height(n))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,i=this.active,r=e(t.currentTarget),a=r[0]===i[0],o=a&&n.collapsible,s=o?e():r.next(),l=i.next(),c={oldHeader:i,oldPanel:l,newHeader:o?e():r,newPanel:s};t.preventDefault(),a&&!n.collapsible||this._trigger("beforeActivate",t,c)===!1||(n.active=o?!1:this.headers.index(r),this.active=a?e():r,this._toggle(c),i.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),a||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,t):(i.hide(),n.show(),this._toggleComplete(t)),i.attr({"aria-expanded":"false","aria-hidden":"true"}),i.prev().attr("aria-selected","false"),n.length&&i.length?i.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,r){var a,o,s,l=this,c=0,u=e.length&&(!t.length||e.index()<t.index()),h=this.options.animate||{},d=u&&h.down||h,p=function(){l._toggleComplete(r)};return"number"==typeof d&&(s=d),"string"==typeof d&&(o=d),o=o||d.easing||h.easing,s=s||d.duration||h.duration,t.length?e.length?(a=e.show().outerHeight(),t.animate(n,{duration:s,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:s,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?c+=n.now:"content"!==l.options.heightStyle&&(n.now=Math.round(a-t.outerHeight()-c),c=0)}}),void 0):t.animate(n,s,o,p):e.animate(i,s,o,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,i,r=this.element[0].nodeName.toLowerCase(),a="textarea"===r,o="input"===r;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return t=!0,i=!0,n=!0,void 0;t=!1,i=!1,n=!1;var a=e.ui.keyCode;switch(r.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",r);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",r);break;case a.UP:t=!0,this._keyEvent("previous",r);break;case a.DOWN:t=!0,this._keyEvent("next",r);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(t=!0,r.preventDefault(),this.menu.select(r));break;case a.TAB:this.menu.active&&this.menu.select(r);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(r),r.preventDefault());break;default:n=!0,this._searchTimeout(r)}},keypress:function(i){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&i.preventDefault(),void 0;if(!n){var r=e.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:this._move("previousPage",i);break;case r.PAGE_DOWN:this._move("nextPage",i);break;case r.UP:this._keyEvent("previous",i);break;case r.DOWN:this._keyEvent("next",i)}}},input:function(e){return i?(i=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(i){i.target===t.element[0]||i.target===n||e.contains(n,i.target)||t.close()})})},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0;var i=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,r){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,n=++t;return function(i){n===t&&e.__response(i),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,n,i,r,a="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},c=function(t){var n=t.name,i=t.form,r=e([]);return n&&(n=n.replace(/'/g,"\\'"),r=i?e(i).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),r};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,s=this.options,u="checkbox"===this.type||"radio"===this.type,h=u?"":"ui-state-active",d="ui-state-focus";null===s.label&&(s.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){s.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){s.disabled||e(this).removeClass(h)}).bind("click"+this.eventNamespace,function(e){s.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){o.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){o.buttonElement.removeClass(d)}),u&&(this.element.bind("change"+this.eventNamespace,function(){r||o.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){s.disabled||(r=!1,n=e.pageX,i=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){s.disabled||(n!==e.pageX||i!==e.pageY)&&(r=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return s.disabled||r?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(s.disabled||r)return!1;e(this).addClass("ui-state-active"),o.buttonElement.attr("aria-pressed","true");var t=o.element[0];c(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return s.disabled?!1:(e(this).addClass("ui-state-active"),t=this,o.document.one("mouseup",function(){t=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return s.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return s.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(a+" "+o+" "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")
},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(s),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,r=i.primary&&i.secondary,a=[];i.primary||i.secondary?(this.options.text&&a.push("ui-button-text-icon"+(r?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(a.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=i(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(a.inline?t.parent()[0]:a.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function r(t,n){e.extend(t,n);for(var i in n)null==n[i]&&(t[i]=n[i]);return t}e.extend(e.ui,{datepicker:{version:"1.10.3"}});var a,o="datepicker";e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var i,r,a;i=t.nodeName.toLowerCase(),r="div"===i||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),r),a.settings=e.extend({},n||{}),"input"===i?this._connectDatepicker(t,a):r&&this._inlineDatepicker(t,a)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var i=e(t);n.append=e([]),n.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,o,n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var i,r,a,o=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[s?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),("focus"===i||"both"===i)&&t.focus(this._showDatepicker),("button"===i||"both"===i)&&(r=this._get(n,"buttonText"),a=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:r,title:r}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:r,title:r}):r)),t[s?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,i,r,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(n=0,i=0,r=0;r<e.length;r++)e[r].length>n&&(n=e[r].length,i=r);return i},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,n){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),e.data(t,o,n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,i,a,s){var l,c,u,h,d,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],o,p)),r(p.settings,a||{}),n=n&&n.constructor===Date?this._formatDate(p,n):n,this._dialogInput.val(n),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(c=document.documentElement.clientWidth,u=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+h,u/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],o,p),this},_destroyDatepicker:function(t){var n,i=e(t),r=e.data(t,o);i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),e.removeData(t,o),"input"===n?(r.append.remove(),r.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&i.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var n,i,r=e(t),a=e.data(t,o);r.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(i=r.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var n,i,r=e(t),a=e.data(t,o);r.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(i=r.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,o)}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,i,a){var o,s,l,c,u=this._getInst(n);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):u?"all"===i?e.extend({},u.settings):this._get(u,i):null:(o=i||{},"string"==typeof i&&(o={},o[i]=a),u&&(this._curInst===u&&this._hideDatepicker(),s=this._getDateDatepicker(n,!0),l=this._getMinMaxDate(u,"min"),c=this._getMinMaxDate(u,"max"),r(u.settings,o),null!==l&&o.dateFormat!==t&&o.minDate===t&&(u.settings.minDate=this._formatDate(u,l)),null!==c&&o.dateFormat!==t&&o.maxDate===t&&(u.settings.maxDate=this._formatDate(u,c)),"disabled"in o&&(o.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),u),this._autoSize(u),this._setDate(u,s),this._updateAlternate(u),this._updateDatepicker(u)),void 0)},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,i,r,a=e.datepicker._getInst(t.target),o=!0,s=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),r[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,r[0]),n=e.datepicker._get(a,"onSelect"),n?(i=e.datepicker._formatDate(a),n.apply(a.input?a.input[0]:null,[i,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,i,r=e.datepicker._getInst(t.target);return e.datepicker._get(r,"constrainInput")?(n=e.datepicker._possibleChars(e.datepicker._get(r,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">i||!n||n.indexOf(i)>-1):void 0},_doKeyUp:function(t){var n,i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i)),n&&(e.datepicker._setDateFromField(i),e.datepicker._updateAlternate(i),e.datepicker._updateDatepicker(i))}catch(r){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var n,i,a,o,s,l,c;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),i=e.datepicker._get(n,"beforeShow"),a=i?i.apply(t,[t,n]):{},a!==!1&&(r(n.settings,a),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),s={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),s=e.datepicker._checkOffset(n,s,o),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),n.inline||(l=e.datepicker._get(n,"showAnim"),c=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?n.dpDiv.show(l,e.datepicker._get(n,"showOptions"),c):n.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(n)&&n.input.focus(),e.datepicker._curInst=n))}},_updateDatepicker:function(t){this.maxRows=4,a=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,i=this._getNumberOfMonths(t),r=i[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",o*r+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,i){var r=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?r-o:0,n.left-=i&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=i&&n.top===t.input.offset().top+s?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+r>l&&l>r?Math.abs(n.left+r-l):0),n.top-=Math.min(n.top,n.top+a>c&&c>a?Math.abs(a+s):0),n},_findPos:function(t){for(var n,i=this._getInst(t),r=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[r?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,i,r,a,s=this._curInst;!s||t&&s!==e.data(t,o)||this._datepickerShowing&&(n=this._get(s,"showAnim"),i=this._get(s,"duration"),r=function(){e.datepicker._tidyDialog(s)},e.effects&&(e.effects.effect[n]||e.effects[n])?s.dpDiv.hide(n,e.datepicker._get(s,"showOptions"),i,r):s.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,r),n||r(),this._datepickerShowing=!1,a=this._get(s,"onClose"),a&&a.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),i=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&0===n.parents("#"+e.datepicker._mainDivId).length&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==i)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,i){var r=e(t),a=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(a,n+("M"===i?this._get(a,"showCurrentAtPos"):0),i),this._updateDatepicker(a))},_gotoToday:function(t){var n,i=e(t),r=this._getInst(i[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(n=new Date,r.selectedDay=n.getDate(),r.drawMonth=r.selectedMonth=n.getMonth(),r.drawYear=r.selectedYear=n.getFullYear()),this._notifyChange(r),this._adjustDate(i)},_selectMonthYear:function(t,n,i){var r=e(t),a=this._getInst(r[0]);a["selected"+("M"===i?"Month":"Year")]=a["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(r)},_selectDay:function(t,n,i,r){var a,o=e(t);e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",r).html(),a.selectedMonth=a.currentMonth=n,a.selectedYear=a.currentYear=i,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var i,r=e(t),a=this._getInst(r[0]);n=null!=n?n:this._formatDate(a),a.input&&a.input.val(n),this._updateAlternate(a),i=this._get(a,"onSelect"),i?i.apply(a.input?a.input[0]:null,[n,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,i,r,a=this._get(t,"altField");a&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),r=this.formatDate(n,i,this._getFormatConfig(t)),e(a).each(function(){e(this).val(r)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,i){if(null==t||null==n)throw"Invalid arguments";if(n="object"==typeof n?n.toString():n+"",""===n)return null;var r,a,o,s,l=0,c=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,d=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,f=(i?i.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var n=r+1<t.length&&t.charAt(r+1)===e;return n&&r++,n},w=function(e){var t=_(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,r=new RegExp("^\\d{1,"+i+"}"),a=n.substring(l).match(r);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},x=function(t,i,r){var a=-1,o=e.map(_(t)?r:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var i=t[1];return n.substr(l,i.length).toLowerCase()===i.toLowerCase()?(a=t[0],l+=i.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+l},C=function(){if(n.charAt(l)!==t.charAt(r))throw"Unexpected literal at position "+l;l++};for(r=0;r<t.length;r++)if(b)"'"!==t.charAt(r)||_("'")?C():b=!1;else switch(t.charAt(r)){case"d":v=w("d");break;case"D":x("D",h,d);break;case"o":y=w("o");break;case"m":g=w("m");break;case"M":g=x("M",p,f);break;case"y":m=w("y");break;case"@":s=new Date(w("@")),m=s.getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"!":s=new Date((w("!")-this._ticksTo1970)/1e4),m=s.getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"'":_("'")?C():b=!0;break;default:C()}if(l<n.length&&(o=n.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a}if(s=this._daylightSavingAdjust(new Date(m,g-1,v)),s.getFullYear()!==m||s.getMonth()+1!==g||s.getDate()!==v)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,n){if(!t)return"";var i,r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,a=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(t){var n=i+1<e.length&&e.charAt(i+1)===t;return n&&i++,n},c=function(e,t,n){var i=""+t;if(l(e))for(;i.length<n;)i="0"+i;return i},u=function(e,t,n,i){return l(e)?i[t]:n[t]},h="",d=!1;if(t)for(i=0;i<e.length;i++)if(d)"'"!==e.charAt(i)||l("'")?h+=e.charAt(i):d=!1;else switch(e.charAt(i)){case"d":h+=c("d",t.getDate(),2);break;case"D":h+=u("D",t.getDay(),r,a);break;case"o":h+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=c("m",t.getMonth()+1,2);break;case"M":h+=u("M",t.getMonth(),o,s);break;case"y":h+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":d=!0;break;default:h+=e.charAt(i)}return h},_possibleChars:function(e){var t,n="",i=!1,r=function(n){var i=t+1<e.length&&e.charAt(t+1)===n;return i&&t++,i};for(t=0;t<e.length;t++)if(i)"'"!==e.charAt(t)||r("'")?n+=e.charAt(t):i=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":r("'")?n+="'":i=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),a=r,o=this._getFormatConfig(e);try{a=this.parseDate(n,i,o)||r}catch(s){i=t?"":i}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=i?a.getDate():0,e.currentMonth=i?a.getMonth():0,e.currentYear=i?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,i){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(i){}for(var r=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=r.getFullYear(),o=r.getMonth(),s=r.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(n);c;){switch(c[2]||"d"){case"d":case"D":s+=parseInt(c[1],10);break;case"w":case"W":s+=7*parseInt(c[1],10);break;case"m":case"M":o+=parseInt(c[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(c[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(a,o))}c=l.exec(n)}return new Date(a,o,s)},o=null==n||""===n?i:"string"==typeof n?a(n):"number"==typeof n?isNaN(n)?i:r(n):new Date(n.getTime());return o=o&&"Invalid Date"===o.toString()?i:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,r=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),r===e.selectedMonth&&a===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(i,-n,"M")},next:function(){e.datepicker._adjustDate(i,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){return e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,i,r,a,o,s,l,c,u,h,d,p,f,m,g,v,y,b,_,w,x,C,k,T,E,S,D,A,N,M,R,P,O,F,I,L,j,H,B=new Date,W=this._daylightSavingAdjust(new Date(B.getFullYear(),B.getMonth(),B.getDate())),z=this._get(e,"isRTL"),$=this._get(e,"showButtonPanel"),U=this._get(e,"hideIfNoPrevNext"),q=this._get(e,"navigationAsDateFormat"),Y=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),X=this._get(e,"stepMonths"),K=1!==Y[0]||1!==Y[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,et=e.drawYear;if(0>Z&&(Z+=12,et--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-Y[0]*Y[1]+1,J.getDate())),t=Q&&Q>t?Q:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=q?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-X,1)),this._getFormatConfig(e)):n,i=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+n+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+n+"</span></a>",r=this._get(e,"nextText"),r=q?this.formatDate(r,this._daylightSavingAdjust(new Date(et,Z+X,1)),this._getFormatConfig(e)):r,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+r+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+r+"</span></a>",o=this._get(e,"currentText"),s=this._get(e,"gotoCurrent")&&e.currentDay?G:W,o=q?this.formatDate(o,s,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=$?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(z?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(z?"":l)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,h=this._get(e,"showWeek"),d=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",x=0;x<Y[0];x++){for(C="",this.maxRows=4,k=0;k<Y[1];k++){if(T=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),E=" ui-corner-all",S="",K){if(S+="<div class='ui-datepicker-group",Y[1]>1)switch(k){case 0:S+=" ui-datepicker-group-first",E=" ui-corner-"+(z?"right":"left");break;case Y[1]-1:S+=" ui-datepicker-group-last",E=" ui-corner-"+(z?"left":"right");break;default:S+=" ui-datepicker-group-middle",E=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+E+"'>"+(/all|left/.test(E)&&0===x?z?a:i:"")+(/all|right/.test(E)&&0===x?z?i:a:"")+this._generateMonthYearHeader(e,Z,et,Q,J,x>0||k>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",D=h?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;7>w;w++)A=(w+u)%7,D+="<th"+((w+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[A]+"'>"+p[A]+"</span></th>";for(S+=D+"</tr></thead><tbody>",N=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,N)),M=(this._getFirstDayOfMonth(et,Z)-u+7)%7,R=Math.ceil((M+N)/7),P=K?this.maxRows>R?this.maxRows:R:R,this.maxRows=P,O=this._daylightSavingAdjust(new Date(et,Z,1-M)),F=0;P>F;F++){for(S+="<tr>",I=h?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(O)+"</td>":"",w=0;7>w;w++)L=g?g.apply(e.input?e.input[0]:null,[O]):[!0,""],j=O.getMonth()!==Z,H=j&&!y||!L[0]||Q&&Q>O||J&&O>J,I+="<td class='"+((w+u+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(O.getTime()===T.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===O.getTime()&&b.getTime()===T.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+L[1]+(O.getTime()===G.getTime()?" "+this._currentClass:"")+(O.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":H?"<span class='ui-state-default'>"+O.getDate()+"</span>":"<a class='ui-state-default"+(O.getTime()===W.getTime()?" ui-state-highlight":"")+(O.getTime()===G.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);
S+=I+"</tr>"}Z++,Z>11&&(Z=0,et++),S+="</tbody></table>"+(K?"</div>"+(Y[0]>0&&k===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),C+=S}_+=C}return _+=c,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,n,i,r,a,o,s){var l,c,u,h,d,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=i&&i.getFullYear()===n,c=r&&r.getFullYear()===n,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!l||u>=i.getMonth())&&(!c||u<=r.getMonth())&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+s[u]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(h=this._get(e,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?d+parseInt(e,10):parseInt(e,10);return isNaN(t)?d:t},f=p(h[0]),m=Math.max(f,p(h[1]||"")),f=i?Math.max(f,i.getFullYear()):f,m=r?Math.min(m,r.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,n){var i=e.drawYear+("Y"===n?t:0),r=e.drawMonth+("M"===n?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(i,r))+("D"===n?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,r,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),r=n&&n>t?n:t;return i&&r>i?i:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var r=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(n,i+(0>t?t:r[0]*r[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var n,i,r=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,s=null,l=this._get(e,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),o=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=i),n[1].match(/[+\-].*/)&&(s+=i)),(!r||t.getTime()>=r.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.3"}(jQuery),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),r=n.filter(":last");t.target!==r[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(r.focus(1),t.preventDefault()):(i.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(n,function(n,i){var r,a;i=e.isFunction(i)?{click:i,text:n}:i,i=e.extend({type:"button"},i),r=i.click,i.click=function(){r.apply(t.element[0],arguments)},a={icons:i.icons,text:i.showText},delete i.icons,delete i.showText,e("<button></button>",i).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){e(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",i,t(r))},drag:function(e,i){n._trigger("drag",e,t(i))},stop:function(r,a){i.position=[a.position.left-n.document.scrollLeft(),a.position.top-n.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",r,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,i=this.options,r=i.resizable,a=this.uiDialog.css("position"),o="string"==typeof r?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:o,start:function(i,r){e(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",i,t(r))},resize:function(e,i){n._trigger("resize",e,t(i))},stop:function(r,a){i.height=e(this).height(),i.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",r,t(a))}}).css("position",a)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(i){var r=this,a=!1,o={};e.each(i,function(e,i){r._setOption(e,i),e in t&&(a=!0),e in n&&(o[e]=i)}),a&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var n,i,r=this.uiDialog;"dialogClass"===e&&r.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(n=r.is(":data(ui-draggable)"),n&&!t&&r.draggable("destroy"),!n&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(i=r.is(":data(ui-resizable)"),i&&!t&&r.resizable("destroy"),i&&"string"==typeof t&&r.resizable("option","handles",t),i||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,n=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(i){t._allowInteraction(i)||(i.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,n=this.options.position,i=[],r=[0,0];n?(("string"==typeof n||"object"==typeof n&&"0"in n)&&(i=n.split?n.split(" "):[n[0],n[1]],1===i.length&&(i[1]=i[0]),e.each(["left","top"],function(e,t){+i[e]===i[e]&&(r[e]=i[e],i[e]=t)}),n={my:i[0]+(r[0]<0?r[0]:"+"+r[0])+" "+i[1]+(r[1]<0?r[1]:"+"+r[1]),at:i.join(" ")}),n=e.extend({},e.ui.dialog.prototype.options.position,n)):n=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(n),t||this.uiDialog.hide()}})}(jQuery),function(e){var t=/up|down|vertical/,n=/up|left|vertical|horizontal/;e.effects.effect.blind=function(i,r){var a,o,s,l=e(this),c=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(l,i.mode||"hide"),h=i.direction||"up",d=t.test(h),p=d?"height":"width",f=d?"top":"left",m=n.test(h),g={},v="show"===u;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),a=e.effects.createWrapper(l).css({overflow:"hidden"}),o=a[p](),s=parseFloat(a.css(f))||0,g[p]=v?o:0,m||(l.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),g[f]=v?s:o+s),v&&(a.css(p,0),m||a.css(f,s+o)),a.animate(g,{duration:i.duration,easing:i.easing,queue:!1,complete:function(){"hide"===u&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),r()}})}}(jQuery),function(e){e.effects.effect.bounce=function(t,n){var i,r,a,o=e(this),s=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"effect"),c="hide"===l,u="show"===l,h=t.direction||"up",d=t.distance,p=t.times||5,f=2*p+(u||c?1:0),m=t.duration/f,g=t.easing,v="up"===h||"down"===h?"top":"left",y="up"===h||"left"===h,b=o.queue(),_=b.length;for((u||c)&&s.push("opacity"),e.effects.save(o,s),o.show(),e.effects.createWrapper(o),d||(d=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,y?2*-d:2*d).animate(a,m,g)),c&&(d/=Math.pow(2,p-1)),a={},a[v]=0,i=0;p>i;i++)r={},r[v]=(y?"-=":"+=")+d,o.animate(r,m,g).animate(a,m,g),d=c?2*d:d/2;c&&(r={opacity:0},r[v]=(y?"-=":"+=")+d,o.animate(r,m,g)),o.queue(function(){c&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),n()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue()}}(jQuery),function(e){e.effects.effect.clip=function(t,n){var i,r,a,o=e(this),s=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"hide"),c="show"===l,u=t.direction||"vertical",h="vertical"===u,d=h?"height":"width",p=h?"top":"left",f={};e.effects.save(o,s),o.show(),i=e.effects.createWrapper(o).css({overflow:"hidden"}),r="IMG"===o[0].tagName?i:o,a=r[d](),c&&(r.css(d,0),r.css(p,a/2)),f[d]=c?a:0,f[p]=c?0:a/2,r.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),n()}})}}(jQuery),function(e){e.effects.effect.drop=function(t,n){var i,r=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(r,t.mode||"hide"),s="show"===o,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",h={opacity:s?1:0};e.effects.save(r,a),r.show(),e.effects.createWrapper(r),i=t.distance||r["top"===c?"outerHeight":"outerWidth"](!0)/2,s&&r.css("opacity",0).css(c,"pos"===u?-i:i),h[c]=(s?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+i,r.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e){e.effects.effect.explode=function(t,n){function i(){b.push(this),b.length===h*d&&r()}function r(){p.css({visibility:"visible"}),e(b).remove(),m||p.hide(),n()}var a,o,s,l,c,u,h=t.pieces?Math.round(Math.sqrt(t.pieces)):3,d=h,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),y=Math.ceil(p.outerHeight()/h),b=[];for(a=0;h>a;a++)for(l=g.top+a*y,u=a-(h-1)/2,o=0;d>o;o++)s=g.left+o*v,c=o-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:s+(m?c*v:0),top:l+(m?u*y:0),opacity:m?0:1}).animate({left:s+(m?0:c*v),top:l+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,i)}}(jQuery),function(e){e.effects.effect.fade=function(t,n){var i=e(this),r=e.effects.setMode(i,t.mode||"toggle");i.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e){e.effects.effect.fold=function(t,n){var i,r,a=e(this),o=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(a,t.mode||"hide"),l="show"===s,c="hide"===s,u=t.size||15,h=/([0-9]+)%/.exec(u),d=!!t.horizFirst,p=l!==d,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),i=e.effects.createWrapper(a).css({overflow:"hidden"}),r=p?[i.width(),i.height()]:[i.height(),i.width()],h&&(u=parseInt(h[1],10)/100*r[c?0:1]),l&&i.css(d?{height:0,width:u}:{height:u,width:0}),g[f[0]]=l?r[0]:u,v[f[1]]=l?r[1]:0,i.animate(g,m,t.easing).animate(v,m,t.easing,function(){c&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),n()})}}(jQuery),function(e){e.effects.effect.highlight=function(t,n){var i=e(this),r=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(i,t.mode||"show"),o={backgroundColor:i.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(i,r),i.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&i.hide(),e.effects.restore(i,r),n()}})}}(jQuery),function(e){e.effects.effect.pulsate=function(t,n){var i,r=e(this),a=e.effects.setMode(r,t.mode||"show"),o="show"===a,s="hide"===a,l=o||"hide"===a,c=2*(t.times||5)+(l?1:0),u=t.duration/c,h=0,d=r.queue(),p=d.length;for((o||!r.is(":visible"))&&(r.css("opacity",0).show(),h=1),i=1;c>i;i++)r.animate({opacity:h},u,t.easing),h=1-h;r.animate({opacity:h},u,t.easing),r.queue(function(){s&&r.hide(),n()}),p>1&&d.splice.apply(d,[1,0].concat(d.splice(p,c+1))),r.dequeue()}}(jQuery),function(e){e.effects.effect.puff=function(t,n){var i=e(this),r=e.effects.setMode(i,t.mode||"hide"),a="hide"===r,o=parseInt(t.percent,10)||150,s=o/100,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:r,complete:n,percent:a?o:100,from:a?l:{height:l.height*s,width:l.width*s,outerHeight:l.outerHeight*s,outerWidth:l.outerWidth*s}}),i.effect(t)},e.effects.effect.scale=function(t,n){var i=e(this),r=e.extend(!0,{},t),a=e.effects.setMode(i,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),s=t.direction||"both",l=t.origin,c={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},u={y:"horizontal"!==s?o/100:1,x:"vertical"!==s?o/100:1};r.effect="size",r.queue=!1,r.complete=n,"effect"!==a&&(r.origin=l||["middle","center"],r.restore=!0),r.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:c),r.to={height:c.height*u.y,width:c.width*u.x,outerHeight:c.outerHeight*u.y,outerWidth:c.outerWidth*u.x},r.fade&&("show"===a&&(r.from.opacity=0,r.to.opacity=1),"hide"===a&&(r.from.opacity=1,r.to.opacity=0)),i.effect(r)},e.effects.effect.size=function(t,n){var i,r,a,o=e(this),s=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],u=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),y=f?s:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),i={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||i):(o.from=t.from||("show"===p?b:i),o.to=t.to||("hide"===p?b:i)),a={from:{y:o.from.height/i.height,x:o.from.width/i.width},to:{y:o.to.height/i.height,x:o.to.width/i.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,a.from.y,o.from),o.to=e.effects.setTransition(o,h,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.x,o.from),o.to=e.effects.setTransition(o,d,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(c),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(r=e.effects.getBaseline(g,i),o.from.top=(i.outerHeight-o.outerHeight())*r.y,o.from.left=(i.outerWidth-o.outerWidth())*r.x,o.to.top=(i.outerHeight-o.to.outerHeight)*r.y,o.to.left=(i.outerWidth-o.to.outerWidth)*r.x),o.css(o.from),("content"===m||"both"===m)&&(h=h.concat(["marginTop","marginBottom"]).concat(u),d=d.concat(["marginLeft","marginRight"]),c=s.concat(h).concat(d),o.find("*[width]").each(function(){var n=e(this),i={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};f&&e.effects.save(n,c),n.from={height:i.height*a.from.y,width:i.width*a.from.x,outerHeight:i.outerHeight*a.from.y,outerWidth:i.outerWidth*a.from.x},n.to={height:i.height*a.to.y,width:i.width*a.to.x,outerHeight:i.height*a.to.y,outerWidth:i.width*a.to.x},a.from.y!==a.to.y&&(n.from=e.effects.setTransition(n,h,a.from.y,n.from),n.to=e.effects.setTransition(n,h,a.to.y,n.to)),a.from.x!==a.to.x&&(n.from=e.effects.setTransition(n,d,a.from.x,n.from),n.to=e.effects.setTransition(n,d,a.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){f&&e.effects.restore(n,c)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var i=parseInt(n,10),r=e?o.to.left:o.to.top;return"auto"===n?r+"px":i+r+"px"})})),e.effects.removeWrapper(o),n()}})}}(jQuery),function(e){e.effects.effect.shake=function(t,n){var i,r=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(r,t.mode||"effect"),s=t.direction||"left",l=t.distance||20,c=t.times||3,u=2*c+1,h=Math.round(t.duration/u),d="up"===s||"down"===s?"top":"left",p="up"===s||"left"===s,f={},m={},g={},v=r.queue(),y=v.length;for(e.effects.save(r,a),r.show(),e.effects.createWrapper(r),f[d]=(p?"-=":"+=")+l,m[d]=(p?"+=":"-=")+2*l,g[d]=(p?"-=":"+=")+2*l,r.animate(f,h,t.easing),i=1;c>i;i++)r.animate(m,h,t.easing).animate(g,h,t.easing);r.animate(m,h,t.easing).animate(f,h/2,t.easing).queue(function(){"hide"===o&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),n()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),r.dequeue()}}(jQuery),function(e){e.effects.effect.slide=function(t,n){var i,r=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(r,t.mode||"show"),s="show"===o,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,h={};e.effects.save(r,a),r.show(),i=t.distance||r["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),s&&r.css(c,u?isNaN(i)?"-"+i:-i:i),h[c]=(s?u?"+=":"-=":u?"-=":"+=")+i,r.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e){e.effects.effect.transfer=function(t,n){var i=e(this),r=e(t.to),a="fixed"===r.css("position"),o=e("body"),s=a?o.scrollTop():0,l=a?o.scrollLeft():0,c=r.offset(),u={top:c.top-s,left:c.left-l,height:r.innerHeight(),width:r.innerWidth()},h=i.offset(),d=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:h.top-s,left:h.left-l,height:i.innerHeight(),width:i.innerWidth(),position:a?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){d.remove(),n()})}}(jQuery),function(e){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,r,a,o,s,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,r=this.previousFilter||"",a=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),a===r?o=!0:a=r+a,s=new RegExp("^"+n(a),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(e(this).children("a").text())}),i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(a=String.fromCharCode(t.keyCode),s=new RegExp("^"+n(a),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(e(this).children("a").text())})),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.prev("a"),r=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",i.attr("id"))}),t=i.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]
},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,r,a,o,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-n-i,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),s=t.height(),0>r?this.activeMenu.scrollTop(a+r):r+s>o&&this.activeMenu.scrollTop(a+r-o+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,i)},nextPage:function(t){var n,i,r;return this.active?(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i-r<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var n,i,r;return this.active?(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i+r>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),function(e,t){function n(e,t,n){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?n/100:1)]}function i(t,n){return parseInt(e.css(t,n),10)||0}function r(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var a,o=Math.max,s=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(a!==t)return a;var n,i,r=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];return e("body").append(r),n=o.offsetWidth,r.css("overflow","scroll"),i=o.offsetWidth,n===i&&(i=r[0].clientWidth),r.remove(),a=n-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,a="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var a,p,m,g,v,y,b=e(t.of),_=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(_),x=(t.collision||"flip").split(" "),C={};return y=r(b),b[0].preventDefault&&(t.at="left top"),p=y.width,m=y.height,g=y.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=h.exec(i[0]),n=h.exec(i[1]),C[this]=[e?e[0]:0,n?n[0]:0],t[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),a=n(C.at,p,m),v.left+=a[0],v.top+=a[1],this.each(function(){var r,c,u=e(this),h=u.outerWidth(),d=u.outerHeight(),f=i(this,"marginLeft"),y=i(this,"marginTop"),k=h+f+i(this,"marginRight")+w.width,T=d+y+i(this,"marginBottom")+w.height,E=e.extend({},v),S=n(C.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?E.left-=h:"center"===t.my[0]&&(E.left-=h/2),"bottom"===t.my[1]?E.top-=d:"center"===t.my[1]&&(E.top-=d/2),E.left+=S[0],E.top+=S[1],e.support.offsetFractions||(E.left=l(E.left),E.top=l(E.top)),r={marginLeft:f,marginTop:y},e.each(["left","top"],function(n,i){e.ui.position[x[n]]&&e.ui.position[x[n]][i](E,{targetWidth:p,targetHeight:m,elemWidth:h,elemHeight:d,collisionPosition:r,collisionWidth:k,collisionHeight:T,offset:[a[0]+S[0],a[1]+S[1]],my:t.my,at:t.at,within:_,elem:u})}),t.using&&(c=function(e){var n=g.left-E.left,i=n+p-h,r=g.top-E.top,a=r+m-d,l={target:{element:b,left:g.left,top:g.top,width:p,height:m},element:{element:u,left:E.left,top:E.top,width:h,height:d},horizontal:0>i?"left":n>0?"right":"center",vertical:0>a?"top":r>0?"bottom":"middle"};h>p&&s(n+i)<p&&(l.horizontal="center"),d>m&&s(r+a)<m&&(l.vertical="middle"),l.important=o(s(n),s(i))>o(s(r),s(a))?"horizontal":"vertical",t.using.call(this,e,l)}),u.offset(e.extend(E,{using:c}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,s=e.left-t.collisionPosition.marginLeft,l=r-s,c=s+t.collisionWidth-a-r;t.collisionWidth>a?l>0&&0>=c?(n=e.left+l+t.collisionWidth-a-r,e.left+=l-n):e.left=c>0&&0>=l?r:l>c?r+a-t.collisionWidth:r:l>0?e.left+=l:c>0?e.left-=c:e.left=o(e.left-s,e.left)},top:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,a=t.within.height,s=e.top-t.collisionPosition.marginTop,l=r-s,c=s+t.collisionHeight-a-r;t.collisionHeight>a?l>0&&0>=c?(n=e.top+l+t.collisionHeight-a-r,e.top+=l-n):e.top=c>0&&0>=l?r:l>c?r+a-t.collisionHeight:r:l>0?e.top+=l:c>0?e.top-=c:e.top=o(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,a=r.offset.left+r.scrollLeft,o=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,h=c+t.collisionWidth-o-l,d="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(n=e.left+d+p+f+t.collisionWidth-o-a,(0>n||n<s(u))&&(e.left+=d+p+f)):h>0&&(i=e.left-t.collisionPosition.marginLeft+d+p+f-l,(i>0||s(i)<h)&&(e.left+=d+p+f))},top:function(e,t){var n,i,r=t.within,a=r.offset.top+r.scrollTop,o=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,h=c+t.collisionHeight-o-l,d="top"===t.my[1],p=d?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(i=e.top+p+f+m+t.collisionHeight-o-a,e.top+p+f+m>u&&(0>i||i<s(u))&&(e.top+=p+f+m)):h>0&&(n=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>h&&(n>0||s(n)<h)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,r,a,o=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(o?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in i)t.style[a]=i[a];t.appendChild(s),n=o||document.documentElement,n.insertBefore(t,n.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",r=e(s).offset().left,e.support.offsetFractions=r>10&&11>r,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,i=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(n=i.values&&i.values.length||1,r.length>n&&(r.slice(n).remove(),r=r.slice(0,n)),t=r.length;n>t;t++)o.push(a);this.handles=r.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,r,a,o,s,l,c,u=this,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(i-u.values(t));(r>n||r===n&&(t===u._lastChangedValue||u.values(t)===h.min))&&(r=n,a=e(this),o=t)}),s=this._start(t,o),s===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),l=a.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-a.width()/2,top:t.pageY-l.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,r,a;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),a=this._valueMin()+i*r,this._trimAlignValue(a)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,r,a;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>i||1===t&&i>n)&&(n=i),n!==this.values(t)&&(r=this.values(),r[t]=n,a=this._trigger("slide",e,{handle:this.handles[t],value:n,values:r}),i=this.values(t?0:1),a!==!1&&this.values(t,n,!0))):n!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:n}),a!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,n){var i,r,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,r=arguments[0],a=0;a<i.length;a+=1)i[a]=this._trimAlignValue(r[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,n){var i,r=0;switch("range"===t&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;r>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,r,a,o=this.options.range,s=this.options,l=this,c=this._animateOff?!1:s.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=100*((l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())),u["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[c?"animate":"css"](u,s.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:s.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:s.animate}))),t=n}):(i=this.value(),r=this._valueMin(),a=this._valueMax(),n=a!==r?100*((i-r)/(a-r)):0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](u,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:s.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:s.animate}))},_handleEvents:{keydown:function(n){var i,r,a,o,s=e(n.target).data("ui-slider-handle-index");switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(n.target).addClass("ui-state-active"),i=this._start(n,s),i===!1))return}switch(o=this.options.step,r=a=this.options.values&&this.options.values.length?this.values(s):this.value(),n.keyCode){case e.ui.keyCode.HOME:a=this._valueMin();break;case e.ui.keyCode.END:a=this._valueMax();break;case e.ui.keyCode.PAGE_UP:a=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===this._valueMax())return;a=this._trimAlignValue(r+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===this._valueMin())return;a=this._trimAlignValue(r-o)}this._slide(n,s,a)},click:function(e){e.preventDefault()},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,i){var r=n.attr(i);void 0!==r&&r.length&&(t[i]=r)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function n(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,i=e.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,n.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,i=this.options;return t=null!==i.min?i.min:0,n=e-t,n=Math.round(n/i.step)*i.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),null!==i.max&&e>i.max?i.max:null!==i.min&&e<i.min?i.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var n=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(n)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;""!==e&&(n=this._parse(e),null!==n&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(t(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function n(){return++r}function i(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var r=0,a=/#.*$/;e.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(n.active):e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);return null===t&&(i&&this.tabs.each(function(n,r){return e(r).attr("aria-controls")===i?(t=n,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),i=this.tabs.index(n),r=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(i),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(i===this.options.active?!1:i),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,r),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),0>t&&(t=r),t}for(var r=this.tabs.length-1;-1!==e.inArray(i(),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+n()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""
},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var a,o,s,l=e(r).uniqueId().attr("id"),c=e(r).closest("li"),u=c.attr("aria-controls");i(r)?(a=r.hash,o=t.element.find(t._sanitizeSelector(a))):(s=t._tabId(c),a="#"+s,o=t.element.find(a),o.length||(o=t._createPanel(s),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),u&&c.data("ui-tabs-aria-controls",u),c.attr({"aria-controls":a.substring(1),"aria-labelledby":l}),o.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n,i=0;n=this.tabs[i];i++)t===!0||-1!==e.inArray(i,t)?e(n).addClass("ui-state-disabled").attr("aria-disabled","true"):e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,i=this.element.parent();"fill"===t?(n=i.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,i=this.active,r=e(t.currentTarget),a=r.closest("li"),o=a[0]===i[0],s=o&&n.collapsible,l=s?e():this._getPanelForTab(a),c=i.length?this._getPanelForTab(i):e(),u={oldTab:i,oldPanel:c,newTab:s?e():a,newPanel:l};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,u)===!1||(n.active=s?!1:this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(a),t),this._toggle(t,u))},_toggle:function(t,n){function i(){a.running=!1,a._trigger("activate",t,n)}function r(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,i):(o.show(),i())}var a=this,o=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),r()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),o.length&&s.length?n.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var i=this.options.disabled;i!==!1&&(n===t?i=!1:(n=this._getIndex(n),i=e.isArray(i)?e.map(i,function(e){return e!==n?e:null}):e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(i))},disable:function(n){var i=this.options.disabled;if(i!==!0){if(n===t)i=!0;else{if(n=this._getIndex(n),-1!==e.inArray(n,i))return;i=e.isArray(i)?e.merge([n],i).sort():[n]}this._setupDisabled(i)}},load:function(t,n){t=this._getIndex(t);var r=this,a=this.tabs.eq(t),o=a.find(".ui-tabs-anchor"),s=this._getPanelForTab(a),l={tab:a,panel:s};i(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,n,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){s.html(e),r._trigger("load",n,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&r.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),s.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)})))},_ajaxSettings:function(t,n,i){var r=this;return{url:t.attr("href"),beforeSend:function(t,a){return r._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:a},i))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})}(jQuery),function(e){function t(t,n){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(i.join(" ")))}function n(t){var n=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(n,i);-1!==r&&i.splice(r,1),t.removeData("ui-tooltip-id"),i=e.trim(i.join(" ")),i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")}var i=0;e.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var i=this;return"disabled"===t?(this[n?"_disable":"_enable"](),this.options[t]=n,void 0):(this._super(t,n),"content"===t&&e.each(this.tooltips,function(e,t){i._updateContent(t)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(n,i){var r=e.Event("blur");r.target=r.currentTarget=i[0],t.close(r,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var t,i=e(this);i.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._updateContent(i,t))},_updateContent:function(e,t){var n,i=this.options.content,r=this,a=t?t.type:null;return"string"==typeof i?this._open(t,e,i):(n=i.call(e[0],function(n){e.data("ui-tooltip-open")&&r._delay(function(){t&&(t.type=a),this._open(t,e,n)})}),n&&this._open(t,e,n),void 0)},_open:function(n,i,r){function a(e){c.of=e,o.is(":hidden")||o.position(c)}var o,s,l,c=e.extend({},this.options.position);if(r){if(o=this._find(i),o.length)return o.find(".ui-tooltip-content").html(r),void 0;i.is("[title]")&&(n&&"mouseover"===n.type?i.attr("title",""):i.removeAttr("title")),o=this._tooltip(i),t(i,o.attr("id")),o.find(".ui-tooltip-content").html(r),this.options.track&&n&&/^mouse/.test(n.type)?(this._on(this.document,{mousemove:a}),a(n)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){o.is(":visible")&&(a(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",n,{tooltip:o}),s={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0],this.close(n,!0)}},remove:function(){this._removeTooltip(o)}},n&&"mouseover"!==n.type||(s.mouseleave="close"),n&&"focusin"!==n.type||(s.focusout="close"),this._on(!0,i,s)}},close:function(t){var i=this,r=e(t?t.currentTarget:this.element),a=this._find(r);this.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&r.attr("title",r.data("ui-tooltip-title")),n(r),a.stop(!0),this._hide(a,this.options.hide,function(){i._removeTooltip(e(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete i.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:a}),this.closing=!1)},_tooltip:function(t){var n="ui-tooltip-"+i++,r=e("<div>").attr({id:n,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(r),r.appendTo(this.document[0].body),this.tooltips[n]=t,r},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,i){var r=e.Event("blur");r.target=r.currentTarget=i[0],t.close(r,!0),e("#"+n).remove(),i.data("ui-tooltip-title")&&(i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))})}})}(jQuery),/*! Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
 * Dual licensed under the MIT (MIT_LICENSE.txt)
 * and GPL Version 2 (GPL_LICENSE.txt) licenses.
 *
 * Version: 1.1.1
 * Requires jQuery 1.3+
 * Docs: http://docs.jquery.com/Plugins/livequery
 */
function(e){e.extend(e.fn,{livequery:function(t,n,i){var r,a=this;return e.isFunction(t)&&(i=n,n=t,t=void 0),e.each(e.livequery.queries,function(e,o){return a.selector!=o.selector||a.context!=o.context||t!=o.type||n&&n.$lqguid!=o.fn.$lqguid||i&&i.$lqguid!=o.fn2.$lqguid?void 0:(r=o)&&!1}),r=r||new e.livequery(this.selector,this.context,t,n,i),r.stopped=!1,r.run(),this},expire:function(t,n,i){var r=this;return e.isFunction(t)&&(i=n,n=t,t=void 0),e.each(e.livequery.queries,function(a,o){r.selector!=o.selector||r.context!=o.context||t&&t!=o.type||n&&n.$lqguid!=o.fn.$lqguid||i&&i.$lqguid!=o.fn2.$lqguid||this.stopped||e.livequery.stop(o.id)}),this}}),e.livequery=function(t,n,i,r,a){return this.selector=t,this.context=n,this.type=i,this.fn=r,this.fn2=a,this.elements=[],this.stopped=!1,this.id=e.livequery.queries.push(this)-1,r.$lqguid=r.$lqguid||e.livequery.guid++,a&&(a.$lqguid=a.$lqguid||e.livequery.guid++),this},e.livequery.prototype={stop:function(){var e=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(t,n){e.fn2.apply(n)}),this.elements=[],this.stopped=!0},run:function(){if(!this.stopped){var t=this,n=this.elements,i=e(this.selector,this.context),r=i.not(n);this.elements=i,this.type?(r.bind(this.type,this.fn),n.length>0&&e.each(n,function(n,r){e.inArray(r,i)<0&&e.event.remove(r,t.type,t.fn)})):(r.each(function(){t.fn.apply(this)}),this.fn2&&n.length>0&&e.each(n,function(n,r){e.inArray(r,i)<0&&t.fn2.apply(r)}))}}},e.extend(e.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(e.livequery.running&&e.livequery.queue.length)for(var t=e.livequery.queue.length;t--;)e.livequery.queries[e.livequery.queue.shift()].run()},pause:function(){e.livequery.running=!1},play:function(){e.livequery.running=!0,e.livequery.run()},registerPlugin:function(){e.each(arguments,function(t,n){if(e.fn[n]){var i=e.fn[n];e.fn[n]=function(){var t=i.apply(this,arguments);return e.livequery.run(),t}}})},run:function(t){void 0!=t?e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t):e.each(e.livequery.queries,function(t){e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t)}),e.livequery.timeout&&clearTimeout(e.livequery.timeout),e.livequery.timeout=setTimeout(e.livequery.checkQueue,20)},stop:function(t){void 0!=t?e.livequery.queries[t].stop():e.each(e.livequery.queries,function(t){e.livequery.queries[t].stop()})}}),e.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html"),e(function(){e.livequery.play()})}(jQuery),/*
     * Copyright (c) 2010 Romain Ruetschi <romain.ruetschi@gmail.com>
     * 
     * Permission is hereby granted, free of charge, to any person obtaining
     * a copy of this software and associated documentation files (the
     * "Software"), to deal in the Software without restriction, including
     * without limitation the rights to use, copy, modify, merge, publish,
     * distribute, sublicense, and/or sell copies of the Software, and to
     * permit persons to whom the Software is furnished to do so, subject to
     * the following conditions:
     * 
     * The above copyright notice and this permission notice shall be
     * included in all copies or substantial portions of the Software.
     * 
     * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
     * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
     * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
     * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
     * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
     * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
     * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
     */
function(e,t){e.fn.placeHoldize=function(){function n(t){var n=e(this);if(t||!r&&n.attr("placeholder")||n.is("textarea")){var i=n.attr("placeholder");n.val().length<=0||n.val()==i?(n.val(""),n.removeAttr("placeholder").addClass("placeholder-visible"),n.val(i)):n.removeClass("placeholder-visible").addClass("placeholder-hidden"),n.addClass("placeholdized"),n.focus(function(){var t=e(this);t.val()===i&&(t.val(""),t.removeClass("placeholder-visible").addClass("placeholder-hidden"))}),n.blur(function(){var t=e(this);""===t.val()?(t.val(i),t.removeClass("placeholder-hidden").addClass("placeholder-visible")):t.removeClass("placeholder-visible").addClass("placeholder-hidden")})}}function i(t){var n=t.closest("form");return n.submit(function(){var t=e(this);t.data("placeHoldize.submitHandlerCalled")||t.find(".placeholder-visible").val("").data("placeHoldize.submitHandlerCalled",!0)}),!0}var r=function(e){return!(""!==e.placeholder||e.placeholder===t)}(document.createElement("input"));return function(e){return this.each(function(){n.call(this,e)}),i(this),this}}()}(jQuery),function(e){e.fn.powerDropdown=function(){var t=e(this),n="powerDropdown",i="expanded",r=function(){e("."+n).removeClass(i)},a=function(e){return e.hasClass(n)},o=function(e){return e.hasClass(i)};return t.addClass(n).click(function(){var t=e(this);o(t)||r(),t.toggleClass(i)}),e(document).click(function(t){a(e(t.target).parents())||r()}),this}}(jQuery),function(e){e.fn.toggleCheckboxes=function(){return this.each(function(){var t=e(this),n=t.closest("form"),i=e("input:checkbox",n).not(t);t.bind("click",function(){i.attr("checked",t.attr("checked"))}),i.bind("click",function(){var n=e(this).attr("checked"),r=i.filter(":not(:checked)");n&&0!=r.length||t.attr("checked",n)})})}}(jQuery),/*!
 * jQuery clueTip plugin v1.1.3
 *
 * Date: Mon Apr 11 20:31:15 2011 EDT
 * Requires: jQuery v1.3+
 *
 * Copyright 2011, Karl Swedberg
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Full list of options/settings can be found at the bottom of this file and at http://plugins.learningjquery.com/cluetip/
 * Examples can be found at http://plugins.learningjquery.com/cluetip/demo/
 *
*/
function(e){e.cluetip={version:"1.1.3",setup:{insertionType:"appendTo",insertionElement:"body"},defaults:{width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,local:!1,localPrefix:null,localIdSuffix:null,hideLocal:!0,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:!1,showTitle:!0,cluetipClass:"default",hoverClass:"",waitImage:!0,cursor:"help",arrows:!1,dropShadow:!0,dropShadowSteps:6,sticky:!1,mouseOutClose:!1,activation:"hover",clickThrough:!0,tracking:!1,delayedClose:0,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(){return!0},onShow:function(){},onHide:function(){},ajaxCache:!0,ajaxProcess:function(e){return e=e.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:!1}};var t,n,i,r,a,o,s,l,c="ui-widget ui-widget-content ui-cluetip";e.fn.cluetip=function(u,h){function d(t,n){var i=t.dropShadow&&t.dropShadowSteps?+t.dropShadowSteps:0;if(e.support.boxShadow){var r=0===i?"0 0 ":"1px 1px ";return e("#cluetip").css(e.support.boxShadow,r+i+"px rgba(0,0,0,0.5)"),!1}var a=e("#cluetip .cluetip-drop-shadow");if(i==a.length)return a;a.remove();for(var o=[],s=0;i>s;)o[s++]='<div style="top:'+s+"px;left:"+s+'px;"></div>';return n=e(o.join("")).css({position:"absolute",backgroundColor:"#000",zIndex:m-1,opacity:.1}).addClass("cluetip-drop-shadow").prependTo("#cluetip")}if("object"==typeof u&&(h=u,u=null),"destroy"==u)return e(document).unbind(".cluetip"),e("#cluetip").remove(),e.removeData(this,"title"),e.removeData(this,"cluetip"),this.unbind(".cluetip");h=e.extend(!0,{},e.cluetip.defaults,h||{});var p=/appendTo|prependTo|insertBefore|insertAfter/.test(h.insertionType)?h.insertionType:"appendTo",f=h.insertionElement||"body";if(!e("#cluetip").length){e(['<div id="cluetip">','<div id="cluetip-outer" class="ui-cluetip-outer">','<h3 id="cluetip-title" class="ui-widget-header ui-cluetip-header"></h3>','<div id="cluetip-inner" class="ui-widget-content ui-cluetip-content"></div>',"</div>",'<div id="cluetip-extra"></div>','<div id="cluetip-arrows" class="cluetip-arrows"></div>',"</div>"].join(""))[p](f).hide();var m=+h.cluezIndex;t=e("#cluetip").css({position:"absolute"}),i=e("#cluetip-outer").css({position:"relative",zIndex:m}),n=e("#cluetip-inner"),r=e("#cluetip-title"),a=e("#cluetip-arrows"),o=e('<div id="cluetip-waitimage"></div>').css({position:"absolute"}).insertBefore(t).hide()}var g=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0);return this.each(function(p){function f(){return!1}var v=this,y=e(this),b=e.extend(!0,{},h,e.metadata?y.metadata():e.meta?y.data():{}),_=!1,w=!1,x=0,C=y.attr(b.attribute),k=b.cluetipClass;if(m=+b.cluezIndex,y.data("cluetip",{title:v.title,zIndex:m}),!C&&!b.splitTitle&&!u)return!0;b.local&&b.localPrefix&&(C=b.localPrefix+C),b.local&&b.hideLocal&&C&&e(C+":first").hide();var T,E,S,D,A,N,M,R,P,O,F,I,L,j=parseInt(b.topOffset,10),H=parseInt(b.leftOffset,10),B=isNaN(parseInt(b.height,10))?"auto":/\D/g.test(b.height)?b.height:b.height+"px",W=parseInt(b.width,10)||275,z=W+g+b.dropShadowSteps,$=y.width(),U="title"!=b.attribute?y.attr(b.titleAttribute):"";b.splitTitle&&(void 0==U&&(U=""),L=U.split(b.splitTitle),U=L.shift()),b.escapeTitle&&(U=U.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"));var q=function(r){var s=b.onActivate(y);if(s===!1)return!1;if(w=!0,t.removeClass().css({width:W}),C==y.attr("href")&&y.css("cursor",b.cursor),b.hoverClass&&y.addClass(b.hoverClass),D=A=y.offset().top,P=y.offset().left,F=r.pageX,M=r.pageY,"area"!=v.tagName.toLowerCase()&&(S=e(document).scrollTop(),I=e(window).width()),"fixed"==b.positionBy)O=$+P+H,t.css({left:O});else{O=$>P&&P>z||P+$+z+H>I?P-z-H:$+P+H,("area"==v.tagName.toLowerCase()||"mouse"==b.positionBy||$+z>I)&&(F+20+z>I?(t.addClass(" cluetip-"+k),O=F-z-H>=0?F-z-H-parseInt(t.css("marginLeft"),10)+parseInt(n.css("marginRight"),10):F-z/2):O=F+H);var c=0>O?r.pageY+j:r.pageY;t.css({left:O>0&&"bottomTop"!=b.positionBy?O:F+z/2>I?I/2-z/2:Math.max(F-z/2,0),zIndex:y.data("cluetip").zIndex}),a.css({zIndex:y.data("cluetip").zIndex+1})}if(E=e(window).height(),u)"function"==typeof u&&(u=u.call(v)),n.html(u),Y(c);else if(L){var h=L.length;if(n.html(h?L[0]:""),h>1)for(var d=1;h>d;d++)n.append('<div class="split-body">'+L[d]+"</div>");Y(c)}else if(b.local||0===C.indexOf("#")){if(b.local){var f=e(C+(/#\S+$/.test(C)?"":":eq("+p+")")).clone(!0).show();b.localIdSuffix&&f.attr("id",f[0].id+b.localIdSuffix),n.html(f),Y(c)}}else if(/\.(jpe?g|tiff?|gif|png)(?:\?.*)?$/i.test(C))n.html('<img src="'+C+'" alt="'+U+'" />'),Y(c);else{var m=b.ajaxSettings.beforeSend,g=b.ajaxSettings.error,x=b.ajaxSettings.success,T=b.ajaxSettings.complete,N={cache:b.ajaxCache,url:C,beforeSend:function(e){m&&m.call(v,e,t,n),i.children().empty(),b.waitImage&&o.css({top:M+20,left:F+20,zIndex:y.data("cluetip").zIndex-1}).show()},error:function(e,i){w&&(g?g.call(v,e,i,t,n):n.html("<i>sorry, the contents could not be loaded</i>"))},success:function(e,i){_=b.ajaxProcess.call(v,e),w&&(x&&x.call(v,e,i,t,n),n.html(_))},complete:function(i,r){T&&T.call(v,i,r,t,n);var a=n[0].getElementsByTagName("img");l=a.length;for(var s=0,u=a.length;u>s;s++)a[s].complete&&l--;l&&!e.browser.opera?e(a).bind("load error",function(){l--,1>l&&(o.hide(),w&&Y(c))}):(o.hide(),w&&Y(c))}},R=e.extend(!0,{},b.ajaxSettings,N);e.ajax(R)}},Y=function(o){if(t.addClass("cluetip-"+k),b.truncate){var l=n.text().slice(0,b.truncate)+"...";n.html(l)}if(U?r.show().html(U):b.showTitle?r.show().html("&nbsp;"):r.hide(),b.sticky){var u=e('<div id="cluetip-close"><a href="#">'+b.closeText+"</a></div>");"bottom"==b.closePosition?u.appendTo(n):"title"==b.closePosition?u.prependTo(r):u.prependTo(n),u.bind("click.cluetip",function(){return X(),!1}),b.mouseOutClose?t.bind("mouseleave.cluetip",function(){X()}):t.unbind("mouseleave.cluetip")}var h="";i.css({zIndex:y.data("cluetip").zIndex,overflow:"auto"==B?"visible":"auto",height:B}),T="auto"==B?Math.max(t.outerHeight(),t.height()):parseInt(B,10),N=A,R=S+E,"fixed"==b.positionBy?N=A-b.dropShadowSteps+j:F>O&&Math.max(O,0)+z>F||"bottomTop"==b.positionBy?A+T+j>R&&M-S>T+j?(N=M-T-j,h="top"):(N=M+j,h="bottom"):N=A+T+j>R?T>=E?S:R-T-j:"block"==y.css("display")||"area"==v.tagName.toLowerCase()||"mouse"==b.positionBy?o-j:A-b.dropShadowSteps,""==h&&(h=P>O?"left":"right");var p=" clue-"+h+"-"+k+" cluetip-"+k;if("rounded"==k&&(p+=" ui-corner-all"),t.css({top:N+"px"}).addClass(c+p),b.arrows){var f=A-N-b.dropShadowSteps;a.css({top:/(left|right)/.test(h)&&O>=0&&f>0?f+"px":/(left|right)/.test(h)?0:""}).show()}else a.hide();s=d(b),s&&s.length&&s.hide().css({height:T,width:W,zIndex:y.data("cluetip").zIndex-1}).show(),t.hide()[b.fx.open](b.fx.openSpeed||0),e.fn.bgiframe&&t.bgiframe(),b.delayedClose>0&&(x=setTimeout(X,b.delayedClose)),b.onShow.call(v,t,n)},V=function(){w=!1,o.hide(),(!b.sticky||/click|toggle/.test(b.activation))&&(X(),clearTimeout(x)),b.hoverClass&&y.removeClass(b.hoverClass)},X=function(){i.parent().hide().removeClass(),b.onHide.call(v,t,n),y.removeClass("cluetip-clicked"),U&&y.attr(b.titleAttribute,U),y.css("cursor",""),b.arrows&&a.css({top:""})};if(e(document).bind("hideCluetip",function(){X()}),/click|toggle/.test(b.activation))y.bind("click.cluetip",function(n){return t.is(":hidden")||!y.is(".cluetip-clicked")?(q(n),e(".cluetip-clicked").removeClass("cluetip-clicked"),y.addClass("cluetip-clicked")):V(n),!1});else if("focus"==b.activation)y.bind("focus.cluetip",function(e){y.attr("title",""),q(e)}),y.bind("blur.cluetip",function(e){y.attr("title",y.data("thisInfo").title),V(e)});else{y[b.clickThrough?"unbind":"bind"]("click.cluetip",f);var K=function(e){if(1==b.tracking){var n=O-e.pageX,i=N?N-e.pageY:A-e.pageY;y.bind("mousemove.cluetip",function(e){t.css({left:e.pageX+n,top:e.pageY+i})})}};e.fn.hoverIntent&&b.hoverIntent?y.hoverIntent({sensitivity:b.hoverIntent.sensitivity,interval:b.hoverIntent.interval,over:function(e){q(e),K(e)},timeout:b.hoverIntent.timeout,out:function(e){V(e),y.unbind("mousemove.cluetip")}}):y.bind("mouseenter.cluetip",function(e){q(e),K(e)}).bind("mouseleave.cluetip",function(e){V(e),y.unbind("mousemove.cluetip")}),y.bind("mouseover.cluetip",function(){y.attr("title","")}).bind("mouseleave.cluetip",function(){y.attr("title",y.data("cluetip").title)})}}),this},function(){e.support=e.support||{};for(var t=document.createElement("div"),n=t.style,i=["boxShadow"],r=["moz","Moz","webkit","o"],a=0,o=i.length;o>a;a++){var s=i[a],l=s.charAt(0).toUpperCase()+s.slice(1);if("undefined"!=typeof n[s])e.support[s]=s;else for(var c=0,u=r.length;u>c;c++)if("undefined"!=typeof n[r[c]+l]){e.support[s]=r[c]+l;break}}t=null}(),e.fn.cluetip.defaults=e.cluetip.defaults}(jQuery),function(e){e.fn.extend({elastic:function(){var t=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight"];return this.each(function(){function n(e,t){curratedHeight=Math.floor(parseInt(e,10)),r.height()!=curratedHeight&&r.css({height:curratedHeight+"px",overflow:t})}function i(){var e=r.val().replace(/<|>/g," ").replace(/\n/g,"<br />").replace(/&/g,"&amp;"),t=a.html();if(e+"&nbsp;"!=t&&(a.html(e+"&nbsp;"),Math.abs(a.height()+o-r.height())>3)){var i=a.height()+o;i>=l?n(l,"auto"):s>=i?n(s,"hidden"):n(i,"hidden")}}if("textarea"!=this.type)return!1;var r=e(this),a=e("<div />").css({position:"absolute",display:"none"}),o=parseInt(r.css("line-height"),10)||parseInt(r.css("font-size"),"10"),s=parseInt(r.css("height"),10)||3*o,l=parseInt(r.css("max-height"),10)||Number.MAX_VALUE,c=0;0>l&&(l=Number.MAX_VALUE),a.appendTo(r.parent());for(var c=t.length;c--;)a.css(t[c].toString(),r.css(t[c].toString()));r.css({overflow:"hidden"}),r.keyup(function(){i()}),r.live("input paste",function(){setTimeout(i,250)}),i()})}})}(jQuery),/**
 * jQuery Cookie plugin
 *
 * Copyright (c) 2010 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
jQuery.cookie=function(e,t,n){if(arguments.length>1&&"[object Object]"!==String(t)){if(n=jQuery.extend({},n),(null===t||void 0===t)&&(n.expires=-1),"number"==typeof n.expires){var i=n.expires,r=n.expires=new Date;r.setDate(r.getDate()+i)}return t=String(t),document.cookie=[encodeURIComponent(e),"=",n.raw?t:encodeURIComponent(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=t||{};var a,o=n.raw?function(e){return e}:decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?o(a[1]):null},function(e){e.fn.twoDP=function(){var t=function(t){var n=t.val();return t.hasClass("empty_zero")&&e.isEmpty(n)&&(n="0.00"),isNaN(n)||e.isEmpty(n)?n:parseFloat(n).toFixed(2)};return this.each(function(){var n=e(this);n.val(t(n))}),this}}(jQuery),function(e){e(function(){e.fn.enableAutoComplete=function(){return this.each(function(){var t=2,n=e(this),i=n.attr("data-autocomplete-url");if(n.parent().append(e('<div class="autocomplete-container"></div>')),n.keydown(function(t){var i=n.autocomplete("widget").is(":visible"),r=e.ui.keyCode;i||t.keyCode!=r.UP&&t.keyCode!=r.DOWN||t.stopImmediatePropagation()}).autocomplete({source:i,minLength:t,appendTo:n.parent().find(".autocomplete-container")}),n.hasClass("with_trigger")){var r=e('<a id="trigger">trigger</a>').click(function(){n.autocomplete("option","minLength",0),n.autocomplete("search",""),n.autocomplete("option","minLength",t),n.focus()});n.parent().append(r)}})},e("[data-autocomplete-url]").livequery(function(){e(this).enableAutoComplete()})})}(jQuery),function(e){e.ajaxPrefilter(function(e){return e.iframe?"iframe":void 0}),e.ajaxTransport("iframe",function(t){function n(){e(l).each(function(){this.remove()}),e(c).each(function(){this.disabled=!1}),i.attr("action",a||"").attr("target",o||"").attr("enctype",s||""),r.attr("src","javascript:false;").remove()}var i=null,r=null,a=null,o=null,s=null,l=[],c=[],u=e(t.files).filter(":file:enabled");return t.dataTypes.shift(),u.length?(u.each(function(){null!==i&&this.form!==i&&jQuery.error("All file fields must belong to the same form"),i=this.form}),i=e(i),a=i.attr("action"),o=i.attr("target"),s=i.attr("enctype"),i.find(":input:not(:submit)").each(function(){!this.disabled&&("file"!=this.type||u.index(this)<0)&&(this.disabled=!0,c.push(this))}),"string"==typeof t.data&&t.data.length>0&&jQuery.error("data must not be serialized"),e.each(t.data||{},function(t,n){e.isPlainObject(n)&&(t=n.name,n=n.value),l.push(e("<input type='hidden'>").attr("name",t).attr("value",n).appendTo(i))}),l.push(e("<input type='hidden' name='X-Requested-With'>").attr("value","IFrame").appendTo(i)),accepts=t.dataTypes[0]&&t.accepts[t.dataTypes[0]]?t.accepts[t.dataTypes[0]]+("*"!==t.dataTypes[0]?", */*; q=0.01":""):t.accepts["*"],l.push(e("<input type='hidden' name='X-Http-Accept'>").attr("value",accepts).appendTo(i)),{send:function(a,o){r=e("<iframe src='javascript:false;' name='iframe-"+e.now()+"' style='display:none'></iframe>"),r.bind("load",function(){r.unbind("load").bind("load",function(){var e=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,t=e.documentElement?e.documentElement:e.body,i=t.getElementsByTagName("textarea")[0],r=i?i.getAttribute("data-type"):null,a=200,s="OK",l={text:r?i.value:t?t.innerHTML:null},c="Content-Type: "+(r||"text/html");o(a,s,l,c),setTimeout(n,50)}),i.attr("action",t.url).attr("target",r.attr("name")).attr("enctype","multipart/form-data").get(0).submit()}),r.insertAfter(i)},abort:function(){null!==r&&(r.unbind("load").attr("src","javascript:false;"),n())}}):void 0})}(jQuery),function(t){var n;t.remotipart=n={setup:function(e){e.one("ajax:beforeSend.remotipart",function(i,r,a){return delete a.beforeSend,a.iframe=!0,a.files=t(t.rails.fileInputSelector,e),a.data=e.serializeArray(),a.processData=!1,void 0===a.dataType&&(a.dataType="script *"),a.data.push({name:"remotipart_submitted",value:!0}),t.rails.fire(e,"ajax:remotipartSubmit",[r,a])&&t.rails.ajax(a),n.teardown(e),!1}).data("remotipartSubmitted",!0)},teardown:function(e){e.unbind("ajax:beforeSend.remotipart").removeData("remotipartSubmitted")}},t("form").live("ajax:aborted:file",function(){var i=t(this);return n.setup(i),t.support.submitBubbles||t.rails.callFormSubmitBindings(i)!==!1?(t.rails.handleRemote(i),!1):t.rails.stopEverything(e)})}(jQuery),function(e){var t=function(e,t){e.slideToggle("fast",function(){n(e,t)})},n=function(e,t){e.is(":visible")&&i(t)},i=function(e){"object"==typeof _gaq&&_gaq.push(["_trackEvent",e,document.location.href])};e.fn.drawer=function(n){var i=this;return e(n).live("click",function(){return t(i,"help-drawer"),!1}),this}}(jQuery),function(e){e.smartPoller=function(t,n){var i=1e3,r=1e7,a=1.5;e.isFunction(t)&&(n=t,t=i),function o(){setTimeout(function(){n.call(this,o)},t),r>t&&(t*=a)}()}}(jQuery),function(e){e.readOnly=function(){e("a.button, a.add, a.addb, a.edit, a.delete, a.title_button, a.dataedit, a.datadelete").livequery(function(){e(this).not(".allowed_for_readonly").hide()}),e('input:not([name=authenticity_token],[name=user_id],[name=utf8],[name=csv-content],[name="date_range[start_date]"],[name="date_range[end_date]"]), button, textarea').livequery(function(){e(this).attr("disabled",!0)}),e("ul#itemstate a").livequery(function(){e(this).attr("href","#").removeAttr("data-method")})}}(jQuery),function(e){e(function(){e.fn.toggleInvitation=function(){var t=e(this),n=e(".invitation_area"),i=e('form input[type="submit"]'),r=t.data("submit-message")||" & Send Invitation",a=e(".uneditable a[href=#]",n),o=function(e){t.is(":checked")?(e?n.show():n.slideDown("fast"),label=i.val()+r):(e?n.hide():n.slideUp("fast"),label=i.val().replace(r,"")),i.val(label)};return o(!0),t.click(function(){o()}),a.click(function(){return!1}),this}})}(jQuery);/**
 * @license wysihtml5 v0.3.0
 * https://github.com/xing/wysihtml5
 *
 * Author: Christopher Blum (https://github.com/tiff)
 *
 * Copyright (C) 2012 XING AG
 * Licensed under the MIT license (MIT)
 *
 */
var wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"﻿",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};/**
 * @license Rangy, a cross-browser JavaScript range and selection library
 * http://code.google.com/p/rangy/
 *
 * Copyright 2011, Tim Down
 * Licensed under the MIT license.
 * Version: 1.2.2
 * Build date: 13 November 2011
 */
window.rangy=function(){function e(e,t){var n=typeof e[t];return n==h||!(n!=u||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=u||!e[t])}function n(e,t){return typeof e[t]!=d}function i(e){return function(t,n){for(var i=n.length;i--;)if(!e(t,n[i]))return!1;return!0}}function r(e){return e&&v(e,g)&&b(e,m)}function a(e){window.alert("Rangy not supported in your browser. Reason: "+e),_.initialized=!0,_.supported=!1}function o(e){var t="Rangy warning: "+e;_.config.alertOnWarn?window.alert(t):typeof window.console!=d&&typeof window.console.log!=d&&window.console.log(t)}function s(){if(!_.initialized){var n,i=!1,o=!1;e(document,"createRange")&&(n=document.createRange(),v(n,f)&&b(n,p)&&(i=!0),n.detach());var s=t(document,"body")?document.body:document.getElementsByTagName("body")[0];s&&e(s,"createTextRange")&&(n=s.createTextRange(),r(n)&&(o=!0)),i||o||a("Neither Range nor TextRange are implemented"),_.initialized=!0,_.features={implementsDomRange:i,implementsTextRange:o};for(var l=x.concat(w),c=0,u=l.length;u>c;++c)try{l[c](_)}catch(h){t(window,"console")&&e(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",h)}}}function l(e){e=e||window,s();for(var t=0,n=C.length;n>t;++t)C[t](e)}function c(e){this.name=e,this.initialized=!1,this.supported=!1}var u="object",h="function",d="undefined",p=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],f=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],m=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],g=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],v=i(e),y=i(t),b=i(n),_={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:v,areHostObjects:y,areHostProperties:b,isTextRange:r},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};_.fail=a,_.warn=o,{}.hasOwnProperty?_.util.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}:a("hasOwnProperty not supported");var w=[],x=[];_.init=s,_.addInitListener=function(e){_.initialized?e(_):w.push(e)};var C=[];_.addCreateMissingNativeApiListener=function(e){C.push(e)},_.createMissingNativeApi=l,c.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+e)},c.prototype.warn=function(e){_.warn("Module "+this.name+": "+e)},c.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},_.createModule=function(e,t){var n=new c(e);_.modules[e]=n,x.push(function(e){t(e,n),n.initialized=!0,n.supported=!0})},_.requireModules=function(e){for(var t,n,i=0,r=e.length;r>i;++i){if(n=e[i],t=_.modules[n],!(t&&t instanceof c))throw new Error("Module '"+n+"' not found");if(!t.supported)throw new Error("Module '"+n+"' not supported")}};var k=!1,T=function(){k||(k=!0,_.initialized||s())};return typeof window==d?(a("No window found"),void 0):typeof document==d?(a("No document found"),void 0):(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",T,!1),e(window,"addEventListener")?window.addEventListener("load",T,!1):e(window,"attachEvent")?window.attachEvent("onload",T):a("Window does not have required addEventListener or attachEvent method"),_)}(),rangy.createModule("DomUtil",function(e,t){function n(e){var t;return typeof e.namespaceURI==T||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function i(e){var t=e.parentNode;return 1==t.nodeType?t:null}function r(e){for(var t=0;e=e.previousSibling;)t++;return t}function a(e){var t;return c(e)?e.length:(t=e.childNodes)?t.length:0}function o(e,t){var n,i=[];for(n=e;n;n=n.parentNode)i.push(n);for(n=t;n;n=n.parentNode)if(A(i,n))return n;return null}function s(e,t,n){for(var i=n?t:t.parentNode;i;){if(i===e)return!0;i=i.parentNode}return!1}function l(e,t,n){for(var i,r=n?e:e.parentNode;r;){if(i=r.parentNode,i===t)return r;r=i}return null}function c(e){var t=e.nodeType;return 3==t||4==t||8==t}function u(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e}function h(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),u(n,e),n}function d(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=T)return e.ownerDocument;if(typeof e.document!=T)return e.document;if(e.parentNode)return d(e.parentNode);throw new Error("getDocument: no document found for node")}function p(e){var t=d(e);if(typeof t.defaultView!=T)return t.defaultView;if(typeof t.parentWindow!=T)return t.parentWindow;throw new Error("Cannot get a window object for node")}function f(e){if(typeof e.contentDocument!=T)return e.contentDocument;if(typeof e.contentWindow!=T)return e.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function m(e){if(typeof e.contentWindow!=T)return e.contentWindow;if(typeof e.contentDocument!=T)return e.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function g(e){return E.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]}function v(e){for(var t;t=e.parentNode;)e=t;return e}function y(e,t,n,i){var a,s,c,u,h;if(e==n)return t===i?0:i>t?-1:1;if(a=l(n,e,!0))return t<=r(a)?-1:1;if(a=l(e,n,!0))return r(a)<i?-1:1;if(s=o(e,n),c=e===s?s:l(e,s,!0),u=n===s?s:l(n,s,!0),c===u)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(h=s.firstChild;h;){if(h===c)return-1;if(h===u)return 1;h=h.nextSibling}throw new Error("Should not be here!")}function b(e){for(var t,n=d(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function _(e){if(!e)return"[No node]";if(c(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">["+e.childNodes.length+"]"}return e.nodeName}function w(e){this.root=e,this._next=e}function x(e){return new w(e)}function C(e,t){this.node=e,this.offset=t}function k(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var T="undefined",E=e.util;E.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),E.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var S=document.createElement("div");E.areHostMethods(S,["insertBefore","appendChild","cloneNode"]||!E.areHostObjects(S,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),E.isHostProperty(S,"innerHTML")||t.fail("Element is missing innerHTML property");var D=document.createTextNode("test");E.areHostMethods(D,["splitText","deleteData","insertData","appendData","cloneNode"]||!E.areHostObjects(S,["previousSibling","nextSibling","childNodes","parentNode"])||!E.areHostProperties(D,["data"]))||t.fail("Incomplete Text Node implementation");var A=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};w.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},C.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+_(this.node)+":"+this.offset+")]"}},k.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},k.prototype.toString=function(){return this.message},e.dom={arrayContains:A,isHtmlNamespace:n,parentElement:i,getNodeIndex:r,getNodeLength:a,getCommonAncestor:o,isAncestorOf:s,getClosestAncestorIn:l,isCharacterDataNode:c,insertAfter:u,splitDataNode:h,getDocument:d,getWindow:p,getIframeWindow:m,getIframeDocument:f,getBody:g,getRootContainer:v,comparePoints:y,inspectNode:_,fragmentFromNodeChildren:b,createIterator:x,DomPosition:C},e.DOMException=k}),rangy.createModule("DomRange",function(e){function t(e,t){return 3!=e.nodeType&&(I.isAncestorOf(e,t.startContainer,!0)||I.isAncestorOf(e,t.endContainer,!0))}function n(e){return I.getDocument(e.startContainer)}function i(e,t,n){var i=e._listeners[t];if(i)for(var r=0,a=i.length;a>r;++r)i[r].call(e,{target:e,args:n})}function r(e){return new L(e.parentNode,I.getNodeIndex(e))}function a(e){return new L(e.parentNode,I.getNodeIndex(e)+1)}function o(e,t,n){var i=11==e.nodeType?e.firstChild:e;return I.isCharacterDataNode(t)?n==t.length?I.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:I.splitDataNode(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),i}function s(e){for(var t,i,r,a=n(e.range).createDocumentFragment();i=e.next();){if(t=e.isPartiallySelectedSubtree(),i=i.cloneNode(!t),t&&(r=e.getSubtreeIterator(),i.appendChild(s(r)),r.detach(!0)),10==i.nodeType)throw new j("HIERARCHY_REQUEST_ERR");a.appendChild(i)}return a}function l(e,t,n){var i,r;n=n||{stop:!1};for(var a,o;a=e.next();)if(e.isPartiallySelectedSubtree()){if(t(a)===!1)return n.stop=!0,void 0;if(o=e.getSubtreeIterator(),l(o,t,n),o.detach(!0),n.stop)return}else for(i=I.createIterator(a);r=i.next();)if(t(r)===!1)return n.stop=!0,void 0}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach(!0)):e.remove()}function u(e){for(var t,i,r=n(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),i=e.getSubtreeIterator(),t.appendChild(u(i)),i.detach(!0)):e.remove(),10==t.nodeType)throw new j("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function h(e,t,n){var i,r=!(!t||!t.length),a=!!n;r&&(i=new RegExp("^("+t.join("|")+")$"));var o=[];return l(new p(e,!1),function(e){r&&!i.test(e.nodeType)||a&&!n(e)||o.push(e)}),o}function d(e){var t="undefined"==typeof e.getName?"Range":e.getName();return"["+t+"("+I.inspectNode(e.startContainer)+":"+e.startOffset+", "+I.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function p(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&I.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||I.isCharacterDataNode(this.sc)?I.getClosestAncestorIn(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||I.isCharacterDataNode(this.ec)?I.getClosestAncestorIn(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function f(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function m(e,t,n){this.nodes=h(e,t,n),this._next=this.nodes[0],this._position=0}function g(e){return function(t,n){for(var i,r=n?t:t.parentNode;r;){if(i=r.nodeType,I.arrayContains(e,i))return r;r=r.parentNode}return null}}function v(e,t){if(V(e,t))throw new f("INVALID_NODE_TYPE_ERR")}function y(e){if(!e.startContainer)throw new j("INVALID_STATE_ERR")}function b(e,t){if(!I.arrayContains(t,e.nodeType))throw new f("INVALID_NODE_TYPE_ERR")}function _(e,t){if(0>t||t>(I.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new j("INDEX_SIZE_ERR")}function w(e,t){if(q(e,!0)!==q(t,!0))throw new j("WRONG_DOCUMENT_ERR")}function x(e){if(Y(e,!0))throw new j("NO_MODIFICATION_ALLOWED_ERR")}function C(e,t){if(!e)throw new j(t)}function k(e){return!I.arrayContains(B,e.nodeType)&&!q(e,!0)}function T(e,t){return t<=(I.isCharacterDataNode(e)?e.length:e.childNodes.length)}function E(e){if(y(e),k(e.startContainer)||k(e.endContainer)||!T(e.startContainer,e.startOffset)||!T(e.endContainer,e.endOffset))throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function S(){}function D(e){e.START_TO_START=Z,e.START_TO_END=et,e.END_TO_END=tt,e.END_TO_START=nt,e.NODE_BEFORE=it,e.NODE_AFTER=rt,e.NODE_BEFORE_AND_AFTER=at,e.NODE_INSIDE=ot}function A(e){D(e),D(e.prototype)}function N(e,t){return function(){E(this);var n,i,r=this.startContainer,o=this.startOffset,s=this.commonAncestorContainer,c=new p(this,!0);r!==s&&(n=I.getClosestAncestorIn(r,s,!0),i=a(n),r=i.node,o=i.offset),l(c,x),c.reset();var u=e(c);return c.detach(),t(this,r,o,r,o),u}}function M(n,i,o){function s(e,t){return function(n){y(this),b(n,H),b(U(n),B);var i=(e?r:a)(n);(t?l:h)(this,i.node,i.offset)}}function l(e,t,n){var r=e.endContainer,a=e.endOffset;(t!==e.startContainer||n!==e.startOffset)&&((U(t)!=U(r)||1==I.comparePoints(t,n,r,a))&&(r=t,a=n),i(e,t,n,r,a))}function h(e,t,n){var r=e.startContainer,a=e.startOffset;(t!==e.endContainer||n!==e.endOffset)&&((U(t)!=U(r)||-1==I.comparePoints(t,n,r,a))&&(r=t,a=n),i(e,r,a,t,n))}function d(e,t,n){(t!==e.startContainer||n!==e.startOffset||t!==e.endContainer||n!==e.endOffset)&&i(e,t,n,t,n)}n.prototype=new S,e.util.extend(n.prototype,{setStart:function(e,t){y(this),v(e,!0),_(e,t),l(this,e,t)},setEnd:function(e,t){y(this),v(e,!0),_(e,t),h(this,e,t)},setStartBefore:s(!0,!0),setStartAfter:s(!1,!0),setEndBefore:s(!0,!1),setEndAfter:s(!1,!1),collapse:function(e){E(this),e?i(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):i(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){y(this),v(e,!0),i(this,e,0,e,I.getNodeLength(e))},selectNode:function(e){y(this),v(e,!1),b(e,H);var t=r(e),n=a(e);i(this,t.node,t.offset,n.node,n.offset)},extractContents:N(u,i),deleteContents:N(c,i),canSurroundContents:function(){E(this),x(this.startContainer),x(this.endContainer);var e=new p(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},detach:function(){o(this)},splitBoundaries:function(){E(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,r=this.endOffset,a=e===n;I.isCharacterDataNode(n)&&r>0&&r<n.length&&I.splitDataNode(n,r),I.isCharacterDataNode(e)&&t>0&&t<e.length&&(e=I.splitDataNode(e,t),a?(r-=t,n=e):n==e.parentNode&&r>=I.getNodeIndex(e)&&r++,t=0),i(this,e,t,n,r)},normalizeBoundaries:function(){E(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,r=this.endOffset,a=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(n=e,r=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},o=function(i){var a=i.previousSibling;if(a&&a.nodeType==i.nodeType){e=i;var o=i.length;if(t=a.length,i.insertData(0,a.data),a.parentNode.removeChild(a),e==n)r+=t,n=e;else if(n==i.parentNode){var s=I.getNodeIndex(i);r==s?(n=i,r=o):r>s&&r--}}},s=!0;if(I.isCharacterDataNode(n))n.length==r&&a(n);else{if(r>0){var l=n.childNodes[r-1];l&&I.isCharacterDataNode(l)&&a(l)}s=!this.collapsed}if(s){if(I.isCharacterDataNode(e))0==t&&o(e);else if(t<e.childNodes.length){var c=e.childNodes[t];c&&I.isCharacterDataNode(c)&&o(c)}}else e=n,t=r;i(this,e,t,n,r)},collapseToPoint:function(e,t){y(this),v(e,!0),_(e,t),d(this,e,t)}}),A(n)}function R(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:I.getCommonAncestor(e.startContainer,e.endContainer)}function P(e,t,n,r,a){var o=e.startContainer!==t||e.startOffset!==n,s=e.endContainer!==r||e.endOffset!==a;e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=a,R(e),i(e,"boundarychange",{startMoved:o,endMoved:s})}function O(e){y(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,i(e,"detach",null),e._listeners=null}function F(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},R(this)}e.requireModules(["DomUtil"]);var I=e.dom,L=I.DomPosition,j=e.DOMException;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,I.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!I.isCharacterDataNode(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){var e=this._current;return t(e,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse();else{e=new F(n(this.range));var t=this._current,i=t,r=0,a=t,o=I.getNodeLength(t);I.isAncestorOf(t,this.sc,!0)&&(i=this.sc,r=this.so),I.isAncestorOf(t,this.ec,!0)&&(a=this.ec,o=this.eo),P(e,i,r,a,o)}return new p(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},f.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},f.prototype.toString=function(){return this.message},m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var H=[1,3,4,5,7,8,10],B=[2,9,11],W=[5,6,10,12],z=[1,3,4,5,7,8,10,11],$=[1,3,4,5,7,8],U=I.getRootContainer,q=g([9,11]),Y=g(W),V=g([6,10,12]),X=document.createElement("style"),K=!1;try{X.innerHTML="<b>x</b>",K=3==X.firstChild.nodeType}catch(G){}e.features.htmlParsingConforms=K;var Q=K?function(e){var t=this.startContainer,n=I.getDocument(t);if(!t)throw new j("INVALID_STATE_ERR");var i=null;return 1==t.nodeType?i=t:I.isCharacterDataNode(t)&&(i=I.parentElement(t)),i=null===i||"HTML"==i.nodeName&&I.isHtmlNamespace(I.getDocument(i).documentElement)&&I.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1),i.innerHTML=e,I.fragmentFromNodeChildren(i)}:function(e){y(this);var t=n(this),i=t.createElement("body");return i.innerHTML=e,I.fragmentFromNodeChildren(i)},J=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Z=0,et=1,tt=2,nt=3,it=0,rt=1,at=2,ot=3;S.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){E(this),w(this.startContainer,t.startContainer);var n,i,r,a,o=e==nt||e==Z?"start":"end",s=e==et||e==Z?"start":"end";return n=this[o+"Container"],i=this[o+"Offset"],r=t[s+"Container"],a=t[s+"Offset"],I.comparePoints(n,i,r,a)},insertNode:function(e){if(E(this),b(e,z),x(this.startContainer),I.isAncestorOf(e,this.startContainer,!0))throw new j("HIERARCHY_REQUEST_ERR");var t=o(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){E(this);var e,t;if(this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&I.isCharacterDataNode(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=n(this).createDocumentFragment(),t.appendChild(e),t;var i=new p(this,!0);return e=s(i),i.detach(),e},canSurroundContents:function(){E(this),x(this.startContainer),x(this.endContainer);var e=new p(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},surroundContents:function(e){if(b(e,$),!this.canSurroundContents())throw new f("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);o(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){E(this);for(var e,t=new F(n(this)),i=J.length;i--;)e=J[i],t[e]=this[e];return t},toString:function(){E(this);var e=this.startContainer;if(e===this.endContainer&&I.isCharacterDataNode(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new p(this,!0);return l(n,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){E(this);var t=e.parentNode,n=I.getNodeIndex(e);if(!t)throw new j("NOT_FOUND_ERR");var i=this.comparePoint(t,n),r=this.comparePoint(t,n+1);return 0>i?r>0?at:it:r>0?rt:ot},comparePoint:function(e,t){return E(this),C(e,"HIERARCHY_REQUEST_ERR"),w(e,this.startContainer),I.comparePoints(e,t,this.startContainer,this.startOffset)<0?-1:I.comparePoints(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Q,toHtml:function(){E(this);var e=n(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){if(E(this),C(e,"NOT_FOUND_ERR"),I.getDocument(e)!==n(this))return!1;var i=e.parentNode,r=I.getNodeIndex(e);C(i,"NOT_FOUND_ERR");var a=I.comparePoints(i,r,this.endContainer,this.endOffset),o=I.comparePoints(i,r+1,this.startContainer,this.startOffset);return t?0>=a&&o>=0:0>a&&o>0},isPointInRange:function(e,t){return E(this),C(e,"HIERARCHY_REQUEST_ERR"),w(e,this.startContainer),I.comparePoints(e,t,this.startContainer,this.startOffset)>=0&&I.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){if(E(this),n(e)!=n(this))throw new j("WRONG_DOCUMENT_ERR");var i=I.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),r=I.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?0>=i&&r>=0:0>i&&r>0},intersection:function(e){if(this.intersectsRange(e)){var t=I.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=I.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange();return-1==t&&i.setStart(e.startContainer,e.startOffset),1==n&&i.setEnd(e.endContainer,e.endOffset),i}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return-1==I.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==I.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new f("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==ot},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,I.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var i=n.pop();t.setEnd(i,i.length);var r=this.containsRange(t);return t.detach(),r}return this.containsNodeContents(e)},createNodeIterator:function(e,t){return E(this),new m(this,e,t)},getNodes:function(e,t){return E(this),h(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){y(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){y(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return F.rangesEqual(this,e)},inspect:function(){return d(this)}},M(F,P,O),e.rangePrototype=S.prototype,F.rangeProperties=J,F.RangeIterator=p,F.copyComparisonConstants=A,F.createPrototypeRange=M,F.inspect=d,F.getRangeDocument=n,F.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},e.DomRange=F,e.RangeException=f}),rangy.createModule("WrappedRange",function(e){function t(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var i=n.parentElement();n=e.duplicate(),n.collapse(!1);var r=n.parentElement(),a=i==r?i:o.getCommonAncestor(i,r);return a==t?a:o.getCommonAncestor(t,a)}function n(e){return 0==e.compareEndPoints("StartToEnd",e)}function i(e,t,n,i){var r=e.duplicate();r.collapse(n);var a=r.parentElement();if(o.isAncestorOf(t,a,!0)||(a=t),!a.canHaveHTML)return new s(a.parentNode,o.getNodeIndex(a));var l,c,u,h,d,p=o.getDocument(a).createElement("span"),f=n?"StartToStart":"StartToEnd";do a.insertBefore(p,p.previousSibling),r.moveToElementText(p);while((l=r.compareEndPoints(f,e))>0&&p.previousSibling);if(d=p.nextSibling,-1==l&&d&&o.isCharacterDataNode(d)){r.setEndPoint(n?"EndToStart":"EndToEnd",e);var m;if(/[\r\n]/.test(d.data)){var g=r.duplicate(),v=g.text.replace(/\r\n/g,"\r").length;for(m=g.moveStart("character",v);-1==(l=g.compareEndPoints("StartToEnd",g));)m++,g.moveStart("character",1)}else m=r.text.length;h=new s(d,m)}else c=(i||!n)&&p.previousSibling,u=(i||n)&&p.nextSibling,h=u&&o.isCharacterDataNode(u)?new s(u,0):c&&o.isCharacterDataNode(c)?new s(c,c.length):new s(a,o.getNodeIndex(p));return p.parentNode.removeChild(p),h}function r(e,t){var n,i,r,a,s=e.offset,l=o.getDocument(e.node),c=l.body.createTextRange(),u=o.isCharacterDataNode(e.node);return u?(n=e.node,i=n.parentNode):(a=e.node.childNodes,n=s<a.length?a[s]:null,i=e.node),r=l.createElement("span"),r.innerHTML="&#feff;",n?i.insertBefore(r,n):i.appendChild(r),c.moveToElementText(r),c.collapse(!t),i.removeChild(r),u&&c[t?"moveStart":"moveEnd"]("character",s),c}e.requireModules(["DomUtil","DomRange"]);var a,o=e.dom,s=o.DomPosition,l=e.DomRange;if(!e.features.implementsDomRange||e.features.implementsTextRange&&e.config.preferTextRange){if(e.features.implementsTextRange){a=function(e){this.textRange=e,this.refresh()},a.prototype=new l(document),a.prototype.refresh=function(){var e,r,a=t(this.textRange);n(this.textRange)?r=e=i(this.textRange,a,!0,!0):(e=i(this.textRange,a,!0,!1),r=i(this.textRange,a,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(r.node,r.offset)},l.copyComparisonConstants(a);var c=function(){return this}();"undefined"==typeof c.Range&&(c.Range=a),e.createNativeRange=function(e){return e=e||document,e.body.createTextRange()}}}else!function(){function t(e){for(var t,n=u.length;n--;)t=u[n],e[t]=e.nativeRange[t]}function n(e,t,n,i,r){var a=e.startContainer!==t||e.startOffset!=n,o=e.endContainer!==i||e.endOffset!=r;(a||o)&&(e.setEnd(i,r),e.setStart(t,n))}function i(e){e.nativeRange.detach(),e.detached=!0;for(var t,n=u.length;n--;)t=u[n],e[t]=null}var r,s,c,u=l.rangeProperties;a=function(e){if(!e)throw new Error("Range must be specified");this.nativeRange=e,t(this)},l.createPrototypeRange(a,n,i),r=a.prototype,r.selectNode=function(e){this.nativeRange.selectNode(e),t(this)},r.deleteContents=function(){this.nativeRange.deleteContents(),t(this)},r.extractContents=function(){var e=this.nativeRange.extractContents();return t(this),e},r.cloneContents=function(){return this.nativeRange.cloneContents()},r.surroundContents=function(e){this.nativeRange.surroundContents(e),t(this)},r.collapse=function(e){this.nativeRange.collapse(e),t(this)},r.cloneRange=function(){return new a(this.nativeRange.cloneRange())},r.refresh=function(){t(this)},r.toString=function(){return this.nativeRange.toString()};var h=document.createTextNode("test");o.getBody(document).appendChild(h);var d=document.createRange();d.setStart(h,0),d.setEnd(h,0);try{d.setStart(h,1),s=!0,r.setStart=function(e,n){this.nativeRange.setStart(e,n),t(this)},r.setEnd=function(e,n){this.nativeRange.setEnd(e,n),t(this)},c=function(e){return function(n){this.nativeRange[e](n),t(this)}}}catch(p){s=!1,r.setStart=function(e,n){try{this.nativeRange.setStart(e,n)}catch(i){this.nativeRange.setEnd(e,n),this.nativeRange.setStart(e,n)}t(this)},r.setEnd=function(e,n){try{this.nativeRange.setEnd(e,n)}catch(i){this.nativeRange.setStart(e,n),this.nativeRange.setEnd(e,n)}t(this)},c=function(e,n){return function(i){try{this.nativeRange[e](i)}catch(r){this.nativeRange[n](i),this.nativeRange[e](i)}t(this)}}}r.setStartBefore=c("setStartBefore","setEndBefore"),r.setStartAfter=c("setStartAfter","setEndAfter"),r.setEndBefore=c("setEndBefore","setStartBefore"),r.setEndAfter=c("setEndAfter","setStartAfter"),d.selectNodeContents(h),r.selectNodeContents=d.startContainer==h&&d.endContainer==h&&0==d.startOffset&&d.endOffset==h.length?function(e){this.nativeRange.selectNodeContents(e),t(this)}:function(e){this.setStart(e,0),this.setEnd(e,l.getEndOffset(e))},d.selectNodeContents(h),d.setEnd(h,3);var f=document.createRange();f.selectNodeContents(h),f.setEnd(h,4),f.setStart(h,2),r.compareBoundaryPoints=-1==d.compareBoundaryPoints(d.START_TO_END,f)&1==d.compareBoundaryPoints(d.END_TO_START,f)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},e.util.isHostMethod(d,"createContextualFragment")&&(r.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),o.getBody(document).removeChild(h),d.detach(),f.detach()}(),e.createNativeRange=function(e){return e=e||document,e.createRange()};e.features.implementsTextRange&&(a.rangeToTextRange=function(e){if(e.collapsed){var t=r(new s(e.startContainer,e.startOffset),!0);return t}var n=r(new s(e.startContainer,e.startOffset),!0),i=r(new s(e.endContainer,e.endOffset),!1),a=o.getDocument(e.startContainer).body.createTextRange();return a.setEndPoint("StartToStart",n),a.setEndPoint("EndToEnd",i),a}),a.prototype.getName=function(){return"WrappedRange"},e.WrappedRange=a,e.createRange=function(t){return t=t||document,new a(e.createNativeRange(t))},e.createRangyRange=function(e){return e=e||document,new l(e)},e.createIframeRange=function(t){return e.createRange(o.getIframeDocument(t))},e.createIframeRangyRange=function(t){return e.createRangyRange(o.getIframeDocument(t))},e.addCreateMissingNativeApiListener(function(t){var n=t.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return e.createRange(this)}),n=t=null})}),rangy.createModule("WrappedSelection",function(e,t){function n(e){return(e||window).getSelection()}function i(e){return(e||window).document.selection}function r(e,t,n){var i=n?"end":"start",r=n?"start":"end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[r+"Container"],e.focusOffset=t[r+"Offset"]}function a(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function o(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function s(t){var n;return t instanceof k?(n=t._selectionNativeRange,n||(n=e.createNativeRange(x.getDocument(t.startContainer)),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset),t._selectionNativeRange=n,t.attachListener("detach",function(){this._selectionNativeRange=null}))):t instanceof T?n=t.nativeRange:e.features.implementsDomRange&&t instanceof x.getWindow(t.startContainer).Range&&(n=t),n}function l(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;n>t;++t)if(!x.isAncestorOf(e[0],e[t]))return!1;return!0}function c(e){var t=e.getNodes();if(!l(t))throw new Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return t[0]}function u(e){return!!e&&"undefined"!=typeof e.text}function h(e,t){var n=new T(t);e._ranges=[n],r(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function d(t){if(t._ranges.length=0,"None"==t.docSelection.type)o(t);else{var n=t.docSelection.createRange();if(u(n))h(t,n);else{t.rangeCount=n.length;for(var i,a=x.getDocument(n.item(0)),s=0;s<t.rangeCount;++s)i=e.createRange(a),i.selectNode(n.item(s)),t._ranges.push(i);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,r(t,t._ranges[t.rangeCount-1],!1)}}}function p(e,t){for(var n=e.docSelection.createRange(),i=c(t),r=x.getDocument(n.item(0)),a=x.getBody(r).createControlRange(),o=0,s=n.length;s>o;++o)a.add(n.item(o));try{a.add(i)}catch(l){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}a.select(),d(e)}function f(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function m(e,t){for(var n,i=x.getDocument(t[0].startContainer),r=x.getBody(i).createControlRange(),a=0;rangeCount>a;++a){n=c(t[a]);try{r.add(n)}catch(o){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")
}}r.select(),d(e)}function g(e,t){if(e.anchorNode&&x.getDocument(e.anchorNode)!==x.getDocument(t))throw new E("WRONG_DOCUMENT_ERR")}function v(e){var t=[],n=new S(e.anchorNode,e.anchorOffset),i=new S(e.focusNode,e.focusOffset),r="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var a=0,o=e.rangeCount;o>a;++a)t[a]=k.inspect(e.getRangeAt(a));return"["+r+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]),e.config.checkSelectionRanges=!0;var y,b,_="boolean",w="_rangySelection",x=e.dom,C=e.util,k=e.DomRange,T=e.WrappedRange,E=e.DOMException,S=x.DomPosition,D="Control",A=e.util.isHostMethod(window,"getSelection"),N=e.util.isHostObject(document,"selection"),M=N&&(!A||e.config.preferTextRange);M?(y=i,e.isSelectionValid=function(e){var t=(e||window).document,n=t.selection;return"None"!=n.type||x.getDocument(n.createRange().parentElement())==t}):A?(y=n,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=y;var R=y(),P=e.createNativeRange(document),O=x.getBody(document),F=C.areHostObjects(R,["anchorNode","focusNode"]&&C.areHostProperties(R,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=F;var I=C.isHostMethod(R,"extend");e.features.selectionHasExtend=I;var L="number"==typeof R.rangeCount;e.features.selectionHasRangeCount=L;var j=!1,H=!0;C.areHostMethods(R,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof R.rangeCount&&e.features.implementsDomRange&&!function(){var e=document.createElement("iframe");O.appendChild(e);var t=x.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var n=x.getIframeWindow(e).getSelection(),i=t.documentElement,r=i.lastChild,a=r.firstChild,o=t.createRange();o.setStart(a,1),o.collapse(!0),n.addRange(o),H=1==n.rangeCount,n.removeAllRanges();var s=o.cloneRange();o.setStart(a,0),s.setEnd(a,2),n.addRange(o),n.addRange(s),j=2==n.rangeCount,o.detach(),s.detach(),O.removeChild(e)}(),e.features.selectionSupportsMultipleRanges=j,e.features.collapsedNonEditableSelectionsSupported=H;var B,W=!1;O&&C.isHostMethod(O,"createControlRange")&&(B=O.createControlRange(),C.areHostProperties(B,["item","add"])&&(W=!0)),e.features.implementsControlRange=W,b=F?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};var z;C.isHostMethod(R,"getRangeAt")?z=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:F&&(z=function(t){var n=x.getDocument(t.anchorNode),i=e.createRange(n);return i.setStart(t.anchorNode,t.anchorOffset),i.setEnd(t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&(i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset)),i}),e.getSelection=function(e){e=e||window;var t=e[w],n=y(e),r=N?i(e):null;return t?(t.nativeSelection=n,t.docSelection=r,t.refresh(e)):(t=new f(n,r,e),e[w]=t),t},e.getIframeSelection=function(t){return e.getSelection(x.getIframeWindow(t))};var $=f.prototype;if(!M&&F&&C.areHostMethods(R,["removeAllRanges","addRange"])){$.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),o(this)};var U=function(t,n){var i=k.getRangeDocument(n),r=e.createRange(i);r.collapseToPoint(n.endContainer,n.endOffset),t.nativeSelection.addRange(s(r)),t.nativeSelection.extend(n.startContainer,n.startOffset),t.refresh()};$.addRange=L?function(t,n){if(W&&N&&this.docSelection.type==D)p(this,t);else if(n&&I)U(this,t);else{var i;if(j?i=this.rangeCount:(this.removeAllRanges(),i=0),this.nativeSelection.addRange(s(t)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==i+1){if(e.config.checkSelectionRanges){var a=z(this.nativeSelection,this.rangeCount-1);a&&!k.rangesEqual(a,t)&&(t=new T(a))}this._ranges[this.rangeCount-1]=t,r(this,t,V(this.nativeSelection)),this.isCollapsed=b(this)}else this.refresh()}}:function(e,t){t&&I?U(this,e):(this.nativeSelection.addRange(s(e)),this.refresh())},$.setRanges=function(e){if(W&&e.length>1)m(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;n>t;++t)this.addRange(e[t])}}}else{if(!(C.isHostMethod(R,"empty")&&C.isHostMethod(P,"select")&&W&&M))return t.fail("No means of selecting a Range or TextRange was found"),!1;$.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=x.getDocument(this.anchorNode);else if(this.docSelection.type==D){var t=this.docSelection.createRange();t.length&&(e=x.getDocument(t.item(0)).body.createTextRange())}if(e){var n=e.body.createTextRange();n.select(),this.docSelection.empty()}}}catch(i){}o(this)},$.addRange=function(e){this.docSelection.type==D?p(this,e):(T.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,r(this,e,!1))},$.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?m(this,e):t&&this.addRange(e[0])}}$.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new E("INDEX_SIZE_ERR");return this._ranges[e]};var q;if(M)q=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=x.getBody(t.win.document).createTextRange(),n.collapse(!0)),t.docSelection.type==D?d(t):u(n)?h(t,n):o(t)};else if(C.isHostMethod(R,"getRangeAt")&&"number"==typeof R.rangeCount)q=function(t){if(W&&N&&t.docSelection.type==D)d(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,i=t.rangeCount;i>n;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));r(t,t._ranges[t.rangeCount-1],V(t.nativeSelection)),t.isCollapsed=b(t)}else o(t)};else{if(!F||typeof R.isCollapsed!=_||typeof P.collapsed!=_||!e.features.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;q=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=z(n,0),e._ranges=[t],e.rangeCount=1,a(e),e.isCollapsed=b(e)):o(e)}}$.refresh=function(e){var t=e?this._ranges.slice(0):null;if(q(this),e){var n=t.length;if(n!=this._ranges.length)return!1;for(;n--;)if(!k.rangesEqual(t[n],this._ranges[n]))return!1;return!0}};var Y=function(e,t){var n=e.getAllRanges(),i=!1;e.removeAllRanges();for(var r=0,a=n.length;a>r;++r)i||t!==n[r]?e.addRange(n[r]):i=!0;e.rangeCount||o(e)};$.removeRange=W?function(e){if(this.docSelection.type==D){for(var t,n=this.docSelection.createRange(),i=c(e),r=x.getDocument(n.item(0)),a=x.getBody(r).createControlRange(),o=!1,s=0,l=n.length;l>s;++s)t=n.item(s),t!==i||o?a.add(n.item(s)):o=!0;a.select(),d(this)}else Y(this,e)}:function(e){Y(this,e)};var V;!M&&F&&e.features.implementsDomRange?(V=function(e){var t=!1;return e.anchorNode&&(t=1==x.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t},$.isBackwards=function(){return V(this)}):V=$.isBackwards=function(){return!1},$.toString=function(){for(var e=[],t=0,n=this.rangeCount;n>t;++t)e[t]=""+this._ranges[t];return e.join("")},$.collapse=function(t,n){g(this,t);var i=e.createRange(x.getDocument(t));i.collapseToPoint(t,n),this.removeAllRanges(),this.addRange(i),this.isCollapsed=!0},$.collapseToStart=function(){if(!this.rangeCount)throw new E("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},$.collapseToEnd=function(){if(!this.rangeCount)throw new E("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},$.selectAllChildren=function(t){g(this,t);var n=e.createRange(x.getDocument(t));n.selectNodeContents(t),this.removeAllRanges(),this.addRange(n)},$.deleteFromDocument=function(){if(W&&N&&this.docSelection.type==D){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),e.parentNode.removeChild(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var i=0,r=n.length;r>i;++i)n[i].deleteContents();this.addRange(n[r-1])}},$.getAllRanges=function(){return this._ranges.slice(0)},$.setSingleRange=function(e){this.setRanges([e])},$.containsNode=function(e,t){for(var n=0,i=this._ranges.length;i>n;++n)if(this._ranges[n].containsNode(e,t))return!0;return!1},$.toHtml=function(){var e="";if(this.rangeCount){for(var t=k.getRangeDocument(this._ranges[0]).createElement("div"),n=0,i=this._ranges.length;i>n;++n)t.appendChild(this._ranges[n].cloneContents());e=t.innerHTML}return e},$.getName=function(){return"WrappedSelection"},$.inspect=function(){return v(this)},$.detach=function(){this.win[w]=null,this.win=this.anchorNode=this.focusNode=null},f.inspect=v,e.Selection=f,e.selectionPrototype=$,e.addCreateMissingNativeApiListener(function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return e.getSelection(this)}),t=null})});/*
	Base.js, version 1.1a
	Copyright 2006-2010, Dean Edwards
	License: http://www.opensource.org/licenses/mit-license.php
*/
var Base=function(){};Base.extend=function(e,t){var n=Base.prototype.extend;Base._prototyping=!0;var i=new this;n.call(i,e),i.base=function(){},delete Base._prototyping;var r=i.constructor,a=i.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==a)this._constructing=!0,r.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||n).call(arguments[0],i)};return a.ancestor=this,a.extend=this.extend,a.forEach=this.forEach,a.implement=this.implement,a.prototype=i,a.toString=this.toString,a.valueOf=function(e){return"object"==e?a:r.valueOf()},n.call(a,t),"function"==typeof a.init&&a.init(),a},Base.prototype={extend:function(e,t){if(arguments.length>1){var n=this[e];if(n&&"function"==typeof t&&(!n.valueOf||n.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var i=t.valueOf();t=function(){var e=this.base||Base.prototype.base;this.base=n;var t=i.apply(this,arguments);return this.base=e,t},t.valueOf=function(e){return"object"==e?t:i},t.toString=Base.toString}this[e]=t}else if(e){var r=Base.prototype.extend;Base._prototyping||"function"==typeof this||(r=this.extend||r);for(var a={toSource:null},o=["constructor","toString","valueOf"],s=Base._prototyping?0:1;l=o[s++];)e[l]!=a[l]&&r.call(this,l,e[l]);for(var l in e)a[l]||r.call(this,l,e[l])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var i in e)void 0===this.prototype[i]&&t.call(n,e[i],i,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}}),wysihtml5.browser=function(){function e(e){return(/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/)||[,0])[1]}var t=navigator.userAgent,n=document.createElement("div"),i=-1!==t.indexOf("MSIE")&&-1===t.indexOf("Opera"),r=-1!==t.indexOf("Gecko")&&-1===t.indexOf("KHTML"),a=-1!==t.indexOf("AppleWebKit/"),o=-1!==t.indexOf("Chrome/"),s=-1!==t.indexOf("Opera/");return{USER_AGENT:t,supported:function(){var t=this.USER_AGENT.toLowerCase(),i="contentEditable"in n,r=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,a=document.querySelector&&document.querySelectorAll,o=this.isIos()&&e(t)<5||-1!==t.indexOf("opera mobi")||-1!==t.indexOf("hpwos/");return i&&r&&a&&!o},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var e=this.USER_AGENT.toLowerCase();return-1!==e.indexOf("webkit")&&-1!==e.indexOf("mobile")},supportsSandboxedIframes:function(){return i},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!r},hasCurrentStyleProperty:function(){return"currentStyle"in n},insertsLineBreaksOnReturn:function(){return r},supportsPlaceholderAttributeOn:function(e){return"placeholder"in e},supportsEvent:function(e){return"on"+e in n||function(){return n.setAttribute("on"+e,"return;"),"function"==typeof n["on"+e]}()},supportsEventsInIframeCorrectly:function(){return!s},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return a||r},supportsDataTransfer:function(){try{return a&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(e){return!1}},supportsHTML5Tags:function(e){var t=e.createElement("div"),n="<article>foo</article>";return t.innerHTML=n,t.innerHTML.toLowerCase()===n},supportsCommand:function(){var e={formatBlock:i,insertUnorderedList:i||s||a,insertOrderedList:i||s||a},t={insertHTML:r};return function(n,i){var r=e[i];if(!r){try{return n.queryCommandSupported(i)}catch(a){}try{return n.queryCommandEnabled(i)}catch(o){return!!t[i]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return i},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return r||s||a},supportsGetAttributeCorrectly:function(){var e=document.createElement("td");return"1"!=e.getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return r||i||s},clearsListsInContentEditableCorrectly:function(){return r||i||a},autoScrollsToCaret:function(){return!a},autoClosesUnclosedTags:function(){var e,t,i=n.cloneNode(!1);return i.innerHTML="<p><div></div>",t=i.innerHTML.toLowerCase(),e="<p></p><div></div>"===t||"<p><div></div></p>"===t,this.autoClosesUnclosedTags=function(){return e},e},supportsNativeGetElementsByClassName:function(){return-1!==String(document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},supportsClassList:function(){return"classList"in n},needsSpaceAfterLineBreak:function(){return s},supportsSpeechApiOn:function(e){var n=t.match(/Chrome\/(\d+)/)||[,0];return n[1]>=11&&("onwebkitspeechchange"in e||"speech"in e)},crashesWhenDefineProperty:function(e){return i&&("XMLHttpRequest"===e||"XDomainRequest"===e)},doesAsyncFocus:function(){return i},hasProblemsSettingCaretAfterImg:function(){return i},hasUndoInContextMenu:function(){return r||o||s}}}(),wysihtml5.lang.array=function(e){return{contains:function(t){if(e.indexOf)return-1!==e.indexOf(t);for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return!0;return!1},without:function(t){t=wysihtml5.lang.array(t);for(var n=[],i=0,r=e.length;r>i;i++)t.contains(e[i])||n.push(e[i]);return n},get:function(){for(var t=0,n=e.length,i=[];n>t;t++)i.push(e[t]);return i}}},wysihtml5.lang.Dispatcher=Base.extend({observe:function(e,t){return this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t),this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(e,t){this.events=this.events||{};for(var n=this.events[e]||[],i=0;i<n.length;i++)n[i].call(this,t);return this},stopObserving:function(e,t){this.events=this.events||{};var n,i,r=0;if(e){for(n=this.events[e]||[],i=[];r<n.length;r++)n[r]!==t&&t&&i.push(n[r]);this.events[e]=i}else this.events={};return this}}),wysihtml5.lang.object=function(e){return{merge:function(t){for(var n in t)e[n]=t[n];return this},get:function(){return e},clone:function(){var t,n={};for(t in e)n[t]=e[t];return n},isArray:function(){return"[object Array]"===Object.prototype.toString.call(e)}}},function(){var e=/^\s+/,t=/\s+$/;wysihtml5.lang.string=function(n){return n=String(n),{trim:function(){return n.replace(e,"").replace(t,"")},interpolate:function(e){for(var t in e)n=this.replace("#{"+t+"}").by(e[t]);return n},replace:function(e){return{by:function(t){return n.split(e).join(t)}}}}}}(),function(e){function t(e){return a(e)?e:(e===e.ownerDocument.documentElement&&(e=e.ownerDocument.body),o(e))}function n(e){return e.replace(l,function(e,t){var n=(t.match(c)||[])[1]||"",i=h[n];t=t.replace(c,""),t.split(i).length>t.split(n).length&&(t+=n,n="");var r=t,a=t;return t.length>u&&(a=a.substr(0,u)+"..."),"www."===r.substr(0,4)&&(r="http://"+r),'<a href="'+r+'">'+a+"</a>"+n})}function i(e){var t=e._wysihtml5_tempElement;return t||(t=e._wysihtml5_tempElement=e.createElement("div")),t}function r(e){var t=e.parentNode,r=i(t.ownerDocument);for(r.innerHTML="<span></span>"+n(e.data),r.removeChild(r.firstChild);r.firstChild;)t.insertBefore(r.firstChild,e);t.removeChild(e)}function a(e){for(var t;e.parentNode;){if(e=e.parentNode,t=e.nodeName,s.contains(t))return!0;if("body"===t)return!1}return!1}function o(t){if(!s.contains(t.nodeName)){if(t.nodeType===e.TEXT_NODE&&t.data.match(l))return r(t),void 0;for(var n=e.lang.array(t.childNodes).get(),i=n.length,a=0;i>a;a++)o(n[a]);return t}}var s=e.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),l=/((https?:\/\/|www\.)[^\s<]{3,})/gi,c=/([^\w\/\-](,?))$/i,u=100,h={")":"(","]":"[","}":"{"};e.dom.autoLink=t,e.dom.autoLink.URL_REG_EXP=l}(wysihtml5),function(e){var t=e.browser.supportsClassList(),n=e.dom;n.addClass=function(e,i){return t?e.classList.add(i):(n.hasClass(e,i)||(e.className+=" "+i),void 0)},n.removeClass=function(e,n){return t?e.classList.remove(n):(e.className=e.className.replace(new RegExp("(^|\\s+)"+n+"(\\s+|$)")," "),void 0)},n.hasClass=function(e,n){if(t)return e.classList.contains(n);var i=e.className;return i.length>0&&(i==n||new RegExp("(^|\\s)"+n+"(\\s|$)").test(i))}}(wysihtml5),wysihtml5.dom.contains=function(){var e=document.documentElement;return e.contains?function(e,t){return t.nodeType!==wysihtml5.ELEMENT_NODE&&(t=t.parentNode),e!==t&&e.contains(t)}:e.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:void 0}(),wysihtml5.dom.convertToList=function(){function e(e,t){var n=e.createElement("li");return t.appendChild(n),n}function t(e,t){return e.createElement(t)}function n(n,i){if("UL"===n.nodeName||"OL"===n.nodeName||"MENU"===n.nodeName)return n;var r,a,o,s,l,c,u,h,d,p=n.ownerDocument,f=t(p,i),m=n.querySelectorAll("br"),g=m.length;for(d=0;g>d;d++)for(s=m[d];(l=s.parentNode)&&l!==n&&l.lastChild===s;){if("block"===wysihtml5.dom.getStyle("display").from(l)){l.removeChild(s);break}wysihtml5.dom.insert(s).after(s.parentNode)}for(r=wysihtml5.lang.array(n.childNodes).get(),a=r.length,d=0;a>d;d++)h=h||e(p,f),o=r[d],c="block"===wysihtml5.dom.getStyle("display").from(o),u="BR"===o.nodeName,c?(h=h.firstChild?e(p,f):h,h.appendChild(o),h=null):u?h=h.firstChild?null:h:h.appendChild(o);return n.parentNode.replaceChild(f,n),f}return n}(),wysihtml5.dom.copyAttributes=function(e){return{from:function(t){return{to:function(n){for(var i,r=0,a=e.length;a>r;r++)i=e[r],"undefined"!=typeof t[i]&&""!==t[i]&&(n[i]=t[i]);return{andTo:arguments.callee}}}}}},function(e){var t=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],n=function(t){return i(t)?parseInt(e.getStyle("width").from(t),10)<t.offsetWidth:!1},i=function(n){for(var i=0,r=t.length;r>i;i++)if("border-box"===e.getStyle(t[i]).from(n))return t[i]};e.copyStyles=function(i){return{from:function(r){n(r)&&(i=wysihtml5.lang.array(i).without(t));for(var a,o="",s=i.length,l=0;s>l;l++)a=i[l],o+=a+":"+e.getStyle(a).from(r)+";";return{to:function(t){return e.setStyles(o).on(t),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(e){e.dom.delegate=function(t,n,i,r){return e.dom.observe(t,i,function(i){for(var a=i.target,o=e.lang.array(t.querySelectorAll(n));a&&a!==t;){if(o.contains(a)){r.call(a,i);break}a=a.parentNode}})}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var e=function(e,t){var n=t.createElement("div");n.style.display="none",t.body.appendChild(n);try{n.innerHTML=e}catch(i){}return t.body.removeChild(n),n},t=function(e){if(!e._wysihtml5_supportsHTML5Tags){for(var t=0,i=n.length;i>t;t++)e.createElement(n[t]);e._wysihtml5_supportsHTML5Tags=!0}},n=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(n,i){i=i||document;var r;return"object"==typeof n&&n.nodeType?(r=i.createElement("div"),r.appendChild(n)):wysihtml5.browser.supportsHTML5Tags(i)?(r=i.createElement("div"),r.innerHTML=n):(t(i),r=e(n,i)),r}}(),wysihtml5.dom.getParentElement=function(){function e(e,t){return t&&t.length?"string"==typeof t?e===t:wysihtml5.lang.array(t).contains(e):!0}function t(e){return e.nodeType===wysihtml5.ELEMENT_NODE}function n(e,t,n){var i=(e.className||"").match(n)||[];return t?i[i.length-1]===t:!!i.length}function i(t,n,i){for(;i--&&t&&"BODY"!==t.nodeName;){if(e(t.nodeName,n))return t;t=t.parentNode}return null}function r(i,r,a,o,s){for(;s--&&i&&"BODY"!==i.nodeName;){if(t(i)&&e(i.nodeName,r)&&n(i,a,o))return i;i=i.parentNode}return null}return function(e,t,n){return n=n||50,t.className||t.classRegExp?r(e,t.nodeName,t.className,t.classRegExp,n):i(e,t.nodeName,n)}}(),wysihtml5.dom.getStyle=function(){function e(e){return e.replace(n,function(e){return e.charAt(1).toUpperCase()})}var t={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},n=/\-[a-z]/g;return function(n){return{from:function(i){if(i.nodeType===wysihtml5.ELEMENT_NODE){var r=i.ownerDocument,a=t[n]||e(n),o=i.style,s=i.currentStyle,l=o[a];if(l)return l;if(s)try{return s[a]}catch(c){}var u,h,d=r.defaultView||r.parentWindow,p=("height"===n||"width"===n)&&"TEXTAREA"===i.nodeName;return d.getComputedStyle?(p&&(u=o.overflow,o.overflow="hidden"),h=d.getComputedStyle(i,null).getPropertyValue(n),p&&(o.overflow=u||""),h):void 0}}}}}(),wysihtml5.dom.hasElementWithTagName=function(){function e(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=n++)}var t={},n=1;return function(n,i){var r=e(n)+":"+i,a=t[r];return a||(a=t[r]=n.getElementsByTagName(i)),a.length>0}}(),function(e){function t(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=i++)}var n={},i=1;e.dom.hasElementWithClassName=function(i,r){if(!e.browser.supportsNativeGetElementsByClassName())return!!i.querySelector("."+r);var a=t(i)+":"+r,o=n[a];return o||(o=n[a]=i.getElementsByClassName(r)),o.length>0}}(wysihtml5),wysihtml5.dom.insert=function(e){return{after:function(t){t.parentNode.insertBefore(e,t.nextSibling)},before:function(t){t.parentNode.insertBefore(e,t)},into:function(t){t.appendChild(e)}}},wysihtml5.dom.insertCSS=function(e){return e=e.join("\n"),{into:function(t){var n=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),n&&n.appendChild(i)}}},wysihtml5.dom.observe=function(e,t,n){t="string"==typeof t?[t]:t;for(var i,r,a=0,o=t.length;o>a;a++)r=t[a],e.addEventListener?e.addEventListener(r,n,!1):(i=function(t){"target"in t||(t.target=t.srcElement),t.preventDefault=t.preventDefault||function(){this.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0},n.call(e,t)},e.attachEvent("on"+r,i));return{stop:function(){for(var r,a=0,o=t.length;o>a;a++)r=t[a],e.removeEventListener?e.removeEventListener(r,n,!1):e.detachEvent("on"+r,i)}}},wysihtml5.dom.parse=function(){function e(e,n,i,r){wysihtml5.lang.object(h).merge(u).merge(n).get(),i=i||e.ownerDocument||document;var a,o,s,l=i.createDocumentFragment(),c="string"==typeof e;for(a=c?wysihtml5.dom.getAsDom(e,i):e;a.firstChild;)s=a.firstChild,a.removeChild(s),o=t(s,r),o&&l.appendChild(o);return a.innerHTML="",a.appendChild(l),c?wysihtml5.quirks.getCorrectInnerHTML(a):a}function t(e,n){var i,r=e.nodeType,a=e.childNodes,o=a.length,c=s[r],u=0;if(i=c&&c(e),!i)return null;for(u=0;o>u;u++)newChild=t(a[u],n),newChild&&i.appendChild(newChild);return n&&i.childNodes.length<=1&&i.nodeName.toLowerCase()===l&&!i.attributes.length?i.firstChild:i}function n(e){var t,n,r=h.tags,a=e.nodeName.toLowerCase(),o=e.scopeName;if(e._wysihtml5)return null;if(e._wysihtml5=1,"wysihtml5-temp"===e.className)return null;if(o&&"HTML"!=o&&(a=o+":"+a),"outerHTML"in e&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==e.nodeName||"</p>"===e.outerHTML.slice(-4).toLowerCase()||(a="div")),a in r){if(t=r[a],!t||t.remove)return null;t="string"==typeof t?{rename_tag:t}:t}else{if(!e.firstChild)return null;t={rename_tag:l}}return n=e.ownerDocument.createElement(t.rename_tag||a),i(e,n,t),e=null,n}function i(e,t,n){var i,a,o,s,l,u,d,m={},g=n.set_class,v=n.add_class,y=n.set_attributes,b=n.check_attributes,_=h.classes,w=0,x=[],C=[],k=[],T=[];if(y&&(m=wysihtml5.lang.object(y).clone()),b)for(l in b)d=p[b[l]],d&&(u=d(r(e,l)),"string"==typeof u&&(m[l]=u));if(g&&x.push(g),v)for(l in v)d=f[v[l]],d&&(s=d(r(e,l)),"string"==typeof s&&x.push(s));for(_["_wysihtml5-temp-placeholder"]=1,T=e.getAttribute("class"),T&&(x=x.concat(T.split(c))),i=x.length;i>w;w++)o=x[w],_[o]&&C.push(o);for(a=C.length;a--;)o=C[a],wysihtml5.lang.array(k).contains(o)||k.unshift(o);k.length&&(m["class"]=k.join(" "));for(l in m)try{t.setAttribute(l,m[l])}catch(E){}m.src&&("undefined"!=typeof m.width&&t.setAttribute("width",m.width),"undefined"!=typeof m.height&&t.setAttribute("height",m.height))}function r(e,t){t=t.toLowerCase();var n=e.nodeName;if("IMG"==n&&"src"==t&&a(e)===!0)return e.src;if(d&&"outerHTML"in e){var i=e.outerHTML.toLowerCase(),r=-1!=i.indexOf(" "+t+"=");return r?e.getAttribute(t):null}return e.getAttribute(t)}function a(e){try{return e.complete&&!e.mozMatchesSelector(":-moz-broken")}catch(t){if(e.complete&&"complete"===e.readyState)return!0}}function o(e){return e.ownerDocument.createTextNode(e.data)}var s={1:n,3:o},l="span",c=/\s+/,u={tags:{},classes:{}},h={},d=!wysihtml5.browser.supportsGetAttributeCorrectly(),p={url:function(){var e=/^https?:\/\/|^\[[a-z_]+\]$/i;return function(t){return t&&t.match(e)?t.replace(e,function(e){return e.toLowerCase()}):null}}(),alt:function(){var e=/[^ a-z0-9_\-]/gi;return function(t){return t?t.replace(e,""):""}}(),numbers:function(){var e=/\D/g;return function(t){return t=(t||"").replace(e,""),t||null}}(),style:function(){return function(e){return e}}()},f={align_img:function(){var e={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return e[String(t).toLowerCase()]}}(),align_text:function(){var e={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return e[String(t).toLowerCase()]}}(),clear_br:function(){var e={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return e[String(t).toLowerCase()]}}(),size_font:function(){var e={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return e[String(t).charAt(0)]}}()};return e}(),wysihtml5.dom.removeEmptyTextNodes=function(e){for(var t,n=wysihtml5.lang.array(e.childNodes).get(),i=n.length,r=0;i>r;r++)t=n[r],t.nodeType===wysihtml5.TEXT_NODE&&""===t.data&&t.parentNode.removeChild(t)},wysihtml5.dom.renameElement=function(e,t){for(var n,i=e.ownerDocument.createElement(t);n=e.firstChild;)i.appendChild(n);return wysihtml5.dom.copyAttributes(["align","className"]).from(e).to(i),e.parentNode.replaceChild(i,e),i},wysihtml5.dom.replaceWithChildNodes=function(e){if(e.parentNode){if(!e.firstChild)return e.parentNode.removeChild(e),void 0;for(var t=e.ownerDocument.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e),e=t=null}},function(e){function t(t){return"block"===e.getStyle("display").from(t)}function n(e){return"BR"===e.nodeName}function i(e){var t=e.ownerDocument.createElement("br");e.appendChild(t)}function r(e){if("MENU"===e.nodeName||"UL"===e.nodeName||"OL"===e.nodeName){var r,a,o,s,l,c=e.ownerDocument,u=c.createDocumentFragment(),h=e.previousElementSibling||e.previousSibling;for(h&&!t(h)&&i(u);l=e.firstChild;){for(a=l.lastChild;r=l.firstChild;)o=r===a,s=o&&!t(r)&&!n(r),u.appendChild(r),s&&i(u);l.parentNode.removeChild(l)}e.parentNode.replaceChild(u,e)}}e.resolveList=r}(wysihtml5.dom),function(e){var t=document,n=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],i=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],r=["referrer","write","open","close"];e.dom.Sandbox=Base.extend({constructor:function(t,n){this.callback=t||e.EMPTY_FUNCTION,this.config=e.lang.object({}).merge(n).get(),this.iframe=this._createIframe()},insertInto:function(e){"string"==typeof e&&(e=t.getElementById(e)),e.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var n=this,i=t.createElement("iframe");return i.className="wysihtml5-sandbox",e.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(i),e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(i.src="javascript:'<html></html>'"),i.onload=function(){i.onreadystatechange=i.onload=null,n._onLoadIframe(i)},i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&(i.onreadystatechange=i.onload=null,n._onLoadIframe(i))},i},_onLoadIframe:function(a){if(e.dom.contains(t.documentElement,a)){var o=this,s=a.contentWindow,l=a.contentWindow.document,c=t.characterSet||t.charset||"utf-8",u=this._getHtml({charset:c,stylesheets:this.config.stylesheets});if(l.open("text/html","replace"),l.write(u),l.close(),this.getWindow=function(){return a.contentWindow},this.getDocument=function(){return a.contentWindow.document},s.onerror=function(e,t,n){throw new Error("wysihtml5.Sandbox: "+e,t,n)},!e.browser.supportsSandboxedIframes()){var h,d;for(h=0,d=n.length;d>h;h++)this._unset(s,n[h]);for(h=0,d=i.length;d>h;h++)this._unset(s,i[h],e.EMPTY_FUNCTION);for(h=0,d=r.length;d>h;h++)this._unset(l,r[h]);this._unset(l,"cookie","",!0)}this.loaded=!0,setTimeout(function(){o.callback(o)},0)}},_getHtml:function(t){var n,i=t.stylesheets,r="",a=0;if(i="string"==typeof i?[i]:i)for(n=i.length;n>a;a++)r+='<link rel="stylesheet" href="'+i[a]+'">';return t.stylesheets=r,e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)},_unset:function(t,n,i,r){try{t[n]=i}catch(a){}try{t.__defineGetter__(n,function(){return i})}catch(a){}if(r)try{t.__defineSetter__(n,function(){})}catch(a){}if(!e.browser.crashesWhenDefineProperty(n))try{var o={get:function(){return i}};r&&(o.set=function(){}),Object.defineProperty(t,n,o)}catch(a){}}})}(wysihtml5),function(){var e={className:"class"};wysihtml5.dom.setAttributes=function(t){return{on:function(n){for(var i in t)n.setAttribute(e[i]||i,t[i])}}}}(),wysihtml5.dom.setStyles=function(e){return{on:function(t){var n=t.style;if("string"==typeof e)return n.cssText+=";"+e,void 0;for(var i in e)"float"===i?(n.cssFloat=e[i],n.styleFloat=e[i]):n[i]=e[i]}}},function(e){e.simulatePlaceholder=function(t,n,i){var r="placeholder",a=function(){n.hasPlaceholderSet()&&n.clear(),e.removeClass(n.element,r)},o=function(){n.isEmpty()&&(n.setValue(i),e.addClass(n.element,r))};t.observe("set_placeholder",o).observe("unset_placeholder",a).observe("focus:composer",a).observe("paste:composer",a).observe("blur:composer",o),o()}}(wysihtml5.dom),function(e){var t=document.documentElement;"textContent"in t?(e.setTextContent=function(e,t){e.textContent=t},e.getTextContent=function(e){return e.textContent}):"innerText"in t?(e.setTextContent=function(e,t){e.innerText=t},e.getTextContent=function(e){return e.innerText}):(e.setTextContent=function(e,t){e.nodeValue=t},e.getTextContent=function(e){return e.nodeValue})}(wysihtml5.dom),wysihtml5.quirks.cleanPastedHTML=function(){function e(e,n,i){n=n||t,i=i||e.ownerDocument||document;var r,a,o,s,l,c="string"==typeof e,u=0;r=c?wysihtml5.dom.getAsDom(e,i):e;for(l in n)for(o=r.querySelectorAll(l),a=n[l],s=o.length;s>u;u++)a(o[u]);return o=e=n=null,c?r.innerHTML:r}var t={"a u":wysihtml5.dom.replaceWithChildNodes};return e}(),function(e){var t=e.dom;e.quirks.ensureProperClearing=function(){var e=function(){var e=this;setTimeout(function(){var t=e.innerHTML.toLowerCase();("<p>&nbsp;</p>"==t||"<p>&nbsp;</p><p>&nbsp;</p>"==t)&&(e.innerHTML="")},0)};return function(n){t.observe(n.element,["cut","keydown"],e)}}(),e.quirks.ensureProperClearingOfLists=function(){var n=["OL","UL","MENU"],i=function(i,r){if(r.firstChild&&e.lang.array(n).contains(r.firstChild.nodeName)){var a=t.getParentElement(i,{nodeName:n});if(a){var o=a==r.firstChild;if(o){var s=a.childNodes.length<=1;if(s){var l=a.firstChild?""===a.firstChild.innerHTML:!0;l&&a.parentNode.removeChild(a)}}}}};return function(n){t.observe(n.element,"keydown",function(t){if(t.keyCode===e.BACKSPACE_KEY){var r=n.selection.getSelectedNode();i(r,n.element)}})}}()}(wysihtml5),function(e){var t="%7E";e.quirks.getCorrectInnerHTML=function(n){var i=n.innerHTML;if(-1===i.indexOf(t))return i;var r,a,o,s,l=n.querySelectorAll("[href*='~'], [src*='~']");for(s=0,o=l.length;o>s;s++)r=l[s].href||l[s].src,a=e.lang.string(r).replace("~").by(t),i=e.lang.string(i).replace(a).by(r);return i}}(wysihtml5),function(e){var t=e.dom,n=["LI","P","H1","H2","H3","H4","H5","H6"],i=["UL","OL","MENU"];e.quirks.insertLineBreakOnReturn=function(r){function a(n){var i=t.getParentElement(n,{nodeName:["P","DIV"]},2);if(i){var a=document.createTextNode(e.INVISIBLE_SPACE);t.insert(a).before(i),t.replaceWithChildNodes(i),r.selection.selectNode(a)}}function o(o){var s=o.keyCode;if(!(o.shiftKey||s!==e.ENTER_KEY&&s!==e.BACKSPACE_KEY)){var l=(o.target,r.selection.getSelectedNode()),c=t.getParentElement(l,{nodeName:n},4);return c?("LI"!==c.nodeName||s!==e.ENTER_KEY&&s!==e.BACKSPACE_KEY?c.nodeName.match(/H[1-6]/)&&s===e.ENTER_KEY&&setTimeout(function(){a(r.selection.getSelectedNode())},0):setTimeout(function(){var e,n=r.selection.getSelectedNode();n&&(e=t.getParentElement(n,{nodeName:i},2),e||a(n))},0),void 0):(s!==e.ENTER_KEY||e.browser.insertsLineBreaksOnReturn()||(r.commands.exec("insertLineBreak"),o.preventDefault()),void 0)}}t.observe(r.element.ownerDocument,"keydown",o)}}(wysihtml5),function(e){var t="wysihtml5-quirks-redraw";e.quirks.redraw=function(n){e.dom.addClass(n,t),e.dom.removeClass(n,t);try{var i=n.ownerDocument;i.execCommand("italic",!1,null),i.execCommand("italic",!1,null)}catch(r){}}}(wysihtml5),function(e){function t(e){var t=0;if(e.parentNode)do t+=e.offsetTop||0,e=e.offsetParent;while(e);return t}var n=e.dom;e.Selection=Base.extend({constructor:function(e){window.rangy.init(),this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},getBookmark:function(){var e=this.getRange();return e&&e.cloneRange()},setBookmark:function(e){e&&this.setSelection(e)},setBefore:function(e){var t=rangy.createRange(this.doc);return t.setStartBefore(e),t.setEndBefore(e),this.setSelection(t)},setAfter:function(e){var t=rangy.createRange(this.doc);return t.setStartAfter(e),t.setEndAfter(e),this.setSelection(t)},selectNode:function(t){var i=rangy.createRange(this.doc),r=t.nodeType===e.ELEMENT_NODE,a="canHaveHTML"in t?t.canHaveHTML:"IMG"!==t.nodeName,o=r?t.innerHTML:t.data,s=""===o||o===e.INVISIBLE_SPACE,l=n.getStyle("display").from(t),c="block"===l||"list-item"===l;if(s&&r&&a)try{t.innerHTML=e.INVISIBLE_SPACE}catch(u){}a?i.selectNodeContents(t):i.selectNode(t),a&&s&&r?i.collapse(c):a&&s&&(i.setStartAfter(t),i.setEndAfter(t)),this.setSelection(i)},getSelectedNode:function(e){var t,n;return e&&this.doc.selection&&"Control"===this.doc.selection.type&&(n=this.doc.selection.createRange(),n&&n.length)?n.item(0):(t=this.getSelection(this.doc),t.focusNode===t.anchorNode?t.focusNode:(n=this.getRange(this.doc),n?n.commonAncestorContainer:this.doc.body))},executeAndRestore:function(t,n){var i,r=this.doc.body,a=n&&r.scrollTop,o=n&&r.scrollLeft,s="_wysihtml5-temp-placeholder",l='<span class="'+s+'">'+e.INVISIBLE_SPACE+"</span>",c=this.getRange(this.doc);if(!c)return t(r,r),void 0;var u=c.createContextualFragment(l);c.insertNode(u);try{t(c.startContainer,c.endContainer)}catch(h){setTimeout(function(){throw h},0)}caretPlaceholder=this.doc.querySelector("."+s),caretPlaceholder?(i=rangy.createRange(this.doc),i.selectNode(caretPlaceholder),i.deleteContents(),this.setSelection(i)):r.focus(),n&&(r.scrollTop=a,r.scrollLeft=o);try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(d){}},executeAndRestoreSimple:function(e){var t,n,i,r,a,o=this.getRange(),s=this.doc.body;if(!o)return e(s,s),void 0;r=o.getNodes([3]),n=r[0]||o.startContainer,i=r[r.length-1]||o.endContainer,a={collapsed:o.collapsed,startContainer:n,startOffset:n===o.startContainer?o.startOffset:0,endContainer:i,endOffset:i===o.endContainer?o.endOffset:i.length};try{e(o.startContainer,o.endContainer)}catch(l){setTimeout(function(){throw l},0)}t=rangy.createRange(this.doc);try{t.setStart(a.startContainer,a.startOffset)}catch(c){}try{t.setEnd(a.endContainer,a.endOffset)}catch(u){}try{this.setSelection(t)}catch(h){}},insertHTML:function(e){var t=rangy.createRange(this.doc),n=t.createContextualFragment(e),i=n.lastChild;this.insertNode(n),i&&this.setAfter(i)},insertNode:function(e){var t=this.getRange();t&&t.insertNode(e)},surround:function(e){var t=this.getRange();if(t)try{t.surroundContents(e),this.selectNode(e)}catch(n){e.appendChild(t.extractContents()),t.insertNode(e)}},scrollIntoView:function(){var n,i=this.doc,r=i.documentElement.scrollHeight>i.documentElement.offsetHeight,a=i._wysihtml5ScrollIntoViewElement=i._wysihtml5ScrollIntoViewElement||function(){var t=i.createElement("span");return t.innerHTML=e.INVISIBLE_SPACE,t}();r&&(this.insertNode(a),n=t(a),a.parentNode.removeChild(a),n>i.body.scrollTop&&(i.body.scrollTop=n))},selectLine:function(){e.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var e=this.doc.defaultView,t=e.getSelection();t.modify("extend","left","lineboundary"),t.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var e,t,n,i,r,a=this.doc.selection.createRange(),o=a.boundingTop,s=(a.boundingHeight,this.doc.body.scrollWidth);if(a.moveToPoint){for(0===o&&(n=this.doc.createElement("span"),this.insertNode(n),o=n.offsetTop,n.parentNode.removeChild(n)),o+=1,i=-10;s>i;i+=2)try{a.moveToPoint(i,o);break}catch(l){}for(e=o,t=this.doc.selection.createRange(),r=s;r>=0;r--)try{t.moveToPoint(r,e);break}catch(c){}a.setEndPoint("EndToEnd",t),a.select()}},getText:function(){var e=this.getSelection();return e?e.toString():""},getNodes:function(e,t){var n=this.getRange();return n?n.getNodes([e],t):[]},getRange:function(){var e=this.getSelection();return e&&e.rangeCount&&e.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(e){var t=this.doc.defaultView||this.doc.parentWindow,n=rangy.getSelection(t);return n.setSingleRange(e)}})}(wysihtml5),function(e,t){function n(e,t,n){if(!e.className)return!1;var i=e.className.match(n)||[];return i[i.length-1]===t}function i(e,t,n){e.className?(r(e,n),e.className+=" "+t):e.className=t}function r(e,t){e.className&&(e.className=e.className.replace(t,""))}function a(e,t){return e.className.replace(p," ")==t.className.replace(p," ")}function o(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}function s(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,i,r,a=0,o=e.attributes.length;o>a;++a)if(n=e.attributes[a],r=n.name,"class"!=r){if(i=t.attributes.getNamedItem(r),n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function l(e,n){return t.dom.isCharacterDataNode(e)?0==n?!!e.previousSibling:n==e.length?!!e.nextSibling:!0:n>0&&n<e.childNodes.length}function c(e,n,i){var r;if(t.dom.isCharacterDataNode(n)&&(0==i?(i=t.dom.getNodeIndex(n),n=n.parentNode):i==n.length?(i=t.dom.getNodeIndex(n)+1,n=n.parentNode):r=t.dom.splitDataNode(n,i)),!r){r=n.cloneNode(!1),r.id&&r.removeAttribute("id");for(var a;a=n.childNodes[i];)r.appendChild(a);t.dom.insertAfter(r,n)}return n==e?r:c(e,r.parentNode,t.dom.getNodeIndex(r))}function u(t){this.isElementMerge=t.nodeType==e.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?t.lastChild:t,this.textNodes=[this.firstTextNode]}function h(e,t,n,i){this.tagNames=e||[d],this.cssClass=t||"",this.similarClassRegExp=n,this.normalize=i,this.applyToAnyTagName=!1}var d="span",p=/\s+/g;u.prototype={doMerge:function(){for(var e,t,n,i=[],r=0,a=this.textNodes.length;a>r;++r)e=this.textNodes[r],t=e.parentNode,i[r]=e.data,r&&(t.removeChild(e),t.hasChildNodes()||t.parentNode.removeChild(t));return this.firstTextNode.data=n=i.join(""),n},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){for(var e=[],t=0,n=this.textNodes.length;n>t;++t)e[t]="'"+this.textNodes[t].data+"'";return"[Merge("+e.join(",")+")]"}},h.prototype={getAncestorWithClass:function(i){for(var r;i;){if(r=this.cssClass?n(i,this.cssClass,this.similarClassRegExp):!0,i.nodeType==e.ELEMENT_NODE&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&r)return i;i=i.parentNode}return!1},postApply:function(e,t){for(var n,i,r,a=e[0],o=e[e.length-1],s=[],l=a,c=o,h=0,d=o.length,p=0,f=e.length;f>p;++p)i=e[p],r=this.getAdjacentMergeableTextNode(i.parentNode,!1),r?(n||(n=new u(r),s.push(n)),n.textNodes.push(i),i===a&&(l=n.firstTextNode,h=l.length),i===o&&(c=n.firstTextNode,d=n.getLength())):n=null;
var m=this.getAdjacentMergeableTextNode(o.parentNode,!0);if(m&&(n||(n=new u(o),s.push(n)),n.textNodes.push(m)),s.length){for(p=0,f=s.length;f>p;++p)s[p].doMerge();t.setStart(l,h),t.setEnd(c,d)}},getAdjacentMergeableTextNode:function(t,n){var i,r=t.nodeType==e.TEXT_NODE,a=r?t.parentNode:t,o=n?"nextSibling":"previousSibling";if(r){if(i=t[o],i&&i.nodeType==e.TEXT_NODE)return i}else if(i=a[o],i&&this.areElementsMergeable(t,i))return i[n?"firstChild":"lastChild"];return null},areElementsMergeable:function(e,n){return t.dom.arrayContains(this.tagNames,(e.tagName||"").toLowerCase())&&t.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase())&&a(e,n)&&s(e,n)},createContainer:function(e){var t=e.createElement(this.tagNames[0]);return this.cssClass&&(t.className=this.cssClass),t},applyToTextNode:function(e){var n=e.parentNode;if(1==n.childNodes.length&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase()))this.cssClass&&i(n,this.cssClass,this.similarClassRegExp);else{var r=this.createContainer(t.dom.getDocument(e));e.parentNode.insertBefore(r,e),r.appendChild(e)}},isRemovable:function(n){return t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&e.lang.string(n.className).trim()==this.cssClass},undoToTextNode:function(e,t,n){if(!t.containsNode(n)){var i=t.cloneRange();i.selectNode(n),i.isPointInRange(t.endContainer,t.endOffset)&&l(t.endContainer,t.endOffset)&&(c(n,t.endContainer,t.endOffset),t.setEndAfter(n)),i.isPointInRange(t.startContainer,t.startOffset)&&l(t.startContainer,t.startOffset)&&(n=c(n,t.startContainer,t.startOffset))}this.similarClassRegExp&&r(n,this.similarClassRegExp),this.isRemovable(n)&&o(n)},applyToRange:function(t){var n=t.getNodes([e.TEXT_NODE]);if(!n.length)try{var i=this.createContainer(t.endContainer.ownerDocument);return t.surroundContents(i),this.selectNode(t,i),void 0}catch(r){}if(t.splitBoundaries(),n=t.getNodes([e.TEXT_NODE]),n.length){for(var a,o=0,s=n.length;s>o;++o)a=n[o],this.getAncestorWithClass(a)||this.applyToTextNode(a);t.setStart(n[0],0),a=n[n.length-1],t.setEnd(a,a.length),this.normalize&&this.postApply(n,t)}},undoToRange:function(t){var n,i,r=t.getNodes([e.TEXT_NODE]);if(r.length)t.splitBoundaries(),r=t.getNodes([e.TEXT_NODE]);else{var a=t.endContainer.ownerDocument,o=a.createTextNode(e.INVISIBLE_SPACE);t.insertNode(o),t.selectNode(o),r=[o]}for(var s=0,l=r.length;l>s;++s)n=r[s],i=this.getAncestorWithClass(n),i&&this.undoToTextNode(n,t,i);1==l?this.selectNode(t,r[0]):(t.setStart(r[0],0),n=r[r.length-1],t.setEnd(n,n.length),this.normalize&&this.postApply(r,t))},selectNode:function(t,n){var i=n.nodeType===e.ELEMENT_NODE,r="canHaveHTML"in n?n.canHaveHTML:!0,a=i?n.innerHTML:n.data,o=""===a||a===e.INVISIBLE_SPACE;if(o&&i&&r)try{n.innerHTML=e.INVISIBLE_SPACE}catch(s){}t.selectNodeContents(n),o&&i?t.collapse(!1):o&&(t.setStartAfter(n),t.setEndAfter(n))},getTextSelectedByRange:function(e,t){var n=t.cloneRange();n.selectNodeContents(e);var i=n.intersection(t),r=i?i.toString():"";return n.detach(),r},isAppliedToRange:function(t){var n,i=[],r=t.getNodes([e.TEXT_NODE]);if(!r.length)return n=this.getAncestorWithClass(t.startContainer),n?[n]:!1;for(var a,o=0,s=r.length;s>o;++o){if(a=this.getTextSelectedByRange(r[o],t),n=this.getAncestorWithClass(r[o]),""!=a&&!n)return!1;i.push(n)}return i},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)}},e.selection.HTMLApplier=h}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},support:function(e){return wysihtml5.browser.supportsCommand(this.doc,e)},exec:function(e,t){var n=wysihtml5.commands[e],i=wysihtml5.lang.array(arguments).get(),r=n&&n.exec,a=null;if(this.editor.fire("beforecommand:composer"),r)i.unshift(this.composer),a=r.apply(n,i);else try{a=this.doc.execCommand(e,!1,t)}catch(o){}return this.editor.fire("aftercommand:composer"),a},state:function(e){var t=wysihtml5.commands[e],n=wysihtml5.lang.array(arguments).get(),i=t&&t.state;if(i)return n.unshift(this.composer),i.apply(t,n);try{return this.doc.queryCommandState(e)}catch(r){return!1}},value:function(e){var t=wysihtml5.commands[e],n=t&&t.value;if(n)return n.call(t,this.composer,e);try{return this.doc.queryCommandValue(e)}catch(i){return null}}}),function(e){var t;e.commands.bold={exec:function(t,n){return e.commands.formatInline.exec(t,n,"b")},state:function(t,n){return e.commands.formatInline.state(t,n,"b")},value:function(){return t}}}(wysihtml5),function(e){function t(e,t){for(var n,i,r,o=t.length,s=0;o>s;s++)n=t[s],i=a.getParentElement(n,{nodeName:"code"}),r=a.getTextContent(n),r.match(a.autoLink.URL_REG_EXP)&&!i?i=a.renameElement(n,"code"):a.replaceWithChildNodes(n)}function n(t,n){var o,s,l,c,u,h,d,p,f,m=t.doc,g="_wysihtml5-temp-"+ +new Date,v=/non-matching-class/g,y=0;for(e.commands.formatInline.exec(t,i,r,g,v),s=m.querySelectorAll(r+"."+g),o=s.length;o>y;y++){l=s[y],l.removeAttribute("class");for(f in n)l.setAttribute(f,n[f])}h=l,1===o&&(d=a.getTextContent(l),c=!!l.querySelector("*"),u=""===d||d===e.INVISIBLE_SPACE,!c&&u&&(a.setTextContent(l,n.text||l.href),p=m.createTextNode(" "),t.selection.setAfter(l),t.selection.insertNode(p),h=p)),t.selection.setAfter(h)}var i,r="A",a=e.dom;e.commands.createLink={exec:function(e,i,r){var a=this.state(e,i);a?e.selection.executeAndRestore(function(){t(e,a)}):(r="object"==typeof r?r:{href:r},n(e,r))},state:function(t,n){return e.commands.formatInline.state(t,n,"A")},value:function(){return i}}}(wysihtml5),function(e){var t,n=/wysiwyg-font-size-[a-z\-]+/g;e.commands.fontSize={exec:function(t,i,r){return e.commands.formatInline.exec(t,i,"span","wysiwyg-font-size-"+r,n)},state:function(t,i,r){return e.commands.formatInline.state(t,i,"span","wysiwyg-font-size-"+r,n)},value:function(){return t}}}(wysihtml5),function(e){var t,n=/wysiwyg-color-[a-z]+/g;e.commands.foreColor={exec:function(t,i,r){return e.commands.formatInline.exec(t,i,"span","wysiwyg-color-"+r,n)},state:function(t,i,r){return e.commands.formatInline.state(t,i,"span","wysiwyg-color-"+r,n)},value:function(){return t}}}(wysihtml5),function(e){function t(e,t,i){e.className?(n(e,i),e.className+=" "+t):e.className=t}function n(e,t){e.className=e.className.replace(t,"")}function i(t){return t.nodeType===e.TEXT_NODE&&!e.lang.string(t.data).trim()}function r(e){for(var t=e.previousSibling;t&&i(t);)t=t.previousSibling;return t}function a(e){for(var t=e.nextSibling;t&&i(t);)t=t.nextSibling;return t}function o(e){var t=e.ownerDocument,n=a(e),i=r(e);n&&!u(n)&&e.parentNode.insertBefore(t.createElement("br"),n),i&&!u(i)&&e.parentNode.insertBefore(t.createElement("br"),e)}function s(e){var t=a(e),n=r(e);t&&c(t)&&t.parentNode.removeChild(t),n&&c(n)&&n.parentNode.removeChild(n)}function l(e){var t=e.lastChild;t&&c(t)&&t.parentNode.removeChild(t)}function c(e){return"BR"===e.nodeName}function u(e){return c(e)?!0:"block"===m.getStyle("display").from(e)?!0:!1}function h(t,n,i,r){if(r)var a=m.observe(t,"DOMNodeInserted",function(t){var n,i=t.target;i.nodeType===e.ELEMENT_NODE&&(n=m.getStyle("display").from(i),"inline"!==n.substr(0,6)&&(i.className+=" "+r))});t.execCommand(n,!1,i),a&&a.stop()}function d(e,t){e.selection.selectLine(),e.selection.surround(t),s(t),l(t),e.selection.selectNode(t)}function p(t){return!!e.lang.string(t.className).trim()}var f,m=e.dom,g="DIV",v=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE",g];e.commands.formatBlock={exec:function(i,r,a,s,l){var c,u=i.doc,f=this.state(i,r,a,s,l);return a="string"==typeof a?a.toUpperCase():a,f?(i.selection.executeAndRestoreSimple(function(){l&&n(f,l);var e=p(f);e||f.nodeName!==(a||g)?e&&m.renameElement(f,g):(o(f),m.replaceWithChildNodes(f))}),void 0):(null===a||e.lang.array(v).contains(a))&&(c=i.selection.getSelectedNode(),f=m.getParentElement(c,{nodeName:v}))?(i.selection.executeAndRestoreSimple(function(){a&&(f=m.renameElement(f,a)),s&&t(f,s,l)}),void 0):i.commands.support(r)?(h(u,r,a||g,s),void 0):(f=u.createElement(a||g),s&&(f.className=s),d(i,f),void 0)},state:function(e,t,n,i,r){n="string"==typeof n?n.toUpperCase():n;var a=e.selection.getSelectedNode();return m.getParentElement(a,{nodeName:n,className:i,classRegExp:r})},value:function(){return f}}}(wysihtml5),function(e){function t(e){var t=r[e];return t?[e.toLowerCase(),t.toLowerCase()]:[e.toLowerCase()]}function n(n,i,r){var o=n+":"+i;return a[o]||(a[o]=new e.selection.HTMLApplier(t(n),i,r,!0)),a[o]}var i,r={strong:"b",em:"i",b:"strong",i:"em"},a={};e.commands.formatInline={exec:function(e,t,i,r,a){var o=e.selection.getRange();return o?(n(i,r,a).toggleRange(o),e.selection.setSelection(o),void 0):!1},state:function(t,i,a,o,s){var l,c=t.doc,u=r[a]||a;return e.dom.hasElementWithTagName(c,a)||e.dom.hasElementWithTagName(c,u)?o&&!e.dom.hasElementWithClassName(c,o)?!1:(l=t.selection.getRange(),l?n(a,o,s).isAppliedToRange(l):!1):!1},value:function(){return i}}}(wysihtml5),function(e){var t;e.commands.insertHTML={exec:function(e,t,n){e.commands.support(t)?e.doc.execCommand(t,!1,n):e.selection.insertHTML(n)},state:function(){return!1},value:function(){return t}}}(wysihtml5),function(e){var t="IMG";e.commands.insertImage={exec:function(n,i,r){r="object"==typeof r?r:{src:r};var a,o,s,l=n.doc,c=this.state(n);if(c)return n.selection.setBefore(c),s=c.parentNode,s.removeChild(c),e.dom.removeEmptyTextNodes(s),"A"!==s.nodeName||s.firstChild||(n.selection.setAfter(s),s.parentNode.removeChild(s)),e.quirks.redraw(n.element),void 0;c=l.createElement(t);for(o in r)c[o]=r[o];n.selection.insertNode(c),e.browser.hasProblemsSettingCaretAfterImg()?(a=l.createTextNode(e.INVISIBLE_SPACE),n.selection.insertNode(a),n.selection.setAfter(a)):n.selection.setAfter(c)},state:function(n){var i,r,a,o=n.doc;return e.dom.hasElementWithTagName(o,t)?(i=n.selection.getSelectedNode())?i.nodeName===t?i:i.nodeType!==e.ELEMENT_NODE?!1:(r=n.selection.getText(),(r=e.lang.string(r).trim())?!1:(a=n.selection.getNodes(e.ELEMENT_NODE,function(e){return"IMG"===e.nodeName}),1!==a.length?!1:a[0])):!1:!1},value:function(e){var t=this.state(e);return t&&t.src}}}(wysihtml5),function(e){var t,n="<br>"+(e.browser.needsSpaceAfterLineBreak()?" ":"");e.commands.insertLineBreak={exec:function(t,i){t.commands.support(i)?(t.doc.execCommand(i,!1,null),e.browser.autoScrollsToCaret()||t.selection.scrollIntoView()):t.commands.exec("insertHTML",n)},state:function(){return!1},value:function(){return t}}}(wysihtml5),function(e){var t;e.commands.insertOrderedList={exec:function(t,n){var i,r,a=t.doc,o=t.selection.getSelectedNode(),s=e.dom.getParentElement(o,{nodeName:"OL"}),l=e.dom.getParentElement(o,{nodeName:"UL"}),c="_wysihtml5-temp-"+(new Date).getTime();return t.commands.support(n)?(a.execCommand(n,!1,null),void 0):(s?t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(s)}):l?t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(l,"ol")}):(t.commands.exec("formatBlock","div",c),r=a.querySelector("."+c),i=""===r.innerHTML||r.innerHTML===e.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){s=e.dom.convertToList(r,"ol")}),i&&t.selection.selectNode(s.querySelector("li"))),void 0)},state:function(t){var n=t.selection.getSelectedNode();return e.dom.getParentElement(n,{nodeName:"OL"})},value:function(){return t}}}(wysihtml5),function(e){var t;e.commands.insertUnorderedList={exec:function(t,n){var i,r,a=t.doc,o=t.selection.getSelectedNode(),s=e.dom.getParentElement(o,{nodeName:"UL"}),l=e.dom.getParentElement(o,{nodeName:"OL"}),c="_wysihtml5-temp-"+(new Date).getTime();return t.commands.support(n)?(a.execCommand(n,!1,null),void 0):(s?t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(s)}):l?t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(l,"ul")}):(t.commands.exec("formatBlock","div",c),r=a.querySelector("."+c),i=""===r.innerHTML||r.innerHTML===e.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){s=e.dom.convertToList(r,"ul")}),i&&t.selection.selectNode(s.querySelector("li"))),void 0)},state:function(t){var n=t.selection.getSelectedNode();return e.dom.getParentElement(n,{nodeName:"UL"})},value:function(){return t}}}(wysihtml5),function(e){var t;e.commands.italic={exec:function(t,n){return e.commands.formatInline.exec(t,n,"i")},state:function(t,n){return e.commands.formatInline.state(t,n,"i")},value:function(){return t}}}(wysihtml5),function(e){var t,n="wysiwyg-text-align-center",i=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyCenter={exec:function(t){return e.commands.formatBlock.exec(t,"formatBlock",null,n,i)},state:function(t){return e.commands.formatBlock.state(t,"formatBlock",null,n,i)},value:function(){return t}}}(wysihtml5),function(e){var t,n="wysiwyg-text-align-left",i=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyLeft={exec:function(t){return e.commands.formatBlock.exec(t,"formatBlock",null,n,i)},state:function(t){return e.commands.formatBlock.state(t,"formatBlock",null,n,i)},value:function(){return t}}}(wysihtml5),function(e){var t,n="wysiwyg-text-align-right",i=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyRight={exec:function(t){return e.commands.formatBlock.exec(t,"formatBlock",null,n,i)},state:function(t){return e.commands.formatBlock.state(t,"formatBlock",null,n,i)},value:function(){return t}}}(wysihtml5),function(e){var t;e.commands.underline={exec:function(t,n){return e.commands.formatInline.exec(t,n,"u")},state:function(t,n){return e.commands.formatInline.state(t,n,"u")},value:function(){return t}}}(wysihtml5),function(e){function t(e){for(var t;t=e.querySelector("._wysihtml5-temp");)t.parentNode.removeChild(t)}var n=90,i=89,r=8,a=46,o=40,s='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",l='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",c=e.dom;e.UndoManager=e.lang.Dispatcher.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.element=this.composer.element,this.history=[this.composer.getValue()],this.position=1,this.composer.commands.support("insertHTML")&&this._observe()},_observe:function(){var o,u=this,h=this.composer.sandbox.getDocument();if(c.observe(this.element,"keydown",function(e){if(!e.altKey&&(e.ctrlKey||e.metaKey)){var t=e.keyCode,r=t===n&&!e.shiftKey,a=t===n&&e.shiftKey||t===i;r?(u.undo(),e.preventDefault()):a&&(u.redo(),e.preventDefault())}}),c.observe(this.element,"keydown",function(e){var t=e.keyCode;t!==o&&(o=t,(t===r||t===a)&&u.transact())}),e.browser.hasUndoInContextMenu()){var d,p,f=function(){t(h),clearInterval(d)};c.observe(this.element,"contextmenu",function(){f(),u.composer.selection.executeAndRestoreSimple(function(){u.element.lastChild&&u.composer.selection.setAfter(u.element.lastChild),h.execCommand("insertHTML",!1,s),h.execCommand("insertHTML",!1,l),h.execCommand("undo",!1,null)}),d=setInterval(function(){h.getElementById("_wysihtml5-redo")?(f(),u.redo()):h.getElementById("_wysihtml5-undo")||(f(),u.undo())},400),p||(p=!0,c.observe(document,"mousedown",f),c.observe(h,["mousedown","paste","cut","copy"],f))})}this.editor.observe("newword:composer",function(){u.transact()}).observe("beforecommand:composer",function(){u.transact()})},transact:function(){var e=this.history[this.position-1],t=this.composer.getValue();if(t!=e){var n=this.history.length=this.position;n>o&&(this.history.shift(),this.position--),this.position++,this.history.push(t)}},undo:function(){this.transact(),this.position<=1||(this.set(this.history[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.position>=this.history.length||(this.set(this.history[++this.position-1]),this.editor.fire("redo:composer"))},set:function(e){this.composer.setValue(e),this.editor.focus(!0)}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(e,t,n){this.parent=e,this.element=t,this.config=n,this._observeViewChange()},_observeViewChange:function(){var e=this;this.parent.observe("beforeload",function(){e.parent.observe("change_view",function(t){t===e.name?(e.parent.currentView=e,e.show(),setTimeout(function(){e.focus()},0)):e.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(e){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(e){var t=e.dom,n=e.browser;e.views.Composer=e.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(e,t,n){this.base(e,t,n),this.textarea=this.parent.textarea,this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(t){var n=this.isEmpty()?"":e.quirks.getCorrectInnerHTML(this.element);return t&&(n=this.parent.parse(n)),n=e.lang.string(n).replace(e.INVISIBLE_SPACE).by("")},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.innerHTML=e},show:function(){this.iframe.style.display=this._displayStyle||"",this.disable(),this.enable()},hide:function(){this._displayStyle=t.getStyle("display").from(this.iframe),"none"===this._displayStyle&&(this._displayStyle=null),this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable"),this.base()},enable:function(){this.element.setAttribute("contentEditable","true"),this.base()},focus:function(t){e.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var n=this.element.lastChild;t&&n&&("BR"===n.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var e=this.element.innerHTML,t="blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea";return""===e||e===this.CARET_HACK||this.hasPlaceholderSet()||""===this.getTextContent()&&!this.element.querySelector(t)},_initSandbox:function(){var e=this;this.sandbox=new t.Sandbox(function(){e._create()},{stylesheets:this.config.stylesheets}),this.iframe=this.sandbox.getIframe();var n=document.createElement("input");n.type="hidden",n.name="_wysihtml5_mode",n.value=1;var i=this.textarea.element;t.insert(this.iframe).after(i),t.insert(n).after(i)},_create:function(){var i=this;this.doc=this.sandbox.getDocument(),this.element=this.doc.body,this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0),this.enable(),this.selection=new e.Selection(this.parent),this.commands=new e.Commands(this.parent),t.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),t.addClass(this.element,this.config.composerClassName),this.config.style&&this.style(),this.observe();var r=this.config.name;r&&(t.addClass(this.element,r),t.addClass(this.iframe,r));var a="string"==typeof this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder");a&&t.simulatePlaceholder(this.parent,this,a),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&&setTimeout(function(){i.focus()},100),e.quirks.insertLineBreakOnReturn(this),n.clearsContentEditableCorrectly()||e.quirks.ensureProperClearing(this),n.clearsListsInContentEditableCorrectly()||e.quirks.ensureProperClearingOfLists(this),this.initSync&&this.config.sync&&this.initSync(),this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var i=this,r=n.canDisableAutoLinking(),a=n.doesAutoLinkingInContentEditable();if(r&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink){(!a||a&&r)&&this.parent.observe("newword:composer",function(){i.selection.executeAndRestore(function(e,n){t.autoLink(n.parentNode)})});var o=this.sandbox.getDocument().getElementsByTagName("a"),s=t.autoLink.URL_REG_EXP,l=function(n){var i=e.lang.string(t.getTextContent(n)).trim();return"www."===i.substr(0,4)&&(i="http://"+i),i};t.observe(this.element,"keydown",function(e){if(o.length){var n,r=i.selection.getSelectedNode(e.target.ownerDocument),a=t.getParentElement(r,{nodeName:"A"},4);a&&(n=l(a),setTimeout(function(){var e=l(a);e!==n&&e.match(s)&&a.setAttribute("href",e)},0))}})}},_initObjectResizing:function(){var i=["width","height"],r=i.length,a=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing),this.config.allowObjectResizing?n.supportsEvent("resizeend")&&t.observe(a,"resizeend",function(t){for(var n,o=t.target||t.srcElement,s=o.style,l=0;r>l;l++)n=i[l],s[n]&&(o.setAttribute(n,parseInt(s[n],10)),s[n]="");e.quirks.redraw(a)}):n.supportsEvent("resizestart")&&t.observe(a,"resizestart",function(e){e.preventDefault()})},_initUndoManager:function(){new e.UndoManager(this.parent)}})}(wysihtml5),function(e){var t=e.dom,n=document,i=window,r=n.createElement("div"),a=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],o=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],s=["width","height","top","left","right","bottom"],l=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",e.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],c=function(e){if(e.setActive)try{e.setActive()}catch(r){}else{var a=e.style,o=n.documentElement.scrollTop||n.body.scrollTop,s=n.documentElement.scrollLeft||n.body.scrollLeft,l={position:a.position,top:a.top,left:a.left,WebkitUserSelect:a.WebkitUserSelect};t.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(e),e.focus(),t.setStyles(l).on(e),i.scrollTo&&i.scrollTo(s,o)}};e.views.Composer.prototype.style=function(){var u=this,h=n.querySelector(":focus"),d=this.textarea.element,p=d.hasAttribute("placeholder"),f=p&&d.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||r.cloneNode(!1),this.blurStylesHost=this.blurStylesHost||r.cloneNode(!1),p&&d.removeAttribute("placeholder"),d===h&&d.blur(),t.copyStyles(o).from(d).to(this.iframe).andTo(this.blurStylesHost),t.copyStyles(a).from(d).to(this.element).andTo(this.blurStylesHost),t.insertCSS(l).into(this.element.ownerDocument),c(d),t.copyStyles(o).from(d).to(this.focusStylesHost),t.copyStyles(a).from(d).to(this.focusStylesHost);var m=e.lang.array(o).without(["display"]);if(h?h.focus():d.blur(),p&&d.setAttribute("placeholder",f),!e.browser.hasCurrentStyleProperty())var g=t.observe(i,"resize",function(){if(!t.contains(document.documentElement,u.iframe))return g.stop(),void 0;var e=t.getStyle("display").from(d),n=t.getStyle("display").from(u.iframe);d.style.display="",u.iframe.style.display="none",t.copyStyles(s).from(d).to(u.iframe).andTo(u.focusStylesHost).andTo(u.blurStylesHost),u.iframe.style.display=n,d.style.display=e});return this.parent.observe("focus:composer",function(){t.copyStyles(m).from(u.focusStylesHost).to(u.iframe),t.copyStyles(a).from(u.focusStylesHost).to(u.element)}),this.parent.observe("blur:composer",function(){t.copyStyles(m).from(u.blurStylesHost).to(u.iframe),t.copyStyles(a).from(u.blurStylesHost).to(u.element)}),this}}(wysihtml5),function(e){var t=e.dom,n=e.browser,i={66:"bold",73:"italic",85:"underline"};e.views.Composer.prototype.observe=function(){var r=this,a=this.getValue(),o=this.sandbox.getIframe(),s=this.element,l=n.supportsEventsInIframeCorrectly()?s:this.sandbox.getWindow(),c=n.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];t.observe(o,"DOMNodeRemoved",function(){clearInterval(u),r.parent.fire("destroy:composer")});var u=setInterval(function(){t.contains(document.documentElement,o)||(clearInterval(u),r.parent.fire("destroy:composer"))},250);t.observe(l,"focus",function(){r.parent.fire("focus").fire("focus:composer"),setTimeout(function(){a=r.getValue()},0)}),t.observe(l,"blur",function(){a!==r.getValue()&&r.parent.fire("change").fire("change:composer"),r.parent.fire("blur").fire("blur:composer")}),e.browser.isIos()&&t.observe(s,"blur",function(){var e=s.ownerDocument.createElement("input"),t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft;try{r.selection.insertNode(e)}catch(i){s.appendChild(e)}e.focus(),e.parentNode.removeChild(e),window.scrollTo(n,t)}),t.observe(s,"dragenter",function(){r.parent.fire("unset_placeholder")}),n.firesOnDropOnlyWhenOnDragOverIsCancelled()&&t.observe(s,["dragover","dragenter"],function(e){e.preventDefault()}),t.observe(s,c,function(e){var t,i=e.dataTransfer;i&&n.supportsDataTransfer()&&(t=i.getData("text/html")||i.getData("text/plain")),t?(s.focus(),r.commands.exec("insertHTML",t),r.parent.fire("paste").fire("paste:composer"),e.stopPropagation(),e.preventDefault()):setTimeout(function(){r.parent.fire("paste").fire("paste:composer")},0)}),t.observe(s,"keyup",function(t){var n=t.keyCode;(n===e.SPACE_KEY||n===e.ENTER_KEY)&&r.parent.fire("newword:composer")}),this.parent.observe("paste:composer",function(){setTimeout(function(){r.parent.fire("newword:composer")},0)}),n.canSelectImagesInContentEditable()||t.observe(s,"mousedown",function(e){var t=e.target;"IMG"===t.nodeName&&(r.selection.selectNode(t),e.preventDefault())}),t.observe(s,"keydown",function(e){var t=e.keyCode,n=i[t];(e.ctrlKey||e.metaKey)&&!e.altKey&&n&&(r.commands.exec(n),e.preventDefault())}),t.observe(s,"keydown",function(t){var n,i=r.selection.getSelectedNode(!0),a=t.keyCode;!i||"IMG"!==i.nodeName||a!==e.BACKSPACE_KEY&&a!==e.DELETE_KEY||(n=i.parentNode,n.removeChild(i),"A"!==n.nodeName||n.firstChild||n.parentNode.removeChild(n),setTimeout(function(){e.quirks.redraw(s)},0),t.preventDefault())});var h={IMG:"Image: ",A:"Link: "};t.observe(s,"mouseover",function(e){var t,n=e.target,i=n.nodeName;if("A"===i||"IMG"===i){var r=n.hasAttribute("title");r||(t=h[i]+(n.getAttribute("href")||n.getAttribute("src")),n.setAttribute("title",t))}})}}(wysihtml5),function(e){var t=400;e.views.Synchronizer=Base.extend({constructor:function(e,t,n){this.editor=e,this.textarea=t,this.composer=n,this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(e.lang.string(this.composer.getValue()).trim(),t)},fromTextareaToComposer:function(e){var t=this.textarea.getValue();t?this.composer.setValue(t,e):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(e){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(e):this.fromComposerToTextarea(e)},_observe:function(){var n,i=this,r=this.textarea.element.form,a=function(){n=setInterval(function(){i.fromComposerToTextarea()},t)},o=function(){clearInterval(n),n=null};a(),r&&(e.dom.observe(r,"submit",function(){i.sync(!0)}),e.dom.observe(r,"reset",function(){setTimeout(function(){i.fromTextareaToComposer()},0)})),this.editor.observe("change_view",function(e){"composer"!==e||n?"textarea"===e&&(i.fromComposerToTextarea(!0),o()):(i.fromTextareaToComposer(!0),a())}),this.editor.observe("destroy:composer",o)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(e,t,n){this.base(e,t,n),this._observe()},clear:function(){this.element.value=""},getValue:function(e){var t=this.isEmpty()?"":this.element.value;return t=t.replace(/&(?!\w+;)/g,"&amp;"),e&&(t=this.parent.parse(t)),t},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.value=e},hasPlaceholderSet:function(){var e=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),t=this.element.getAttribute("placeholder")||null,n=this.element.value,i=!n;return e&&i||n===t},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var e=this.element,t=this.parent,n={focusin:"focus",focusout:"blur"},i=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];t.observe("beforeload",function(){wysihtml5.dom.observe(e,i,function(e){var i=n[e.type]||e.type;t.fire(i).fire(i+":textarea")}),wysihtml5.dom.observe(e,["paste","drop"],function(){setTimeout(function(){t.fire("paste").fire("paste:textarea")},0)})})}}),function(e){var t=e.dom,n="wysihtml5-command-dialog-opened",i="input, select, textarea",r="[data-wysihtml5-dialog-field]",a="data-wysihtml5-dialog-field";e.toolbar.Dialog=e.lang.Dispatcher.extend({constructor:function(e,t){this.link=e,this.container=t},_observe:function(){if(!this._observed){var r=this,a=function(e){var t=r._serialize();t==r.elementToChange?r.fire("edit",t):r.fire("save",t),r.hide(),e.preventDefault(),e.stopPropagation()};t.observe(r.link,"click",function(){t.hasClass(r.link,n)&&setTimeout(function(){r.hide()},0)}),t.observe(this.container,"keydown",function(t){var n=t.keyCode;n===e.ENTER_KEY&&a(t),n===e.ESCAPE_KEY&&r.hide()}),t.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",a),t.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(e){r.fire("cancel"),r.hide(),e.preventDefault(),e.stopPropagation()});for(var o=this.container.querySelectorAll(i),s=0,l=o.length,c=function(){clearInterval(r.interval)};l>s;s++)t.observe(o[s],"change",c);this._observed=!0}},_serialize:function(){for(var e=this.elementToChange||{},t=this.container.querySelectorAll(r),n=t.length,i=0;n>i;i++)e[t[i].getAttribute(a)]=t[i].value;return e},_interpolate:function(e){for(var t,n,i,o=document.querySelector(":focus"),s=this.container.querySelectorAll(r),l=s.length,c=0;l>c;c++)t=s[c],t!==o&&(e&&"hidden"===t.type||(n=t.getAttribute(a),i=this.elementToChange?this.elementToChange[n]||"":t.defaultValue,t.value=i))},show:function(e){var r=this,a=this.container.querySelector(i);if(this.elementToChange=e,this._observe(),this._interpolate(),e&&(this.interval=setInterval(function(){r._interpolate(!0)},500)),t.addClass(this.link,n),this.container.style.display="",this.fire("show"),a&&!e)try{a.focus()}catch(o){}},hide:function(){clearInterval(this.interval),this.elementToChange=null,t.removeClass(this.link,n),this.container.style.display="none",this.fire("hide")}})}(wysihtml5),function(e){var t=e.dom,n={position:"relative"},i={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},r={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},a={"x-webkit-speech":"",speech:""};e.toolbar.Speech=function(o,s){var l=document.createElement("input");if(!e.browser.supportsSpeechApiOn(l))return s.style.display="none",void 0;var c=document.createElement("div");e.lang.object(i).merge({width:s.offsetWidth+"px",height:s.offsetHeight+"px"}),t.insert(l).into(c),t.insert(c).into(s),t.setStyles(r).on(l),t.setAttributes(a).on(l),t.setStyles(i).on(c),t.setStyles(n).on(s);var u="onwebkitspeechchange"in l?"webkitspeechchange":"speechchange";t.observe(l,u,function(){o.execCommand("insertText",l.value),l.value=""}),t.observe(l,"click",function(e){t.hasClass(s,"wysihtml5-command-disabled")&&e.preventDefault(),e.stopPropagation()})}}(wysihtml5),function(e){var t="wysihtml5-command-disabled",n="wysihtml5-commands-disabled",i="wysihtml5-command-active",r="wysihtml5-action-active",a=e.dom;
e.toolbar.Toolbar=Base.extend({constructor:function(t,n){this.editor=t,this.container="string"==typeof n?document.getElementById(n):n,this.composer=t.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),this.show();for(var i=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),r=i.length,a=0;r>a;a++)new e.toolbar.Speech(this,i[a])},_getLinks:function(t){for(var n,i,r,a,o,s=this[t+"Links"]=e.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+t+"]")).get(),l=s.length,c=0,u=this[t+"Mapping"]={};l>c;c++)n=s[c],r=n.getAttribute("data-wysihtml5-"+t),a=n.getAttribute("data-wysihtml5-"+t+"-value"),i=this.container.querySelector("[data-wysihtml5-"+t+"-group='"+r+"']"),o=this._getDialog(n,r),u[r+":"+a]={link:n,group:i,name:r,value:a,dialog:o,state:!1}},_getDialog:function(t,n){var i,r,a=this,o=this.container.querySelector("[data-wysihtml5-dialog='"+n+"']");return o&&(i=new e.toolbar.Dialog(t,o),i.observe("show",function(){r=a.composer.selection.getBookmark(),a.editor.fire("show:dialog",{command:n,dialogContainer:o,commandLink:t})}),i.observe("save",function(e){r&&a.composer.selection.setBookmark(r),a._execCommand(n,e),a.editor.fire("save:dialog",{command:n,dialogContainer:o,commandLink:t})}),i.observe("cancel",function(){a.editor.focus(!1),a.editor.fire("cancel:dialog",{command:n,dialogContainer:o,commandLink:t})})),i},execCommand:function(e,t){if(!this.commandsDisabled){var n=this.commandMapping[e+":"+t];n&&n.dialog&&!n.state?n.dialog.show():this._execCommand(e,t)}},_execCommand:function(e,t){this.editor.focus(!1),this.composer.commands.exec(e,t),this._updateLinkStates()},execAction:function(e){var t=this.editor;switch(e){case"change_view":t.currentView===t.textarea?t.fire("change_view","composer"):t.fire("change_view","textarea")}},_observe:function(){for(var e=this,t=this.editor,i=this.container,r=this.commandLinks.concat(this.actionLinks),o=r.length,s=0;o>s;s++)a.setAttributes({href:"javascript:;",unselectable:"on"}).on(r[s]);a.delegate(i,"[data-wysihtml5-command]","mousedown",function(e){e.preventDefault()}),a.delegate(i,"[data-wysihtml5-command]","click",function(t){var n=this,i=n.getAttribute("data-wysihtml5-command"),r=n.getAttribute("data-wysihtml5-command-value");e.execCommand(i,r),t.preventDefault()}),a.delegate(i,"[data-wysihtml5-action]","click",function(t){var n=this.getAttribute("data-wysihtml5-action");e.execAction(n),t.preventDefault()}),t.observe("focus:composer",function(){e.bookmark=null,clearInterval(e.interval),e.interval=setInterval(function(){e._updateLinkStates()},500)}),t.observe("blur:composer",function(){clearInterval(e.interval)}),t.observe("destroy:composer",function(){clearInterval(e.interval)}),t.observe("change_view",function(t){setTimeout(function(){e.commandsDisabled="composer"!==t,e._updateLinkStates(),e.commandsDisabled?a.addClass(i,n):a.removeClass(i,n)},0)})},_updateLinkStates:function(){var n,o,s,l,c=(this.composer.element,this.commandMapping),u=this.actionMapping;for(n in c)l=c[n],this.commandsDisabled?(o=!1,a.removeClass(l.link,i),l.group&&a.removeClass(l.group,i),l.dialog&&l.dialog.hide()):(o=this.composer.commands.state(l.name,l.value),e.lang.object(o).isArray()&&(o=1===o.length?o[0]:!0),a.removeClass(l.link,t),l.group&&a.removeClass(l.group,t)),l.state!==o&&(l.state=o,o?(a.addClass(l.link,i),l.group&&a.addClass(l.group,i),l.dialog&&("object"==typeof o?l.dialog.show(o):l.dialog.hide())):(a.removeClass(l.link,i),l.group&&a.removeClass(l.group,i),l.dialog&&l.dialog.hide()));for(n in u)s=u[n],"change_view"===s.name&&(s.state=this.editor.currentView===this.editor.textarea,s.state?a.addClass(s.link,r):a.removeClass(s.link,r))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(e){var t,n={name:t,style:!0,toolbar:t,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:e.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:t,allowObjectResizing:!0,supportTouchDevices:!0};e.Editor=e.lang.Dispatcher.extend({constructor:function(t,i){if(this.textareaElement="string"==typeof t?document.getElementById(t):t,this.config=e.lang.object({}).merge(n).merge(i).get(),this.textarea=new e.views.Textarea(this,this.textareaElement,this.config),this.currentView=this.textarea,this._isCompatible=e.browser.supported(),!this._isCompatible||!this.config.supportTouchDevices&&e.browser.isTouchDevice()){var r=this;return setTimeout(function(){r.fire("beforeload").fire("load")},0),void 0}e.dom.addClass(document.body,this.config.bodyClassName),this.composer=new e.views.Composer(this,this.textareaElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.observe("beforeload",function(){this.synchronizer=new e.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new e.toolbar.Toolbar(this,this.config.toolbar))})},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(e){return this.currentView.getValue(e)},setValue:function(e,t){return e?(this.currentView.setValue(e,t),this):this.clear()},focus:function(e){return this.currentView.focus(e),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(t){var n=this.config.parser(t,this.config.parserRules,this.composer.sandbox.getDocument(),!0);return"object"==typeof t&&e.quirks.redraw(t),n},_initParser:function(){this.observe("paste:composer",function(){var t=!0,n=this;n.composer.selection.executeAndRestore(function(){e.quirks.cleanPastedHTML(n.composer.element),n.parse(n.composer.element)},t)})}})}(wysihtml5),/*  Copyright Mihai Bazon, 2002-2005  |  www.bazon.net/mishoo
 * -----------------------------------------------------------
 *
 * The DHTML Calendar, version 1.0 "It is happening again"
 *
 * Details and latest version at:
 * www.dynarch.com/projects/calendar
 *
 * This script is developed by Dynarch.com.  Visit us at www.dynarch.com.
 *
 * This script is distributed under the GNU Lesser General Public License.
 * Read the entire license text here: http://www.gnu.org/licenses/lgpl.html
 */
mouseX=null,mouseY=null,Calendar=function(e,t,n,i,r){if(this.highlightedDates=[],null!=r)for(var a=r.split(","),o=0;o<a.length;++o)this.highlightedDates[a[o]]="1";if(this.activeDiv=null,this.currentDateEl=null,this.getDateStatus=null,this.getDateToolTip=null,this.getDateText=null,this.timeout=null,this.onSelected=n||null,this.onClose=i||null,this.dragging=!1,this.hidden=!1,this.minYear=1970,this.maxYear=2050,this.dateFormat=Calendar._TT.DEF_DATE_FORMAT,this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT,this.isPopup=!0,this.weekNumbers=!0,this.firstDayOfWeek="number"==typeof e?e:Calendar._FD,this.showsOtherMonths=!1,this.dateStr=t,this.ar_days=null,this.showsTime=!1,this.time24=!0,this.yearStep=2,this.hiliteToday=!0,this.multiple=null,this.table=null,this.element=null,this.tbody=null,this.firstdayname=null,this.monthsCombo=null,this.yearsCombo=null,this.hilitedMonth=null,this.activeMonth=null,this.hilitedYear=null,this.activeYear=null,this.dateClicked=!1,"undefined"==typeof Calendar._SDN){"undefined"==typeof Calendar._SDN_len&&(Calendar._SDN_len=3);for(var s=new Array,o=8;o>0;)s[--o]=Calendar._DN[o].substr(0,Calendar._SDN_len);Calendar._SDN=s,"undefined"==typeof Calendar._SMN_len&&(Calendar._SMN_len=3),s=new Array;for(var o=12;o>0;)s[--o]=Calendar._MN[o].substr(0,Calendar._SMN_len);Calendar._SMN=s}},Calendar._C=null,Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent),Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent),Calendar.is_opera=/opera/i.test(navigator.userAgent),Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent),Calendar.getAbsolutePos=function(e){var t=0,n=0,i=/^div$/i.test(e.tagName);i&&e.scrollLeft&&(t=e.scrollLeft),i&&e.scrollTop&&(n=e.scrollTop);var r={x:e.offsetLeft-t,y:e.offsetTop-n};if(e.offsetParent){var a=this.getAbsolutePos(e.offsetParent);r.x+=a.x,r.y+=a.y}return r},Calendar.isRelated=function(e,t){var n=t.relatedTarget;if(!n){var i=t.type;"mouseover"==i?n=t.fromElement:"mouseout"==i&&(n=t.toElement)}for(;n;){if(n==e)return!0;n=n.parentNode}return!1},Calendar.removeClass=function(e,t){if(e&&e.className){for(var n=e.className.split(" "),i=new Array,r=n.length;r>0;)n[--r]!=t&&(i[i.length]=n[r]);e.className=i.join(" ")}},Calendar.addClass=function(e,t){Calendar.removeClass(e,t),e.className+=" "+t},Calendar.getElement=function(e){for(var t=Calendar.is_ie?window.event.srcElement:e.currentTarget;1!=t.nodeType||/^div$/i.test(t.tagName);)t=t.parentNode;return t},Calendar.getTargetElement=function(e){for(var t=Calendar.is_ie?window.event.srcElement:e.target;1!=t.nodeType;)t=t.parentNode;return t},Calendar.stopEvent=function(e){return e||(e=window.event),Calendar.is_ie?(e.cancelBubble=!0,e.returnValue=!1):(e.preventDefault(),e.stopPropagation()),!1},Calendar.addEvent=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e["on"+t]=n},Calendar.removeEvent=function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!0):e["on"+t]=null},Calendar.createElement=function(e,t){var n=null;return n=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",e):document.createElement(e),"undefined"!=typeof t&&t.appendChild(n),n},Calendar._add_evs=function(el){with(Calendar)addEvent(el,"mouseover",dayMouseOver),addEvent(el,"mousedown",dayMouseDown),addEvent(el,"mouseout",dayMouseOut),is_ie&&(addEvent(el,"dblclick",dayMouseDblClick),el.setAttribute("unselectable",!0))},Calendar.findMonth=function(e){return"undefined"!=typeof e.month?e:"undefined"!=typeof e.parentNode.month?e.parentNode:null},Calendar.findYear=function(e){return"undefined"!=typeof e.year?e:"undefined"!=typeof e.parentNode.year?e.parentNode:null},Calendar.showMonthsCombo=function(){var e=Calendar._C;if(!e)return!1;var e=e,t=e.activeDiv,n=e.monthsCombo;e.hilitedMonth&&Calendar.removeClass(e.hilitedMonth,"hilite"),e.activeMonth&&Calendar.removeClass(e.activeMonth,"active");var i=e.monthsCombo.getElementsByTagName("div")[e.date.getMonth()];Calendar.addClass(i,"active"),e.activeMonth=i;var r=n.style;if(r.display="block",t.navtype<0)r.left=t.offsetLeft+"px";else{var a=n.offsetWidth;"undefined"==typeof a&&(a=50),r.left=t.offsetLeft+t.offsetWidth-a+"px"}r.top=t.offsetTop+t.offsetHeight+"px"},Calendar.showYearsCombo=function(e){var t=Calendar._C;if(!t)return!1;var t=t,n=t.activeDiv,i=t.yearsCombo;t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),t.activeYear&&Calendar.removeClass(t.activeYear,"active"),t.activeYear=null;for(var r=t.date.getFullYear()+(e?1:-1),a=i.firstChild,o=!1,s=12;s>0;--s)r>=t.minYear&&r<=t.maxYear?(a.innerHTML=r,a.year=r,a.style.display="block",o=!0):a.style.display="none",a=a.nextSibling,r+=e?t.yearStep:-t.yearStep;if(o){var l=i.style;if(l.display="block",n.navtype<0)l.left=n.offsetLeft+"px";else{var c=i.offsetWidth;"undefined"==typeof c&&(c=50),l.left=n.offsetLeft+n.offsetWidth-c+"px"}l.top=n.offsetTop+n.offsetHeight+"px"}},Calendar.tableMouseUp=function(ev){var cal=Calendar._C;if(!cal)return!1;cal.timeout&&clearTimeout(cal.timeout);var el=cal.activeDiv;if(!el)return!1;var target=Calendar.getTargetElement(ev);ev||(ev=window.event),Calendar.removeClass(el,"active"),(target==el||target.parentNode==el)&&Calendar.cellClick(el,ev);var mon=Calendar.findMonth(target),date=null;if(mon)date=new Date(cal.date),mon.month!=date.getMonth()&&(date.setMonth(mon.month),cal.setDate(date),cal.dateClicked=!1,cal.callHandler());else{var year=Calendar.findYear(target);year&&(date=new Date(cal.date),year.year!=date.getFullYear()&&(date.setFullYear(year.year),cal.setDate(date),cal.dateClicked=!1,cal.callHandler()))}with(Calendar)return removeEvent(document,"mouseup",tableMouseUp),removeEvent(document,"mouseover",tableMouseOver),removeEvent(document,"mousemove",tableMouseOver),cal._hideCombos(),_C=null,stopEvent(ev)},Calendar.tableMouseOver=function(e){var t=Calendar._C;if(t){var n=t.activeDiv,i=Calendar.getTargetElement(e);if(i==n||i.parentNode==n?(Calendar.addClass(n,"hilite active"),Calendar.addClass(n.parentNode,"rowhilite")):(("undefined"==typeof n.navtype||50!=n.navtype&&(0==n.navtype||Math.abs(n.navtype)>2))&&Calendar.removeClass(n,"active"),Calendar.removeClass(n,"hilite"),Calendar.removeClass(n.parentNode,"rowhilite")),e||(e=window.event),50==n.navtype&&i!=n){var r,a=Calendar.getAbsolutePos(n),o=n.offsetWidth,s=e.clientX,l=!0;s>a.x+o?(r=s-a.x-o,l=!1):r=a.x-s,0>r&&(r=0);for(var c=n._range,u=n._current,h=Math.floor(r/10)%c.length,d=c.length;--d>=0&&c[d]!=u;);for(;h-->0;)l?--d<0&&(d=c.length-1):++d>=c.length&&(d=0);var p=c[d];n.innerHTML=p,t.onUpdateTime()}var f=Calendar.findMonth(i);if(f)f.month!=t.date.getMonth()?(t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite"),Calendar.addClass(f,"hilite"),t.hilitedMonth=f):t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");else{t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");var m=Calendar.findYear(i);m?m.year!=t.date.getFullYear()?(t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),Calendar.addClass(m,"hilite"),t.hilitedYear=m):t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"):t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite")}return Calendar.stopEvent(e)}},Calendar.tableMouseDown=function(e){return Calendar.getTargetElement(e)==Calendar.getElement(e)?Calendar.stopEvent(e):void 0},Calendar.calDragIt=function(e){var t=Calendar._C;if(!t||!t.dragging)return!1;var n,i;Calendar.is_ie?(i=window.event.clientY+document.body.scrollTop,n=window.event.clientX+document.body.scrollLeft):(n=e.pageX,i=e.pageY),t.hideShowCovered();var r=t.element.style;return r.left=n-t.xOffs+"px",r.top=i-t.yOffs+"px",Calendar.stopEvent(e)},Calendar.calDragEnd=function(ev){var cal=Calendar._C;if(!cal)return!1;with(cal.dragging=!1,Calendar)removeEvent(document,"mousemove",calDragIt),removeEvent(document,"mouseup",calDragEnd),tableMouseUp(ev);cal.hideShowCovered()},Calendar.dayMouseDown=function(ev){var el=Calendar.getElement(ev);if(el.disabled)return!1;var cal=el.calendar;if(cal.activeDiv=el,Calendar._C=cal,300!=el.navtype)with(Calendar)50==el.navtype?(el._current=el.innerHTML,addEvent(document,"mousemove",tableMouseOver)):addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver),addClass(el,"hilite active"),addEvent(document,"mouseup",tableMouseUp);else cal.isPopup&&cal._dragStart(ev);return-1==el.navtype||1==el.navtype?(cal.timeout&&clearTimeout(cal.timeout),cal.timeout=setTimeout("Calendar.showMonthsCombo()",250)):-2==el.navtype||2==el.navtype?(cal.timeout&&clearTimeout(cal.timeout),cal.timeout=setTimeout(el.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):cal.timeout=null,Calendar.stopEvent(ev)},Calendar.dayMouseDblClick=function(e){Calendar.cellClick(Calendar.getElement(e),e||window.event),Calendar.is_ie&&document.selection.empty()},Calendar.dayMouseOver=function(e){var t=Calendar.getElement(e);return Calendar.isRelated(t,e)||Calendar._C||t.disabled?!1:(t.ttip&&("_"==t.ttip.substr(0,1)&&(t.ttip=t.caldate.print(t.calendar.ttDateFormat)+t.ttip.substr(1)),t.calendar.tooltips.innerHTML=t.ttip),300!=t.navtype&&(Calendar.addClass(t,"hilite"),t.caldate&&Calendar.addClass(t.parentNode,"rowhilite")),Calendar.stopEvent(e))},Calendar.dayMouseOut=function(ev){with(Calendar){var el=getElement(ev);return isRelated(el,ev)||_C||el.disabled?!1:(removeClass(el,"hilite"),el.caldate&&removeClass(el.parentNode,"rowhilite"),el.calendar&&(el.calendar.tooltips.innerHTML=_TT.SEL_DATE),stopEvent(ev))}},Calendar.cellClick=function(e,t){function n(e){var t=o.getDate(),n=o.getMonthDays(e);t>n&&o.setDate(n),o.setMonth(e)}var i=e.calendar,r=!1,a=!1,o=null;if("undefined"==typeof e.navtype){i.currentDateEl&&(Calendar.removeClass(i.currentDateEl,"selected"),Calendar.addClass(e,"selected"),r=i.currentDateEl==e,r||(i.currentDateEl=e)),i.date.setDateOnly(e.caldate),o=i.date;var s=!(i.dateClicked=!e.otherMonth);s||i.currentDateEl?a=!e.disabled:i._toggleMultipleDate(new Date(o)),s&&i._init(i.firstDayOfWeek,o)}else{if(200==e.navtype)return Calendar.removeClass(e,"hilite"),i.callCloseHandler(),void 0;o=new Date(i.date),0==e.navtype&&o.setDateOnly(new Date),i.dateClicked=!1;var l=o.getFullYear(),c=o.getMonth();switch(e.navtype){case 400:Calendar.removeClass(e,"hilite");var u=Calendar._TT.ABOUT;return"undefined"!=typeof u?u+=i.showsTime?Calendar._TT.ABOUT_TIME:"":u='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n',alert(u),void 0;case-2:l>i.minYear&&o.setFullYear(l-1);break;case-1:c>0?n(c-1):l-->i.minYear&&(o.setFullYear(l),n(11));break;case 1:11>c?n(c+1):l<i.maxYear&&(o.setFullYear(l+1),n(0));break;case 2:l<i.maxYear&&o.setFullYear(l+1);break;case 100:return i.setFirstDayOfWeek(e.fdow),void 0;case 50:for(var h=e._range,d=e.innerHTML,p=h.length;--p>=0&&h[p]!=d;);t&&t.shiftKey?--p<0&&(p=h.length-1):++p>=h.length&&(p=0);var f=h[p];return e.innerHTML=f,i.onUpdateTime(),void 0;case 0:if("function"==typeof i.getDateStatus&&i.getDateStatus(o,o.getFullYear(),o.getMonth(),o.getDate()))return!1}o.equalsTo(i.date)?0==e.navtype&&(a=r=!0):(i.setDate(o),a=!0)}a&&t&&i.callHandler(),r&&(Calendar.removeClass(e,"hilite"),t&&i.callCloseHandler())},Calendar.prototype.create=function(e){var t=null;e?(t=e,this.isPopup=!1):(t=document.getElementsByTagName("body")[0],this.isPopup=!0),this.date=this.dateStr?new Date(this.dateStr):new Date;var n=Calendar.createElement("table");this.table=n,n.cellSpacing=1,n.cellPadding=0,n.calendar=this,Calendar.addEvent(n,"mousedown",Calendar.tableMouseDown);var i=Calendar.createElement("div");this.element=i,i.className="calendar",this.isPopup&&(i.style.position="absolute",i.style.display="none"),i.appendChild(n);var r=Calendar.createElement("thead",n),a=null,o=null,s=this,l=function(e,t,n){return a=Calendar.createElement("td",o),a.colSpan=t,a.className="button",0!=n&&Math.abs(n)<=2&&(a.className+=" nav"),Calendar._add_evs(a),a.calendar=s,a.navtype=n,a.innerHTML="<div unselectable='on'>"+e+"</div>",a};o=Calendar.createElement("tr",r);var c=6;this.isPopup&&--c,this.weekNumbers&&++c,l("?",1,400).ttip=Calendar._TT.INFO,this.title=l("",c,300),this.title.className="title",this.isPopup&&(this.title.ttip=Calendar._TT.DRAG_TO_MOVE,this.title.style.cursor="move",l("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE),o=Calendar.createElement("tr",r),o.className="headrow",this._nav_py=l("&#x00ab;",1,-2),this._nav_py.ttip=Calendar._TT.PREV_YEAR,this._nav_pm=l("&#x2039;",1,-1),this._nav_pm.ttip=Calendar._TT.PREV_MONTH,this._nav_now=l(Calendar._TT.TODAY,this.weekNumbers?4:3,0),this._nav_now.ttip=Calendar._TT.GO_TODAY,this._nav_nm=l("&#x203a;",1,1),this._nav_nm.ttip=Calendar._TT.NEXT_MONTH,this._nav_ny=l("&#x00bb;",1,2),this._nav_ny.ttip=Calendar._TT.NEXT_YEAR,o=Calendar.createElement("tr",r),o.className="daynames",this.weekNumbers&&(a=Calendar.createElement("td",o),a.className="name wn",a.innerHTML=Calendar._TT.WK);for(var u=7;u>0;--u)a=Calendar.createElement("td",o),u||(a.navtype=100,a.calendar=this,Calendar._add_evs(a));this.firstdayname=this.weekNumbers?o.firstChild.nextSibling:o.firstChild,this._displayWeekdays();var h=Calendar.createElement("tbody",n);for(this.tbody=h,u=6;u>0;--u){o=Calendar.createElement("tr",h),this.weekNumbers&&(a=Calendar.createElement("td",o));for(var d=7;d>0;--d)a=Calendar.createElement("td",o),a.calendar=this,Calendar._add_evs(a)}this.showsTime?(o=Calendar.createElement("tr",h),o.className="time",a=Calendar.createElement("td",o),a.className="time",a.colSpan=2,a.innerHTML=Calendar._TT.TIME||"&nbsp;",a=Calendar.createElement("td",o),a.className="time",a.colSpan=this.weekNumbers?4:3,function(){function e(e,t,n,i){var r=Calendar.createElement("span",a);if(r.className=e,r.innerHTML=t,r.calendar=s,r.ttip=Calendar._TT.TIME_PART,r.navtype=50,r._range=[],"number"!=typeof n)r._range=n;else for(var o=n;i>=o;++o){var l;l=10>o&&i>=10?"0"+o:""+o,r._range[r._range.length]=l}return Calendar._add_evs(r),r}var t=s.date.getHours(),n=s.date.getMinutes(),i=!s.time24,r=t>12;i&&r&&(t-=12);var l=e("hour",t,i?1:0,i?12:23),c=Calendar.createElement("span",a);c.innerHTML=":",c.className="colon";var u=e("minute",n,0,59),h=null;a=Calendar.createElement("td",o),a.className="time",a.colSpan=2,i?h=e("ampm",r?"pm":"am",["am","pm"]):a.innerHTML="&nbsp;",s.onSetTime=function(){var e,t=this.date.getHours(),n=this.date.getMinutes();i&&(e=t>=12,e&&(t-=12),0==t&&(t=12),h.innerHTML=e?"pm":"am"),l.innerHTML=10>t?"0"+t:t,u.innerHTML=10>n?"0"+n:n},s.onUpdateTime=function(){var e=this.date,t=parseInt(l.innerHTML,10);i&&(/pm/i.test(h.innerHTML)&&12>t?t+=12:/am/i.test(h.innerHTML)&&12==t&&(t=0));var n=e.getDate(),r=e.getMonth(),a=e.getFullYear();e.setHours(t),e.setMinutes(parseInt(u.innerHTML,10)),e.setFullYear(a),e.setMonth(r),e.setDate(n),this.dateClicked=!1,this.callHandler()}}()):this.onSetTime=this.onUpdateTime=function(){};var p=Calendar.createElement("tfoot",n);for(o=Calendar.createElement("tr",p),o.className="footrow",a=l(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300),a.className="ttip",this.isPopup&&(a.ttip=Calendar._TT.DRAG_TO_MOVE,a.style.cursor="move"),this.tooltips=a,i=Calendar.createElement("div",this.element),this.monthsCombo=i,i.className="combo",u=0;u<Calendar._MN.length;++u){var f=Calendar.createElement("div");f.className=Calendar.is_ie?"label-IEfix":"label",f.month=u,f.innerHTML=Calendar._SMN[u],i.appendChild(f)}for(i=Calendar.createElement("div",this.element),this.yearsCombo=i,i.className="combo",u=12;u>0;--u){var m=Calendar.createElement("div");m.className=Calendar.is_ie?"label-IEfix":"label",i.appendChild(m)}this._init(this.firstDayOfWeek,this.date),t.appendChild(this.element)},Calendar._keyEvent=function(e){function t(){h=r.currentDateEl;var e=h.pos;l=15&e,c=e>>4,u=r.ar_days[c][l]}function n(){var e=new Date(r.date);e.setDate(e.getDate()-d),r.setDate(e)}function i(){var e=new Date(r.date);e.setDate(e.getDate()+d),r.setDate(e)}var r=window._dynarch_popupCalendar;if(!r||r.multiple)return!1;Calendar.is_ie&&(e=window.event);var a=Calendar.is_ie||"keypress"==e.type,o=e.keyCode;if(e.ctrlKey)switch(o){case 37:a&&Calendar.cellClick(r._nav_pm);break;case 38:a&&Calendar.cellClick(r._nav_py);break;case 39:a&&Calendar.cellClick(r._nav_nm);break;case 40:a&&Calendar.cellClick(r._nav_ny);break;default:return!1}else switch(o){case 32:Calendar.cellClick(r._nav_now);break;case 27:a&&r.callCloseHandler();break;case 37:case 38:case 39:case 40:if(a){var s,l,c,u,h,d;for(s=37==o||38==o,d=37==o||39==o?1:7,t();;){switch(o){case 37:if(!(--l>=0)){l=6,o=38;continue}u=r.ar_days[c][l];break;case 38:--c>=0?u=r.ar_days[c][l]:(n(),t());break;case 39:if(!(++l<7)){l=0,o=40;continue}u=r.ar_days[c][l];break;case 40:++c<r.ar_days.length?u=r.ar_days[c][l]:(i(),t())}break}u&&(u.disabled?s?n():i():Calendar.cellClick(u))}break;case 13:a&&Calendar.cellClick(r.currentDateEl,e);break;default:return!1}return Calendar.stopEvent(e)},Calendar.prototype._init=function(e,t){var n=new Date,i=n.getFullYear(),r=n.getMonth(),a=n.getDate();this.table.style.visibility="hidden";var o=t.getFullYear();o<this.minYear?(o=this.minYear,t.setFullYear(o)):o>this.maxYear&&(o=this.maxYear,t.setFullYear(o)),this.firstDayOfWeek=e,this.date=new Date(t);var s=t.getMonth(),l=t.getDate();t.getMonthDays(),t.setDate(1);var c=(t.getDay()-this.firstDayOfWeek)%7;0>c&&(c+=7),t.setDate(0-c),t.setDate(t.getDate()+1);var u=this.tbody.firstChild;Calendar._SMN[s];for(var h=this.ar_days=new Array,d=Calendar._TT.WEEKEND,p=this.multiple?this.datesCells={}:null,f=0;6>f;++f,u=u.nextSibling){var m=u.firstChild;this.weekNumbers&&(m.className="day wn",m.innerHTML=t.getWeekNumber(),m=m.nextSibling),u.className="daysrow";for(var g,v=!1,y=h[f]=[],b=0;7>b;++b,m=m.nextSibling,t.setDate(g+1)){g=t.getDate();var _=t.getDay();m.className="day",m.pos=f<<4|b,y[b]=m;var w=t.getMonth()==s;if(w)m.otherMonth=!1,v=!0;else{if(!this.showsOtherMonths){m.className="emptycell",m.innerHTML="&nbsp;",m.disabled=!0;continue}m.className+=" othermonth",m.otherMonth=!0}if(m.disabled=!1,m.innerHTML=this.getDateText?this.getDateText(t,g):g,p&&(p[t.print("%Y%m%d")]=m),this.getDateStatus){var x=this.getDateStatus(t,o,s,g);if(this.getDateToolTip){var C=this.getDateToolTip(t,o,s,g);C&&(m.title=C)}x===!0?(m.className+=" disabled",m.disabled=!0):(/disabled/i.test(x)&&(m.disabled=!0),m.className+=" "+x)}if(!m.disabled){m.caldate=new Date(t),m.ttip="_";var k=""+m.caldate.getFullYear()+"/"+(m.caldate.getMonth()+1)+"/"+m.caldate.getDate();this.highlightedDates[k]&&(m.className+=" has_slips"),!this.multiple&&w&&g==l&&this.hiliteToday&&(m.className+=" selected",this.currentDateEl=m),t.getFullYear()==i&&t.getMonth()==r&&g==a&&(m.className+=" today",m.ttip+=Calendar._TT.PART_TODAY),-1!=d.indexOf(_.toString())&&(m.className+=m.otherMonth?" oweekend":" weekend")}}v||this.showsOtherMonths||(u.className="emptyrow")}this.title.innerHTML=Calendar._MN[s]+", "+o,this.onSetTime(),this.table.style.visibility="visible",this._initMultipleDates()},Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var e in this.multiple){var t=this.datesCells[e],n=this.multiple[e];n&&t&&(t.className+=" selected")}},Calendar.prototype._toggleMultipleDate=function(e){if(this.multiple){var t=e.print("%Y%m%d"),n=this.datesCells[t];if(n){var i=this.multiple[t];i?(Calendar.removeClass(n,"selected"),delete this.multiple[t]):(Calendar.addClass(n,"selected"),this.multiple[t]=e)}}},Calendar.prototype.setDateToolTipHandler=function(e){this.getDateToolTip=e},Calendar.prototype.setDate=function(e){e.equalsTo(this.date)||this._init(this.firstDayOfWeek,e)},Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)},Calendar.prototype.setFirstDayOfWeek=function(e){this._init(e,this.date),this._displayWeekdays()},Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(e){this.getDateStatus=e},Calendar.prototype.setRange=function(e,t){this.minYear=e,this.maxYear=t},Calendar.prototype.callHandler=function(){this.onSelected&&this.onSelected(this,this.date.print(this.dateFormat))},Calendar.prototype.callCloseHandler=function(){this.onClose&&this.onClose(this),this.hideShowCovered()},Calendar.prototype.destroy=function(){var e=this.element.parentNode;e.removeChild(this.element),Calendar._C=null,window._dynarch_popupCalendar=null},Calendar.prototype.reparent=function(e){var t=this.element;t.parentNode.removeChild(t),e.appendChild(t)},Calendar._checkCalendar=function(e){var t=window._dynarch_popupCalendar;if(!t)return!1;for(var n=Calendar.is_ie?Calendar.getElement(e):Calendar.getTargetElement(e);null!=n&&n!=t.element;n=n.parentNode);return null==n?(window._dynarch_popupCalendar.callCloseHandler(),Calendar.stopEvent(e)):void 0},Calendar.prototype.show=function(){for(var e=this.table.getElementsByTagName("tr"),t=e.length;t>0;){var n=e[--t];Calendar.removeClass(n,"rowhilite");for(var i=n.getElementsByTagName("td"),r=i.length;r>0;){var a=i[--r];Calendar.removeClass(a,"hilite"),Calendar.removeClass(a,"active")}}this.element.style.display="block",this.hidden=!1,this.isPopup&&(window._dynarch_popupCalendar=this,Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,"keypress",Calendar._keyEvent),Calendar.addEvent(document,"mousedown",Calendar._checkCalendar)),this.hideShowCovered()},Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"keypress",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar)),this.element.style.display="none",this.hidden=!0,this.hideShowCovered()},Calendar.prototype.showAt=function(e,t){var n=this.element.style;n.left=e+"px",n.top=t+"px",this.show()},Calendar.prototype.showAtElement=function(e,t){function n(e){e.x<0&&(e.x=0),e.y<0&&(e.y=0);var t=document.createElement("div"),n=t.style;n.position="absolute",n.right=n.bottom=n.width=n.height="0px",document.body.appendChild(t);var i=Calendar.getAbsolutePos(t);document.body.removeChild(t),Calendar.is_ie?(i.y+=document.body.scrollTop,i.x+=document.body.scrollLeft):(i.y+=window.scrollY,i.x+=window.scrollX);var r=e.x+e.width-i.x;r>0&&(e.x-=r),r=e.y+e.height-i.y,r>0&&(e.y-=r)}var i,r=this;return i=mouseX?{x:mouseX,y:mouseY-e.offsetHeight}:Calendar.getAbsolutePos(e),t&&"string"==typeof t?(this.element.style.display="block",Calendar.continuation_for_the_fucking_khtml_browser=function(){var a=r.element.offsetWidth,o=r.element.offsetHeight;r.element.style.display="none";var s=t.substr(0,1),l="l";switch(t.length>1&&(l=t.substr(1,1)),s){case"T":i.y-=o;break;case"B":i.y+=e.offsetHeight;break;case"C":i.y+=(e.offsetHeight-o)/2;break;case"t":i.y+=e.offsetHeight-o;break;case"b":}switch(l){case"L":i.x-=a;break;case"R":i.x+=e.offsetWidth;break;case"C":i.x+=(e.offsetWidth-a)/2;break;case"l":i.x+=e.offsetWidth-a;break;case"r":}i.width=a,i.height=o+40,r.monthsCombo.style.display="none",n(i),r.showAt(i.x,i.y)},Calendar.continuation_for_the_fucking_khtml_browser(),void 0):(this.showAt(i.x,i.y+e.offsetHeight),!0)},Calendar.prototype.setDateFormat=function(e){this.dateFormat=e},Calendar.prototype.setTtDateFormat=function(e){this.ttDateFormat=e},Calendar.prototype.parseDate=function(e,t){t||(t=this.dateFormat),this.setDate(Date.parseDate(e,t))},Calendar.prototype.hideShowCovered=function(){function e(e){var t=e.style.visibility;return t||(t=document.defaultView&&"function"==typeof document.defaultView.getComputedStyle?Calendar.is_khtml?"":document.defaultView.getComputedStyle(e,"").getPropertyValue("visibility"):e.currentStyle?e.currentStyle.visibility:""),t}if(Calendar.is_ie||Calendar.is_opera)for(var t=new Array("applet","iframe","select"),n=this.element,i=Calendar.getAbsolutePos(n),r=i.x,a=n.offsetWidth+r,o=i.y,s=n.offsetHeight+o,l=t.length;l>0;)for(var c=document.getElementsByTagName(t[--l]),u=null,h=c.length;h>0;){u=c[--h],i=Calendar.getAbsolutePos(u);var d=i.x,p=u.offsetWidth+d,f=i.y,m=u.offsetHeight+f;this.hidden||d>a||r>p||f>s||o>m?(u.__msh_save_visibility||(u.__msh_save_visibility=e(u)),u.style.visibility=u.__msh_save_visibility):(u.__msh_save_visibility||(u.__msh_save_visibility=e(u)),u.style.visibility="hidden")}},Calendar.prototype._displayWeekdays=function(){for(var e=this.firstDayOfWeek,t=this.firstdayname,n=Calendar._TT.WEEKEND,i=0;7>i;++i){t.className="day name";var r=(i+e)%7;i&&(t.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[r]),t.navtype=100,t.calendar=this,t.fdow=r,Calendar._add_evs(t)),-1!=n.indexOf(r.toString())&&Calendar.addClass(t,"weekend"),t.innerHTML=Calendar._SDN[(i+e)%7],t=t.nextSibling}},Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none",this.yearsCombo.style.display="none"},Calendar.prototype._dragStart=function(ev){if(!this.dragging){this.dragging=!0;var posX,posY;Calendar.is_ie?(posY=window.event.clientY+document.body.scrollTop,posX=window.event.clientX+document.body.scrollLeft):(posY=ev.clientY+window.scrollY,posX=ev.clientX+window.scrollX);var st=this.element.style;with(this.xOffs=posX-parseInt(st.left),this.yOffs=posY-parseInt(st.top),Calendar)addEvent(document,"mousemove",calDragIt),addEvent(document,"mouseup",calDragEnd)}},Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31),Date.SECOND=1e3,Date.MINUTE=60*Date.SECOND,Date.HOUR=60*Date.MINUTE,Date.DAY=24*Date.HOUR,Date.WEEK=7*Date.DAY,Date.parseDate=function(e,t){var n=new Date,i=0,r=-1,a=0,o=e.split(/\W+/),s=t.match(/%./g),l=0,c=0,u=0,h=0;for(l=0;l<o.length;++l)if(o[l])switch(s[l]){case"%d":case"%e":a=parseInt(o[l],10);break;case"%m":r=parseInt(o[l],10)-1;break;case"%Y":case"%y":i=parseInt(o[l],10),100>i&&(i+=i>29?1900:2e3);break;case"%b":case"%B":for(c=0;12>c;++c)if(Calendar._MN[c].substr(0,o[l].length).toLowerCase()==o[l].toLowerCase()){r=c;break}break;case"%H":case"%I":case"%k":case"%l":u=parseInt(o[l],10);break;case"%P":case"%p":/pm/i.test(o[l])&&12>u?u+=12:/am/i.test(o[l])&&u>=12&&(u-=12);break;case"%M":h=parseInt(o[l],10)}if(isNaN(i)&&(i=n.getFullYear()),isNaN(r)&&(r=n.getMonth()),isNaN(a)&&(a=n.getDate()),isNaN(u)&&(u=n.getHours()),isNaN(h)&&(h=n.getMinutes()),0!=i&&-1!=r&&0!=a)return new Date(i,r,a,u,h,0);for(i=0,r=-1,a=0,l=0;l<o.length;++l)if(-1!=o[l].search(/[a-zA-Z]+/)){var d=-1;for(c=0;12>c;++c)if(Calendar._MN[c].substr(0,o[l].length).toLowerCase()==o[l].toLowerCase()){d=c;break}-1!=d&&(-1!=r&&(a=r+1),r=d)}else parseInt(o[l],10)<=12&&-1==r?r=o[l]-1:parseInt(o[l],10)>31&&0==i?(i=parseInt(o[l],10),100>i&&(i+=i>29?1900:2e3)):0==a&&(a=o[l]);return 0==i&&(i=n.getFullYear()),-1!=r&&0!=a?new Date(i,r,a,u,h,0):n},Date.prototype.getMonthDays=function(e){var t=this.getFullYear();return"undefined"==typeof e&&(e=this.getMonth()),0!=t%4||0==t%100&&0!=t%400||1!=e?Date._MD[e]:29},Date.prototype.getDayOfYear=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),t=new Date(this.getFullYear(),0,0,0,0,0),n=e-t;return Math.floor(n/Date.DAY)},Date.prototype.getWeekNumber=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),t=e.getDay();e.setDate(e.getDate()-(t+6)%7+3);var n=e.valueOf();return e.setMonth(0),e.setDate(4),Math.round((n-e.valueOf())/6048e5)+1},Date.prototype.equalsTo=function(e){return this.getFullYear()==e.getFullYear()&&this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()&&this.getHours()==e.getHours()&&this.getMinutes()==e.getMinutes()},Date.prototype.setDateOnly=function(e){var t=new Date(e);this.setDate(1),this.setFullYear(t.getFullYear()),this.setMonth(t.getMonth()),this.setDate(t.getDate())},Date.prototype.print=function(e){var t=this.getMonth(),n=this.getDate(),i=this.getFullYear(),r=this.getWeekNumber(),a=this.getDay(),o={},s=this.getHours(),l=s>=12,c=l?s-12:s,u=this.getDayOfYear();0==c&&(c=12);var h=this.getMinutes(),d=this.getSeconds();o["%a"]=Calendar._SDN[a],o["%A"]=Calendar._DN[a],o["%b"]=Calendar._SMN[t],o["%B"]=Calendar._MN[t],o["%C"]=1+Math.floor(i/100),o["%d"]=10>n?"0"+n:n,o["%e"]=n,o["%H"]=10>s?"0"+s:s,o["%I"]=10>c?"0"+c:c,o["%j"]=100>u?10>u?"00"+u:"0"+u:u,o["%k"]=s,o["%l"]=c,o["%m"]=9>t?"0"+(1+t):1+t,o["%M"]=10>h?"0"+h:h,o["%n"]="\n",o["%p"]=l?"PM":"AM",o["%P"]=l?"pm":"am",o["%s"]=Math.floor(this.getTime()/1e3),o["%S"]=10>d?"0"+d:d,o["%t"]="	",o["%U"]=o["%W"]=o["%V"]=10>r?"0"+r:r,o["%u"]=a+1,o["%w"]=a,o["%y"]=(""+i).substr(2,2),o["%Y"]=i,o["%%"]="%";var p=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return e.replace(p,function(e){return o[e]||e});for(var f=e.match(p),m=0;m<f.length;m++){var g=o[f[m]];g&&(p=new RegExp(f[m],"g"),e=e.replace(p,g))}return e},Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear,Date.prototype.setFullYear=function(e){var t=new Date(this);t.__msh_oldSetFullYear(e),t.getMonth()!=this.getMonth()&&this.setDate(28),this.__msh_oldSetFullYear(e)},window._dynarch_popupCalendar=null,Calendar._DN=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Calendar._SDN=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Calendar._FD=0,Calendar._MN=["January","February","March","April","May","June","July","August","September","October","November","December"],Calendar._SMN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Calendar._TT={},Calendar._TT.INFO="About the calendar",Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) dynarch.com 2002-2005 / Author: Mihai Bazon\nFor latest version visit: http://www.dynarch.com/projects/calendar/\nDistributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details.\n\nDate selection:\n- Use the «, » buttons to select year\n- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n"+"- Hold mouse button on any of the above buttons for faster selection.",Calendar._TT.ABOUT_TIME="\n\nTime selection:\n- Click on any of the time parts to increase it\n- or Shift-click to decrease it\n- or click and drag for faster selection.",Calendar._TT.PREV_YEAR="Prev. year (hold for menu)",Calendar._TT.PREV_MONTH="Prev. month (hold for menu)",Calendar._TT.GO_TODAY="Go Today",Calendar._TT.NEXT_MONTH="Next month (hold for menu)",Calendar._TT.NEXT_YEAR="Next year (hold for menu)",Calendar._TT.SEL_DATE="Select date",Calendar._TT.DRAG_TO_MOVE="Drag to move",Calendar._TT.PART_TODAY=" (today)",Calendar._TT.DAY_FIRST="Display %s first",Calendar._TT.WEEKEND="0,6",Calendar._TT.CLOSE="Close",Calendar._TT.TODAY="Today",Calendar._TT.TIME_PART="(Shift-)Click or drag to change value",Calendar._TT.DEF_DATE_FORMAT="%Y-%m-%d",Calendar._TT.TT_DATE_FORMAT="%a, %b %e",Calendar._TT.WK="wk",Calendar._TT.TIME="Time:",/*  Copyright Mihai Bazon, 2002, 2003  |  http://dynarch.com/mishoo/
 * ---------------------------------------------------------------------------
 *
 * The DHTML Calendar
 *
 * Details and latest version at:
 * http://dynarch.com/mishoo/calendar.epl
 *
 * This script is distributed under the GNU Lesser General Public License.
 * Read the entire license text here: http://www.gnu.org/licenses/lgpl.html
 *
 * This file defines helper functions for setting up the calendar.  They are
 * intended to help non-programmers get a working calendar on their site
 * quickly.  This script should not be seen as part of the calendar.  It just
 * shows you what one can do with the calendar, while in the same time
 * providing a quick and simple method for setting it up.  If you need
 * exhaustive customization of the calendar creation process feel free to
 * modify this code to suit your needs (this is recommended and much better
 * than modifying calendar.js itself).
 */
Calendar.setup=function(e){function t(t,n){"undefined"==typeof e[t]&&(e[t]=n)}function n(e){var t=e.params,n=e.dateClicked||t.electric;if(n&&t.inputField&&(t.inputField.value=e.date.print(t.ifFormat),"function"==typeof t.inputField.onchange&&t.inputField.onchange()),e.dateClicked&&t.dateClickURL){var i=e.date.getFullYear(),r=e.date.getMonth()+1,a=e.date.getDate();window.location=t.dateClickURL+"/"+i+"/"+r+"/"+a}n&&t.displayArea&&(t.displayArea.innerHTML=e.date.print(t.daFormat)),n&&"function"==typeof t.onUpdate&&t.onUpdate(e),n&&t.flat&&"function"==typeof t.flatCallback&&t.flatCallback(e),n&&t.singleClick&&e.dateClicked&&e.callCloseHandler()}t("inputField",null),t("displayArea",null),t("button",null),t("eventName","click"),t("ifFormat","%Y/%m/%d"),t("daFormat","%Y/%m/%d"),t("singleClick",!0),t("disableFunc",null),t("dateStatusFunc",e.disableFunc),t("dateText",null),t("firstDay",1),t("align","Br"),t("range",[1990,2030]),t("weekNumbers",!0),t("flat",null),t("flatCallback",null),t("onSelect",null),t("onClose",null),t("onUpdate",null),t("date",null),t("showsTime",!1),t("timeFormat","24"),t("electric",!0),t("step",2),t("position",null),t("cache",!1),t("showOthers",!1),t("multiple",null),t("dateClickURL",null),t("highlighted_dates",null);var i=["inputField","displayArea","button"];for(var r in i)"string"==typeof e[i[r]]&&(e[i[r]]=document.getElementById(e[i[r]]));if(!(e.flat||e.multiple||e.inputField||e.displayArea||e.button))return alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(null!==e.flat){if("string"==typeof e.flat&&(e.flat=document.getElementById(e.flat)),!e.flat)return alert("Calendar.setup:\n  Flat specified but can't find parent."),!1;var a=new Calendar(e.firstDay,e.date,e.onSelect||n,e.highlighted_dates);return a.showsOtherMonths=e.showOthers,a.showsTime=e.showsTime,a.time24="24"==e.timeFormat,a.params=e,a.weekNumbers=e.weekNumbers,a.setRange(e.range[0],e.range[1]),a.setDateStatusHandler(e.dateStatusFunc),a.getDateText=e.dateText,e.ifFormat&&a.setDateFormat(e.ifFormat),e.inputField&&"string"==typeof e.inputField.value&&a.parseDate(e.inputField.value),a.create(e.flat),a.show(),!1}var o=e.button||e.displayArea||e.inputField;return o["on"+e.eventName]=function(){var t=e.inputField||e.displayArea,i=e.inputField?e.ifFormat:e.daFormat,r=!1,a=window.calendar;if(t&&(e.date=Date.parseDate(t.value||t.innerHTML,i)),a&&e.cache?(e.date&&a.setDate(e.date),a.hide()):(window.calendar=a=new Calendar(e.firstDay,e.date,e.onSelect||n,e.onClose||function(e){e.hide()},e.highlighted_dates),a.showsTime=e.showsTime,a.time24="24"==e.timeFormat,a.weekNumbers=e.weekNumbers,r=!0),e.multiple){a.multiple={};for(var o=e.multiple.length;--o>=0;){var s=e.multiple[o],l=s.print("%Y%m%d");a.multiple[l]=s}}return a.showsOtherMonths=e.showOthers,a.yearStep=e.step,a.setRange(e.range[0],e.range[1]),a.params=e,a.setDateStatusHandler(e.dateStatusFunc),a.getDateText=e.dateText,a.setDateFormat(i),r&&a.create(),a.refresh(),e.position?a.showAt(e.position[0],e.position[1]):a.showAtElement(e.button||e.displayArea||e.inputField,e.align),!1},a},function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n;e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,i){var r=e.Event(n);return t.trigger(r,i),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(i){var r,a,o,s,l,c,u,h;if(n.fire(i,"ajax:before")){if(s=i.data("cross-domain"),l=s===t?null:s,c=i.data("with-credentials")||null,u=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),a=i.attr("action"),o=i.serializeArray();var d=i.data("ujs:submit-button");d&&(o.push(d),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),a=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",a=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):(r=i.data("method"),a=n.href(i),o=i.data("params")||null);h={type:r||"GET",data:o,dataType:u,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[e,r])},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:l},c&&(h.xhrFields={withCredentials:c}),a&&(h.url=a);var p=n.ajax(h);return i.trigger("ajax:send",p),p}return!1},handleMethod:function(i){var r=n.href(i),a=i.data("method"),o=i.attr("target"),s=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+r+'"></form>'),u='<input name="_method" value="'+a+'" type="hidden" />';l!==t&&s!==t&&(u+='<input name="'+l+'" value="'+s+'" type="hidden" />'),o&&c.attr("target",o),c.hide().append(u).appendTo("body"),c.submit()},disableFormElements:function(t){t.find(n.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(n.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,i=e.data("confirm"),r=!1;return i?(n.fire(e,"confirm")&&(r=n.confirm(i),t=n.fire(e,"confirm:complete",[r])),r&&t):!0},blankInputs:function(t,n,i){var r,a,o=e(),s=n||"input,textarea",l=t.find(s);return l.each(function(){if(r=e(this),a=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!a==!i){if(r.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;o=o.add(r)}}),o.length?o:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),e(document).delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),e(document).delegate(n.linkClickSelector,"click.rails",function(i){var r=e(this),a=r.data("method"),o=r.data("params");if(!n.allowAction(r))return n.stopEverything(i);if(r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==t){if(!(!i.metaKey&&!i.ctrlKey||a&&"GET"!==a||o))return!0;var s=n.handleRemote(r);return s===!1?n.enableElement(r):s.error(function(){n.enableElement(r)}),!1}return r.data("method")?(n.handleMethod(r),!1):void 0}),e(document).delegate(n.buttonClickSelector,"click.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),e(document).delegate(n.inputChangeSelector,"change.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),e(document).delegate(n.formSubmitSelector,"submit.rails",function(i){var r=e(this),a=r.data("remote")!==t,o=n.blankInputs(r,n.requiredInputSelector),s=n.nonBlankInputs(r,n.fileInputSelector);if(!n.allowAction(r))return n.stopEverything(i);if(o&&r.attr("novalidate")==t&&n.fire(r,"ajax:aborted:required",[o]))return n.stopEverything(i);if(a){if(s){setTimeout(function(){n.disableFormElements(r)},13);var l=n.fire(r,"ajax:aborted:file",[s]);return l||setTimeout(function(){n.enableFormElements(r)},13),l}return n.handleRemote(r),!1}setTimeout(function(){n.disableFormElements(r)},13)}),e(document).delegate(n.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var r=i.attr("name"),a=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",a)}),e(document).delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),e(document).delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)}))}(jQuery),window.setLocation=function(e){window.location=e},window.getSearchQuery=function(){return window.location.search},window.getWidth=function(){return"undefined"!=typeof window.innerWidth?window.innerWidth:"undefined"!=typeof document.documentElement?document.documentElement.clientWidth:void 0},MultiTouchTracker.split_cookie=function(e,t,n){var i=e.indexOf(t+"="),r="";return i>=0&&(cookieValueStart=i+t.length+1,cookieValueEnd=e.indexOf(n||"&",cookieValueStart),0>cookieValueEnd&&(cookieValueEnd=e.length),r=e.substring(cookieValueStart,cookieValueEnd)),MultiTouchTracker.decode(r)},MultiTouchTracker.contains=function(e,t){return e.indexOf(t)>=0},MultiTouchTracker.is_empty_ref=function(e){return void 0==e||"-"==e||e.match(/^\s*$/)},MultiTouchTracker.domain_of=function(e){if(e)var t=e.match(/https?:\/\/([^(\/\:)]+)/);return t?t[1]:""},MultiTouchTracker.encode=function(e,t){return t?encodeURI(e):encodeURIComponent(e)},MultiTouchTracker.decode=function(e){return decodeURIComponent(e)},MultiTouchTracker.clean_var=function(e){return e||"-"},MultiTouchTracker.prototype.addOrganic=function(e,t,n){var i=n?this.engines.unshift:this.engines.push;i.call(this.engines,[e,t])},MultiTouchTracker.prototype.multitouch=function(e,t,n){if(e=void 0===e?"":e,t=void 0===t?document.referrer:t,referrerDomain=MultiTouchTracker.domain_of(t),n=void 0===n?window.location.href:n,!this.allow_internal&&t.match("^https?://?(?:[^/]*.)?"+this.cookie_domain+"(?::[0-9]+)*/"))return"Internal";var i="",r="direct";if(n.match("[&?]gclid="))i="cpc",r="adwords";else{var a=n.match("[&?]utm_source=([^&#]+)");if(null==a){if(t){var o=this.isOrganic(t);o?(i="organic",r=this.strip_separators(o)):(i="referral",r=this.strip_separators(referrerDomain))}}else{r=this.strip_separators(a[1]);var s=n.match("[&?]utm_medium=([^&#]+)");s&&(i=this.strip_separators(s[1])),s&&(i=s[1])}}return this.appendCookie(r+this.fieldsep+i+this.fieldsep+e)},MultiTouchTracker.prototype.multitouch_event=function(e,t){return this.appendCookie("__ORD"+this.fieldsep+e+this.fieldsep+t)},MultiTouchTracker.prototype.appendCookie=function(e){var t=.001*(new Date).getTime(),n=e+this.fieldsep+Math.floor(t),i=this.__getExistingCookieValue(),r=n+this.__removeExpiredValues(i,t),a=this.__trimCookieValueToMaxSize(r);return document.cookie=this.__fullCookie(a,t),r},MultiTouchTracker.prototype.isOrganic=function(e){var t=MultiTouchTracker.domain_of(e);if(!t)return!1;e=e.split("?").join("&");for(var n=0;n<this.engines.length;n++){var i=this.engines[n],r=i[0],a=i[1],o=MultiTouchTracker.contains(t,r),s=MultiTouchTracker.contains(e,"&"+a+"=");if(o&&s)return r}},MultiTouchTracker.prototype.has_events=function(){return this.__getExistingCookieValue().length>0},MultiTouchTracker.prototype.strip_separators=function(e){return e=e.replace(this.fieldsep,"").replace(this.recsep,""),e||"-"},MultiTouchTracker.prototype.__getExistingCookieValue=function(){return MultiTouchTracker.split_cookie(document.cookie,this.cookie_name,";")},MultiTouchTracker.prototype.__removeExpiredValues=function(e,t){if(e.length>0){for(var n=e.split(this.recsep),i=t-3600*24*this.cookie_lifetime,r=n.length-1;r>=0;r--){var a=n[r],o=a.split(this.fieldsep).slice(-1)[0];if(!(i>o))break;n.pop()}e=this.recsep+n.join(this.recsep)}return e},MultiTouchTracker.prototype.__trimCookieValueToMaxSize=function(e){for(var t=e.split(this.recsep);e.length>this.max_cookie_size;)t.pop(),e=t.join(this.recsep);return e},MultiTouchTracker.prototype.__fullCookie=function(e,t){var n=this.cookie_name+"="+MultiTouchTracker.encode(e),i="; path=/",r="; expires="+new Date(1e3*(t+3600*24*this.cookie_lifetime)).toGMTString(),a=this.cookie_domain!=document.domain?"; domain="+this.cookie_domain:"";return[n,i,r,a].join("")},"undefined"==typeof Fa&&(Fa={}),Fa.multitouchTrackerInstance=function(){return void 0===this._mtt&&(this._mtt=new MultiTouchTracker({cookie_domain:Fa.stripSubdomainAndPort(document.domain)})),this._mtt},Fa.stripSubdomainAndPort=function(e){return e.replace(/^[^\.]+\./,".").replace(/\:[0-9]+/,"")},Fa.multitouch=function(e){return e=e||Fa.ppc_from_location(window.getSearchQuery()),Fa.multitouchTrackerInstance().multitouch(e)},Fa.multitouch_event=function(e,t){return Fa.multitouchTrackerInstance().multitouch_event(e,t)},Fa.ppc_from_location=function(e){var t=e.split("?")[1];if(!t)return"";var n=Fa.__extract_data_for_fields(t.split("&"),{ppccamp:"campaign",ppckey:"key"});return n.sort().join("; ")},Fa.__extract_data_for_fields=function(e,t){for(var n=[],i=e.length-1;i>=0;i--){var r=e[i].split("="),a=r[0],o=r[1],s=t[a];s&&n.push(s+": "+o)}return n},"undefined"==typeof Fa&&(Fa={}),Fa.BankAccountStatusFieldset={initialise:function(e){var t=e,n=$("select#bank_account_status_event",t),i=$("input#bank_account_make_primary",t),r=$("#bank_account_hiding_information",t),a={hide:"hidden",activate:"active"},o={primary:function(){r.hide(),s("hidden")||n.prop("disabled",!0),i.prop("disabled",!1)},active:function(){r.hide(),n.prop("disabled",!1),i.prop("disabled",!1)},hidden:function(){r.show(),n.prop("disabled",!1),i.prop("disabled",!0)}},s=function(e){return e==t.initialState},l=function(){if(i.prop("checked"))var e="primary";else var e=a[n.val()];return e||t.initialState},c=function(){o[l()]()},u=function(){t.initialState=t.data("state"),c(),n.on("change",c),i.on("change",c)};u()}},function(e){e("form#bds_registration input#visit_bds").live("click",function(){var t=e("form#bds_registration").attr("data-bds-visited-path");e.ajax({async:!1,url:t,type:"POST"})})}(jQuery);var Fa=Fa||{};!function(e){"use strict";Fa.paymentPortalAnalytics={trackEvent:function(e,t){_gaq.push(["_trackEvent","Payment Portal",e,t])},trackEnableStart:function(e){this.trackEvent("Integration Enable Start",e)},trackEnableComplete:function(e){this.trackEvent("Integration Enable Complete",e)},trackInvoiceSent:function(e){this.trackEvent("Invoice Marked Payable",e)},trackPaymentAttempt:function(e){this.trackEvent("Invoice Payment Attempt",e)},trackInvoicePaid:function(e){this.trackEvent("Invoice Paid",e)}},e(".stripe-payment-button").live("click",function(){Fa.paymentPortalAnalytics.trackPaymentAttempt("Stripe")})}(jQuery);var Fa=Fa||{};Fa.updatePaginatedPanel=function(e,t){"use strict";var n=$(this).closest(".panel_content"),i=n.find("a.newer");1>=e?i.addClass("disabled"):i.removeClass("disabled");var r=n.find("a.older");e>=t?r.addClass("disabled"):r.removeClass("disabled");var a=n.find(".item_count"),o=parseInt(n.find(".panel_all_pages").attr("data-total-pages"));if(isNaN(o)||0===o)n.find(".entity_count").addClass("hidden");else if(1===o)a.text("");else{var s=$(this).find(".page:first-child .entities").children().length,l=$(this).find(".page:nth-child("+e+") .entities").children().length,c=s*(e-1)+1;1===l?a.text(c+" of"):a.text(c+"-"+(c+l-1)+" of")}},function(e){e(function(){"use strict";e(".panel .paginate .widget_paging a:not(.disabled)").live("click",function(t){t.preventDefault();var n=e(t.target),i=n.closest(".panel_data"),r=i.find(".panel_all_pages"),a=r.attr("data-url"),o=parseInt(r.attr("data-total-pages")),s=n.hasClass("older")?e.PowerPagerDirection.DOWN:e.PowerPagerDirection.UP;return r.powerPager(a,o,s,Fa.updatePaginatedPanel),!0})})}(jQuery);var APP_CHAT="app chat",CHAT_OPENED="proactive chat opened",CHAT_STARTED="chat started",CHAT_CLOSED="chat closed";!function(e){e(function(){"use strict";e.extend({track:function(t,n){var i="//sdr.totango.com/pixel.gif",r=e("meta[name=tracker-key]").attr("content"),a=e("meta[name=tracker-o]").attr("content"),o=e("meta[name=tracker-odn]").attr("content"),s=e("meta[name=tracker-u]").attr("content"),l=i+"?sdr_s="+r+"&sdr_o="+a+"&sdr_odn="+o+"&sdr_u="+s+"&sdr_a="+t+"&sdr_m="+n;e("<img>").attr("src",l)}})})}(jQuery),function(e){e(function(){"use strict";e.fn.dynamicCards=function(){var t=e(this),n=325,i=18;return e(window).bind("load resize",function(){var r=t.parent().width(),a=parseInt(r/n),o=parseInt(r/a)-i+"px";t.each(function(t){var n=t>0&&0===t%a?"both":"none",i=0===(t+1)%a?"0":"20px";e(this).css({clear:n,"margin-right":i,width:o})})}),this}})}(jQuery),function(e){e(function(){"use strict";e.fn.staticTabs=function(){var n=e(this);return n.length&&(t(n),i(n)),this};var t=function(t){t.each(function(){var t=e(this),n=t.closest("li"),i=e(t.attr("href"));i.hide(),n.hasClass("current")&&i.show()})},n=function(t){var n=t.attr("href"),i=t.closest("li");i.siblings("li").removeClass("current"),i.addClass("current"),e(n).siblings(".tab_content").hide(),e(n).show()},i=function(t){t.click(function(t){var i=e(this);return e.isFunction(history.pushState)&&history.pushState("","",i.attr("href")),n(i),t.preventDefault(),!1})};e(window).bind("popstate",function(t){var i=t.currentTarget.location.hash,r=e('a[href="'+i+'"]'),a=r.parent();1==a.length&&n(r)})})}(jQuery),function(e){"use strict";e.PowerPagerDirection={UP:1,DOWN:-1};var t=function(t){return e(t).children(".page")},n=function(e){return t(e).first().height()||0},i=function(t){return-Math.round((parseInt(e(t).css("top"))||0)/n(t))+1},r=function(e,n){"undefined"!=typeof n&&n.call(e,i(e),t(e).length)},a=function(n,a,o,s){e(o).queue("loading",function(l){e(o).queue("loading").unshift("inprogress");var c=t(o).length;c<i(o)+3&&a>c?e.get(n,{page:c+1},function(t){e(o).append(t),r(o,s),e(o).trigger("powerPager:pageUpdated",[o]),l()}):l()}),"inprogress"!==e(o).queue("loading")[0]&&e(o).dequeue("loading")},o=function(a,o,s){e(o).queue(function(l){e(o).stop(!1,!0);var c=(i(o)-1)*-n(o),u=c+n(o)*a,h=-n(e(o))*(t(e(o)).length-1);u>=h&&0>=u&&e(o).animate({top:u.toString()+"px"},{duration:400,easing:"easeOutExpo",complete:function(){r(o,s)}}),l()})};e.fn.powerPager=function(e,t,n,i){var r=parseInt(t);return isNaN(r)||1>r?("undefined"!=typeof console&&console.log("Warning: invalid value specified for total_pages"),void 0):(e&&-1===n&&a(e,r,this,i),o(n,this,i),void 0)}}(jQuery),function(e){e(function(){"use strict";var t=function(t,n){return e("<img>",{alt:"Calendar",id:t.attr("id")+"_calendar",src:n,title:"Show Calendar"})},n=function(e,t,n){Calendar.setup({inputField:e.attr("id"),button:t.attr("id"),ifFormat:e.data("date-format"),onUpdate:n})};e.fn.mobileCalendar=function(){return this.each(function(){var i=e(this),r=t(i,"https://staticly.global.ssl.fastly.net/assets/mobile/calendar-834b7bcc00b3394261c07e7dec684857.png");i.after(r),n(i,r,function(){i.change()})})},e.fn.calendar=function(i){return this.each(function(){var r=e(this),a=t(r,"https://staticly.global.ssl.fastly.net/assets/calendar-c4d512de128d0f70bfcdf202c182e27b.gif");if(i){var o={inputField:r.attr("id"),ifFormat:r.data("date-format"),showOthers:!0},s=e.extend(o,"object"==typeof i&&i);return r.data("fa-calendar-applied")||(Calendar.setup(s),r.data("fa-calendar-applied",!0)),void 0}var l=function(){var e=Date.parseDate(r.val(),r.data("date-format"));if(r.parent().hasClass("field_with_errors"))var t=r.parent().parent();else var t=r.parent();var n=t.find(".start_date_warning");n.length>0&&("undefined"!=typeof window.freeAgentStartDate&&e<window.freeAgentStartDate?(r.addClass("field_with_attention"),n.addClass("show")):(r.removeClass("field_with_attention"),n.removeClass("show")))};r.after(a),r.change(function(){l()}),n(r,a,function(){r.change()}),l()})},e.support.leadingWhitespace||e(".calendar").live("mouseup",function(){setTimeout(function(){document.body.className=document.body.className},0)})})}(jQuery),function(e){e(function(){"use strict";e.fn.disable=function(){return this.attr("disabled","disabled")},e.fn.enable=function(){return this.removeAttr("disabled")}})}(jQuery),$(function(){$(function(){"use strict";$.fn.attachmentPreview=function(e){return $(e).livequery(function(){$(this).dialog({autoOpen:!1,width:"auto",modal:!0,resizable:!1})}),$(this).live("click",function(t){return $(e).dialog("open"),t.preventDefault(),!1}),this}})}(jQuery)),function(e){e(function(){"use strict";e.fn.powerChart=function(){var t=this,n=[],i=e(".chart_data",t).first()[0];return i?(new Highcharts.Chart(FaBankAccountChartOptions(i),function(i){e(".series_nav .powerDropdown .content li a",t).click(function(){return r(this,"series"),a(this),!1}),e(".data_nav .powerDropdown .content li a, .chart_nav .powerDropdown .content li a",t).click(function(){return r(this,"source"),a(this),!1});var r=function(n,i){var r=e(n),a="chart-"+i,o=r.data(a);e.cookie(a,o),t.data(a,o),t.renderChartSeries(r)},a=function(t){var t=e(t),n=t.closest(".powerDropdown");n.toggleClass("expanded")};t.renderChartSeries=function(e){var n=t.data("chart-source"),i=t.data("chart-series");return o(n,i,e),t};var o=function(e,t,n){f(e,t)?p(e,t,n):s(e,t,n)},s=function(t,n,r){e.ajax({dataType:"json",url:"/bank_accounts/"+t+"/balance_history.js",success:function(e){l(e.currency),c(e),p(t,n,r)},beforeSend:function(){i.showLoading()},complete:function(){i.hideLoading()}})},l=function(e){i.options.currency=e},c=function(e){var t=u(e);h(t,e.currency),d(t)},u=function(e){return n[e.key]=e,n[e.key]},h=function(e,t){e.balance=Fa.nativeFormattedCurrency({amount:parseFloat(e.balance),precision:0,format:t.format,currencyUnit:t.unit})},d=function(t){e(t.series).each(function(){i.addSeries(this).hide()})},p=function(t,n,r){e(i.series).each(function(){this.hide()}),f(t,n).show(),m(r),g(t)},f=function(e,t){return i.get(e+"-"+t)},m=function(t){var t=e(t),n=t.closest(".powerDropdown"),i=e(".action_title span em",n),r=t.html();i.html(r)},g=function(n){var i=v(n),r=e(".bank_summary",t),a=e(".account_details",r),o=e(".balance",r);a.html(i.logo).append('<h4><a href="'+i.link+'">'+i.name+"</a></h4>").append('<p class="meta">Last updated '+i.updated+"</p>"),o.html("<span>"+i.balance+"</span>").append("<p>Balance</p>")},v=function(e){return n[e]};t.renderChartSeries()}),t):t},window.FaBankAccountChartOptions=function(e){return{chart:{animation:!1,renderTo:e,defaultSeriesType:"area",marginLeft:45,marginRight:0,marginTop:25,marginBottom:35},credits:{enabled:!1},title:{text:""},xAxis:{type:"datetime",dateTimeLabelFormats:{hour:" ",day:"%e %b",week:"%e %b",month:"%b %Y"},lineColor:"#DADADA",gridLineWidth:1,gridLineColor:"#DADADA",labels:{style:{color:"#878787",fontSize:"11px",fontWeight:"bold",fontFamily:'"Helvetica Neue",Arial,Helvetica,sans-serif'}},title:{text:""}},yAxis:{gridLineDashStyle:"Dash",gridLineColor:"#DADADA",title:{text:""},labels:{formatter:function(){var e=this.chart.options.currency;return Math.abs(this.value)>=1e3?Fa.nativeFormattedCurrency({amount:this.value/1e3,precision:0,format:e.format+"k",currencyUnit:e.unit}):Fa.nativeFormattedCurrency({amount:this.value,precision:0,format:e.format,currencyUnit:e.unit})},style:{color:"#878787",fontSize:"11px",fontWeight:"bold",fontFamily:'"Helvetica Neue",Arial,Helvetica,sans-serif'}}},legend:{enabled:!1},tooltip:{style:{color:"#666666",fontSize:"12px",fontWeight:"bold",fontFamily:'"Helvetica Neue",Arial,Helvetica,sans-serif'},borderRadius:2,borderColor:"#0079C1",shadow:!1,formatter:function(){var e=this.series.chart.options.currency,t=this.series.options.id,n=this.series.data,i=n[0].x==this.x||n[n.length-1].x==this.x,r="";return t.match(/daily$/)||i?r=""+Highcharts.dateFormat("%e %b %Y",this.x):t.match(/weekly$/)?r="Week Ending "+Highcharts.dateFormat("%e %b %Y",this.x):t.match(/monthly$/)&&(r="As at start of "+Highcharts.dateFormat("%b %Y",this.x)),r+": "+Fa.nativeFormattedCurrency({amount:this.y,precision:0,format:e.format,currencyUnit:e.unit})}},plotOptions:{area:{fillColor:"rgba(0,121,193,0.2)",shadow:!1,fillOpacity:.2,stacking:"none",lineColor:"#0079C1",lineWidth:3,marker:{fillColor:"#7CC04A",lineWidth:2,lineColor:"#ffffff",radius:5}}}}}})}(jQuery),function(e){e(function(){"use strict";e.fn.powerBarChart=function(t){var n=this,i={},r=e(".chart_data",n).first()[0];return r?(new Highcharts.Chart(FaContactChartOptions(r),function(r){var a=function(t){e(t).each(function(){r.addSeries(this)})},o=function(t,n,o){e(r.series).each(function(){this.remove()}),a(i[n]),void 0!==i[n][0].categories&&r.xAxis[0].setCategories(i[n][0].categories),e(r.series).each(function(){this.show()}),l(t,n),d(o)},s=function(e,t){return"cashflow"==e?"/overview/cashflow.js?series="+t:"/contacts/"+e+"/balance_history.js"},l=function(n,r){if("cashflow"==n){var a=i[r][0].total,o=i[r][1].total,s=a-o,l=function(t){e("#cashflow_totals .incoming"+t+" span").text(""+Fa.nativeFormattedCurrency({amount:a,precision:0})),e("#cashflow_totals .outgoing"+t+" span").text(""+Fa.nativeFormattedCurrency({amount:o,precision:0})),0>s?(e("#cashflow_totals .total"+t).removeClass("positive"),e("#cashflow_totals .total"+t).addClass("negative"),e("#cashflow_totals .total"+t+" span").text("-"+Fa.nativeFormattedCurrency({amount:-s,precision:0}))):(e("#cashflow_totals .total"+t).removeClass("negative"),e("#cashflow_totals .total"+t).addClass("positive"),e("#cashflow_totals .total"+t+" span").text(""+Fa.nativeFormattedCurrency({amount:s,precision:0})))};t?"thismonth"==r?l(".thismonth"):"3months"==r?l(".threemonths"):"6months"==r&&l(".sixmonths"):l("")}},c=function(t,n,a){e.ajax({dataType:"json",url:s(t,n),success:function(e){i[n]=e,o(t,n,a)},beforeSend:function(){r.showLoading()},complete:function(){r.hideLoading()}})},u=function(e,t,n){void 0===i[t]?c(e,t,n):o(e,t,n)};n.renderChartSeries=function(e){var t=n.data("chart-source"),i=n.data("chart-series");return u(t,i,e),n};var h=function(t){var i="chart-series",r=e(t),a=r.data(i),o=n.data("chart-source")+"-series";e.cookie(o,a),n.data(i,a),n.renderChartSeries(r)},d=function(t){var t=e(t),n=t.closest(".powerDropdown"),i=e(".action_title span em",n),r=t.html();i.html(r)},p=function(t){var t=e(t),n=t.closest(".powerDropdown");n.toggleClass("expanded")};e(".series_nav .powerDropdown .content li a",n).click(function(){return h(this),p(this),!1}),n.renderChartSeries()}),n):n},window.FaContactChartOptions=function(e){return{chart:{renderTo:e,defaultSeriesType:"column",spacingTop:35,spacingRight:15,spacingLeft:15,spacingBottom:15},credits:{enabled:!1},title:{text:""},xAxis:{lineColor:"#DADADA",tickWidth:0,labels:{style:{color:"#878787",fontSize:"11px",fontWeight:"bold",fontFamily:'"Helvetica Neue",Arial,Helvetica,sans-serif'}}},yAxis:{labels:{style:{color:"#878787",fontSize:"12px",fontWeight:"bold",fontFamily:'"Helvetica Neue",Arial,Helvetica,sans-serif'}},min:0,gridLineDashStyle:"Dash",gridLineColor:"#DADADA",title:{text:""}},legend:{symbolWidth:12,layout:"horizontal",backgroundColor:"#FFFFFF",align:"right",borderColor:"#ffffff",borderWidth:0,verticalAlign:"top",x:0,y:-30,floating:!0,shadow:!1,itemStyle:{color:"#666666",fontSize:"12px",fontFamily:'"Helvetica Neue",Arial,Helvetica,sans-serif'}},tooltip:{style:{color:"#666666",fontSize:"12px",fontWeight:"bold",fontFamily:'"Helvetica Neue",Arial,Helvetica,sans-serif'},borderRadius:2,borderWidth:2,shadow:!1,formatter:function(){return this.x+": "+Fa.nativeFormattedCurrency({amount:this.y,precision:2})}},plotOptions:{column:{groupPadding:.2,pointPadding:0,borderWidth:0,shadow:!1,pointWidth:14}}}}})}(jQuery),function(e){e(function(){"use strict";e.fn.infoModal=function(t,n){var i=e(this),r={width:i.attr("data-modal_width")||800,dialogClass:i.attr("id")||"",zIndex:99999,autoOpen:!0,modal:!0,resizable:!1,close:function(){},open:function(){}};return t&&e.extend(r,t),i.dialog(r),e.isFunction(n)&&n(i),i}})}(jQuery),function(e){e.fn.make_it_toggle=function(){var t,n,i=this;return i.attr("data_toggle_show")?(n=!1,t=i.attr("data_toggle_show")):(n=!0,t=i.attr("data_toggle_hide")),t&&i.live("change",function(){e(t).toggle(!!(i.is(":checked")^n))}),i}}(jQuery),function(e){e.fn.modalForm=function(t){var n=function(){var n=e(this),i=n.closest("form"),r=i.serialize(),a=e("input[type=submit],button",i),o=i.attr("action"),s=i.attr("method"),l=e("#modal"),c=!1;return a.attr("disabled","disabled").addClass("disabled"),n.addClass("spinner"),r+="&submit_state="+n.attr("name"),e.ajax({url:o,type:s,dataType:"json",data:r,success:function(n){n.redirect?(c=!0,window.location.href=n.redirect):e.isFunction(t[n.status])&&t[n.status](l,n)},complete:function(){e.isFunction(t.complete)&&t.complete(l),c||a.removeAttr("disabled").removeClass("disabled spinner"),setTimeout(function(){e(".flash",l).fadeOut("slow")},3e3)}}),!1};return e("input[type=submit]",this).live("click",n),e("button",this).live("click",n),this}}(jQuery),function(e){e.fn.cumulativeSlider=function(){var t=e(this),n=e(".slider",t),i=e(".description_box",t),r=e(".slider_options > *",t),a=e("#"+t.attr("data-input-tag-id")),o=function(t){r.each(function(n,i){e(i).toggleClass("accessed",0===n&&0===t||n>=1&&t>=n)})},s=function(t){var n=e(r[t]).children(".description").html();i.html(n)},l=function(){n.slider("value",h())},c=function(e,t){u(t.value),o(t.value),s(t.value)},u=function(e){a.val(e)},h=function(){return parseInt(a.val())};return a.change(function(){n.slider("value",h())}),n.slider({range:"min",min:0,max:r.length-1,step:1,change:c,slide:c,create:l}),this}}(jQuery),function(e){e(function(){"use strict";e.fn.toggleInvoiceCategoryDisplay=function(){var t=e(this),n=e(".line_item_controls","#invoice-amount"),i="show_"+t.attr("class")+"_categories",r=function(){var n=t.is(":checked")?"checked":"not_checked";e.cookie(i,n)},a=function(){n.toggle(t.is(":checked"))};return t.click(function(){r(),a()}),this}})}(jQuery),function(e){e(function(){"use strict";e.fn.switchTheme=function(){return this.each(function(){var t=e(this).children("a:first"),n=t.attr("href"),i=t.attr("data-theme-href");return""==i?!1:(e.ajax({url:n,type:"put",success:function(){e("link[rel=stylesheet][title=theme]").attr("href",i),e("a[data-theme-href]").closest("li").removeClass("current"),t.closest("li").addClass("current")}}),void 0)})}})}(jQuery),function(e){e(function(){"use strict";e.fn.AJAXForm=function(){return this.each(function(){e(this).bind("submit",function(t){var n=e(this),i=n.attr("action"),r=n.attr("method");return e.ajax({url:i,type:r,data:n.serialize(),dataType:"script",success:function(e,t){n.trigger("ajax:success",[e,t])}}),t.preventDefault(),!1})})}})}(jQuery),function(e){e.fn.breakPoints=function(){var t=Array.prototype.slice.call(arguments,0).sort(),n=e(this),i=function(){for(var e=new Array,n=t.length-1;n>=0;n--){var i=t[n];window.getWidth()>i&&e.push("w"+i)}return e.join(" ")},r=function(e,t){e.attr("data-queryClass")&&e.removeClass(e.attr("data-queryClass")),e.attr("data-queryClass",t)},a=function(){var e=i();r(n,e),n.addClass(e)};return e(document).ready(a),e(window).resize(a),this}}(jQuery),function(e){e(function(){"use strict";e.fn.groupElements=function(t,n,i){return this.each(function(r,a){var o=e(a).children(n),s=[];o.each(function(n,r){var a=n+1;s.push(r),(0===a%t||a===o.length)&&(e(s).wrapAll(e(i)),s=[])})})}})}(jQuery),function(e){var t={init:function(){return this.each(function(){var t=this,n=e(this).data("attachments");void 0===e(this).data("attachments")&&(e(this).data("attachments",[]),n=e(this).data("attachments")),e('input[type="hidden"]',this).each(function(){e(t).attachable("add",e(this).val())})})},add:function(t){return this.each(function(){var n=e(this).data("attachments"),i=parseInt(t);-1===e.inArray(i,n)&&n.length<5&&n.push(i)})},remove:function(t){return this.each(function(){var n=e(this).data("attachments"),i=parseInt(t);-1!==e.inArray(i,n)&&n.splice(e.inArray(i,n),1)})},ids:function(){return this.data("attachments")}};e.fn.attachable=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void 0:t.init.apply(this,arguments)
},e.fn.refreshSelectedAttachments=function(t){return this.each(function(){var n=this;e("input.hidden_doc_ids",n).remove(),e.each(t,function(t,i){var r="hidden_document_"+i;e("#document_"+i,n).attr("checked",!0),e("#"+r).length||e(n).append(e("<input>").attr("type","hidden").attr("id",r).attr("name","document_ids[]").addClass("hidden_doc_ids").val(i))}),t.length>4?(e('input[type="checkbox"]:not(:checked)',n).attr("disabled","disabled"),e('input[type="checkbox"]:not(:checked)').parents("label").addClass("disabled"),e(".too_many_message").removeClass("hidden"),e(".too_many_message").show()):(e('input[type="checkbox"]',n).attr("disabled",!1),e('input[type="checkbox"]').parents("label").removeClass("disabled"),e(".too_many_message").addClass("hidden"),e(".too_many_message").hide())})}}(jQuery),function(e){function t(t){e("#jquery-notifications-"+t.counter).animate({marginTop:"-="+t.marginTop+"px"},t.fadeSpeed,function(){e(this).remove()})}function n(e){var t;return function(n,i){return t=clearTimeout(t),n&&(t=setTimeout(function(){n(i)},e)),t}}var i,r=0;e.notifications=function(a,o){r++;var s=e.extend({},e.notifications.defaults,o);i||(i=e('<div id="jquery-notifications"></div>').prependTo(document.body));var l=e('<div class="notification '+s.type+'" id="jquery-notifications-'+r+'"><div class="notification_content"><p>'+a+"</p></div></div>").hide().appendTo("#jquery-notifications");if(l.show(),l.parent().css("margin-left",-1*(l.parent().width()/2)),l.css("margin-top","-"+s.marginTop+"px"),l.animate({marginTop:"+="+s.marginTop+"px"},s.fadeSpeed),s.stick){var c=e('<a class="close" href="javascript:void(0);">'+s.close+"</a>").click(function(){e(this.parentNode.parentNode.parentNode).animate({marginTop:"-="+s.marginTop+"px"},s.fadeSpeed,function(){e(this).remove()})});l.find("p").append(c)}if(!s.stick){var u=n(s.timeout);u(t,{counter:r,marginTop:s.marginTop,fadeSpeed:s.fadeSpeed})}},e.notifications.success=function(t,n){return e.notifications(t,e.extend({},n,{type:"success"}))},e.notifications.error=function(t,n){return e.notifications(t,e.extend({stick:!0},n,{type:"error"}))},e.notifications.warning=function(t,n){return e.notifications(t,e.extend({},n,{type:"warning"}))},e.notifications.defaults={type:"notice",timeout:2500,stick:!1,fadeSpeed:150,close:"Close",marginTop:"40"},e.n=e.notifications}(jQuery),function(e){"use strict";e.fn.addPermissionListeners=function(t,n){var i=function(t,n){t.live("change",function(){e(this).is(":checked")&&(Fa.paymentPortalAnalytics.trackEnableStart("PayPal"),n())})},r=function(t,n){var i=t.attr("data-check_path")+"/"+e(n).val().length;t.load(i,function(){var i=e("input[type=checkbox]",t);i.length||setTimeout(function(){r(t,n)},1e3)})},a=function(t,n,i,o){t.html(e(o).html()),e.post(i,{email:e(n).val()},function(e){t.html(JSON.parse(e)),setTimeout(function(){r(t,n)},1e3)}).error(function(){setTimeout(function(){a(t,n,i,o)},1e3)})};e(this).each(function(){var r=e(this),o=e("input[data-init_check_path]",r),s=o.attr("data-init_check_path");i(o,function(){a(r,t,s,n)})})}}(jQuery);var Fa=Fa||{};!function(e){"use strict";Fa.ajaxPoll={refresh:function(t,n,i){e.getJSON(t,function(e){e?setTimeout(function(){Fa.ajaxPoll.refresh(t,n,i)},1e3):Fa.ajaxPoll.updatePartials(n,i)})},updatePartials:function(t,n){e.when(e.ajax(t.partial_path),e.ajax(n.partial_path)).done(function(e,i){t.$container.empty().append(e[0]),n.$container.empty().append(i[0])})}},e.fn.ajaxPollRefresh=function(){e(this).each(function(){var t,n,i,r=e("p[data-content_partial]");r.length&&(t=r.attr("data-pending"),n={$container:e(this),partial_path:r.attr("data-content_partial")},i={$container:e(r.attr("data-title_selector")),partial_path:r.attr("data-title_partial")},Fa.ajaxPoll.refresh(t,n,i))})}}(jQuery),function(e){var t,n={colClass:"col",rowClass:"row",elbowRoom:0},i="<div>";e.fn.rowMaker=function(e){return r(e),a(this,l(this)),this};var r=function(i){t=e.extend({},n,i),t.rowSelector="."+t.rowClass,t.colSelector="."+t.colClass},a=function(e,t){o(e);for(var n=0;n<t.length;n++)s(t[n])},o=function(e){e.find(t.rowSelector+" "+t.colSelector).unwrap()},s=function(n){var r=e(i).addClass(t.rowClass);e(n).wrapAll(r)},l=function(n){var i=n.find(t.colSelector),r=n.width(),a=[];if(r>0){var o=r,s=[];i.each(function(n,i){var l=e(i).outerWidth(!0);o-=l,o<t.elbowRoom&&(a.push(s),o=r-l,s=[]),s.push(i)}),s.length>0&&a.push(s)}else a=[i];return a}}(jQuery),function(e){e(function(){"use strict";e.fn.textCheckModal=function(t,n,i){var r=e(this);if(r.length){var a=e(n),o=a.closest("form"),s=r.attr("data-modal_title")||"Missing text",l=r.attr("data-modal_text_check")||null;e(i).live("click",function(e){var n=a.val();return n.length>0&&-1==n.indexOf(t)&&-1==n.indexOf(l)?(r.infoModal({title:s,draggable:!1},function(e){e.find("a[rel=close]").live("click",function(){e.dialog("close")}),e.find("a[rel=dismiss]").live("click",function(){e.dialog("close"),o.submit()})}),e.preventDefault(),!1):void 0})}}})}(jQuery),function(e){e(function(){"use strict";e.fn.enableOnDropdown=function(t,n,i,r,a){if("function"!=typeof t){var o=t;t=function(e){return e==o}}var s=e(this);if(s.length){var l=e(n),c=!0,u=s.attr("checked");i=i||!1,e(document).ready(function(){t.call(s,l.val())?(s.removeAttr("disabled"),r&&r.call(s)):(s.attr({disabled:"disabled",checked:!1}),a&&a.call(s))}),l.live("change",function(){t.call(s,l.val())?(s.attr("checked",i||u),s.removeAttr("disabled"),c=!0,r&&r.call(s)):(c&&(u=s.attr("checked"),c=!1),s.attr({disabled:"disabled",checked:!1}),a&&a.call(s)),i=!1})}return s}})}(jQuery),/*!
 * Expander - v1.4.7 - 2013-08-30
 * http://plugins.learningjquery.com/expander/
 * Copyright (c) 2013 Karl Swedberg
 * Licensed MIT (http://www.opensource.org/licenses/mit-license.php)
 */
function(e){e.expander={version:"1.4.7",defaults:{slicePoint:100,preserveWords:!0,widow:4,expandText:"read more",expandPrefix:"&hellip; ",expandAfterSummary:!1,summaryClass:"summary",detailClass:"details",moreClass:"read-more",lessClass:"read-less",collapseTimer:0,expandEffect:"slideDown",expandSpeed:250,collapseEffect:"slideUp",collapseSpeed:200,userCollapse:!0,userCollapseText:"read less",userCollapsePrefix:" ",onSlice:null,beforeExpand:null,afterExpand:null,onCollapse:null,afterCollapse:null}},e.fn.expander=function(t){function n(e,t){var n="span",i=e.summary;return t?(n="div",m.test(i)&&!e.expandAfterSummary?i=i.replace(m,e.moreLabel+"$1"):i+=e.moreLabel,i='<div class="'+e.summaryClass+'">'+i+"</div>"):i+=e.moreLabel,[i," <",n+' class="'+e.detailClass+'"',">",e.details,"</"+n+">"].join("")}function i(e){var t='<span class="'+e.moreClass+'">'+e.expandPrefix;return t+='<a href="#">'+e.expandText+"</a></span>"}function r(t,n){return t.lastIndexOf("<")>t.lastIndexOf(">")&&(t=t.slice(0,t.lastIndexOf("<"))),n&&(t=t.replace(h,"")),e.trim(t)}function a(e,t){t.stop(!0,!0)[e.collapseEffect](e.collapseSpeed,function(){var n=t.prev("span."+e.moreClass).show();n.length||t.parent().children("div."+e.summaryClass).show().find("span."+e.moreClass).show(),e.afterCollapse&&e.afterCollapse.call(t)})}function o(t,n,i){t.collapseTimer&&(l=setTimeout(function(){a(t,n),e.isFunction(t.onCollapse)&&t.onCollapse.call(i,!1)},t.collapseTimer))}var s="init";"string"==typeof t&&(s=t,t={});var l,c=e.extend({},e.expander.defaults,t),u=/^<(?:area|br|col|embed|hr|img|input|link|meta|param).*>$/i,h=c.wordEnd||/(&(?:[^;]+;)?|[a-zA-Z\u00C0-\u0100]+)$/,d=/<\/?(\w+)[^>]*>/g,p=/<(\w+)[^>]*>/g,f=/<\/(\w+)>/g,m=/(<\/[^>]+>)\s*$/,g=/^(<[^>]+>)+.?/,v={init:function(){this.each(function(){var t,s,h,m,v,y,b,_,w,x,C,k,T,E,S=[],D=[],A={},N=this,M=e(this),R=e([]),P=e.extend({},c,M.data("expander")||e.meta&&M.data()||{}),O=!!M.find("."+P.detailClass).length,F=!!M.find("*").filter(function(){var t=e(this).css("display");return/^block|table|list/.test(t)}).length,I=F?"div":"span",L=I+"."+P.detailClass,j=P.moreClass+"",H=P.lessClass+"",B=P.expandSpeed||0,W=e.trim(M.html()),z=(e.trim(M.text()),W.slice(0,P.slicePoint));if(P.moreSelector="span."+j.split(" ").join("."),P.lessSelector="span."+H.split(" ").join("."),!e.data(this,"expanderInit")){for(e.data(this,"expanderInit",!0),e.data(this,"expander",P),e.each(["onSlice","beforeExpand","afterExpand","onCollapse","afterCollapse"],function(t,n){A[n]=e.isFunction(P[n])}),z=r(z),v=z.replace(d,"").length;v<P.slicePoint;)m=W.charAt(z.length),"<"===m&&(m=W.slice(z.length).match(g)[0]),z+=m,v++;for(z=r(z,P.preserveWords),y=z.match(p)||[],b=z.match(f)||[],h=[],e.each(y,function(e,t){u.test(t)||h.push(t)}),y=h,s=b.length,t=0;s>t;t++)b[t]=b[t].replace(f,"$1");if(e.each(y,function(t,n){var i=n.replace(p,"$1"),r=e.inArray(i,b);-1===r?(S.push(n),D.push("</"+i+">")):b.splice(r,1)}),D.reverse(),O)w=M.find(L).remove().html(),z=M.html(),W=z+w,_="";else{if(w=W.slice(z.length),x=e.trim(w.replace(d,"")),""===x||x.split(/\s+/).length<P.widow)return;_=D.pop()||"",z+=D.join(""),w=S.join("")+w}P.moreLabel=M.find(P.moreSelector).length?"":i(P),F&&(w=W),z+=_,P.summary=z,P.details=w,P.lastCloseTag=_,A.onSlice&&(h=P.onSlice.call(N,P),P=h&&h.details?h:P),C=n(P,F),M.html(C),T=M.find(L),E=M.find(P.moreSelector),"slideUp"===P.collapseEffect&&"slideDown"!==P.expandEffect||M.is(":hidden")?T.css({display:"none"}):T[P.collapseEffect](0),R=M.find("div."+P.summaryClass),k=function(e){e.preventDefault(),E.hide(),R.hide(),A.beforeExpand&&P.beforeExpand.call(N),T.stop(!1,!0)[P.expandEffect](B,function(){T.css({zoom:""}),A.afterExpand&&P.afterExpand.call(N),o(P,T,N)})},E.find("a").unbind("click.expander").bind("click.expander",k),P.userCollapse&&!M.find(P.lessSelector).length&&M.find(L).append('<span class="'+P.lessClass+'">'+P.userCollapsePrefix+'<a href="#">'+P.userCollapseText+"</a></span>"),M.find(P.lessSelector+" a").unbind("click.expander").bind("click.expander",function(t){t.preventDefault(),clearTimeout(l);var n=e(this).closest(L);a(P,n),A.onCollapse&&P.onCollapse.call(N,!0)})}})},destroy:function(){this.each(function(){var t,n,i=e(this);i.data("expanderInit")&&(t=e.extend({},i.data("expander")||{},c),n=i.find("."+t.detailClass).contents(),i.removeData("expanderInit"),i.removeData("expander"),i.find(t.moreSelector).remove(),i.find("."+t.summaryClass).remove(),i.find("."+t.detailClass).after(n).remove(),i.find(t.lessSelector).remove())})}};return v[s]&&v[s].call(this),this},e.fn.expander.defaults=e.expander.defaults}(jQuery),function(e){e.fn.fixedMeta=function(){e(this).each(function(){e.waypoints.settings.scrollThrottle=30,e("#primary_content_wrapper").waypoint(function(t,n){e("#meta").toggleClass("sticky","down"===n),t.stopPropagation()},{offset:20})})}}(jQuery),function(e,t){"use strict";e.createAutocomplete=function(e){var n=e.inputTextBox;if(n.length){var i="pageSize"in e?e.pageSize:10,r="",a="",o="showAll"in e?e.showAll:!0,s={size:40,placeholder:"",autocomplete:"off",role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"},l=t.extend({},s,e.inputAttributes),c="",u=function(e,n,i){return t.isFunction(e)?e(n):i},h=function(){return e.container.find("ul.ui-autocomplete")},d=function(){return h().children().length},p=function(){return e.container.find(".autocomplete-spinner")},f=function(){return e.container.find(".ui-autocomplete-input")},m=function(){return e.container.find(".autocomplete_change_selection")},g=function(t){n.removeClass("autocompleteOpen");var i=u(e.selectItemCallback,t,"");e.container.find("#"+c).val(i);var r=e.buildItemCallback(t,!0);e.container.find(".autocomplete_description").html(r).css("display","inline-block"),m().css("display","inline-block"),e.container.find(".ui-autocomplete, .ui-combobox, .field_search .form-info").hide()},v=function(){if(n.length){var i=n.is(":disabled");c=n[0].id;var r=n[0].name;n[0].id="removed-by-autocomplete",n[0].name="removed-by-autocomplete",n.after(t('<input id="'+c+'" name="'+r+'" type="hidden" />')),n.addClass("ui-autocomplete-input"),l&&(a=l.placeholder,n.attr(l));var s=t('<div class="ui-combobox" />');if(n.wrap(s),o){var u=t('<a class="action_title autocomplete_show_all" title="Show All"><b class="caret"></b></a>');u.data("disabled",i),n.after(u)}var h=t('<span class="autocomplete-spinner" style="display: none;">&nbsp;&nbsp;&nbsp;&nbsp;</span>');n.parent().after(h);var d=t('<div class="autocomplete_description faux_input" style="display: none;" />');if(n.parent().after(d),i||e.locked)e.container.find(".autocomplete_description").addClass("disabled");else{var p=t('<a class="autocomplete_change_selection" href="javascript:void(0);" style="display: none;">&nbsp;</a>');d.after(p)}e.selectedValue&&g(e.selectedValue)}};v();var y=function(i,r,a){var o=1e3,s="/"+e.searchType+"/autocomplete_search.json?query="+i.substring(0,o)+"&skip="+r+"&size="+a;return e.queryParamsCallback&&t.each(e.queryParamsCallback(n),function(e,t){s+="&"+e+"="+t}),s},b=!1,_=function(n,i,r,a){p().show(),b=!1,t.ajax({dataType:"json",url:y(n,i,r),timeout:5e3,success:function(e){e.more_items&&(b=!0),a(e)},complete:function(){p().hide()},error:e.httpErrorCallback})},w=function(){n.autocomplete("close"),e.container.find("ul.ui-autocomplete").empty()},x=function(e,n){var i=20,r=t(e[0]),a=r.height(),o=e[0].scrollHeight,s=n.pageX,l=n.pageY,c=r.width()+r.offset().left,u=r.offset().top,h=c-i,d=c,p=u,f=u+a,m=o>a,g=s>=h&&d>=s&&l>=p&&f>=l;return m&&g},C=function(){t(document).one("mousedown",function(e){var n=h();if(!t.ui.contains(n[0],e.target)){if(x(n,e))return!1;w()}})},k=!1,T=function(n){k=n;var a=h();e.container.find(".autocomplete_more").remove(),C(),_(r,d(),i,function(e){var i=0;if(t.each(D(e.items),function(e,t){t.label=t.value,S(a,t,!0),i++}),n){var r=t.Event("keydown");r.which=38,r.keyCode=38;for(var o=0;i>=o;o++)f().trigger(r)}})},E=function(e){if(b){var n=t('<li class="autocomplete_more ui-menu-item" role="menuitem"><a>MORE</a></li>');n.click(function(e){return e.preventDefault(),T(),!1}),e.append(n)}},S=function(i,r,a){if(0==r.id)return t('<li class="ui-menu-item">').append('<span class="no-results">'+r.label+"</span>").appendTo(i);n.addClass("autocompleteOpen");var o=e.buildItemCallback(r,!1),s=null;return a?(s=t('<li class="ui-menu-item" role="menuitem">').data("item.autocomplete",r).append('<a class="ui-corner-all" tabindex="-1">'+o+"</a>").appendTo(i),s.click(function(){return g(r),!1})):s=t("<li>").data("item.autocomplete",r).append("<a>"+o+"</a>").appendTo(i),r.lastItem&&E(i),s},D=function(e){var n=e.slice(),i=e.length-1,r=t.extend({lastItem:!0},e[i]);return n[i]=r,n};n.autocomplete({minLength:1,delay:300,selectFirst:!0,appendTo:e.container,create:function(){u(e.onCreateCallback,null,"")},source:function(e,t){var n=encodeURIComponent(e.term);r=n,_(n,0,i,function(e){0==e.items.length?t([{id:0,label:"No results found :("}]):t(D(e.items))})},focus:function(){return!1},select:function(e,t){return t.item?g(t.item):(e.preventDefault(),T(!0)),!1},change:function(){var e=t(this).data().autocomplete;"undefined"!=typeof e&&(t(this).data().autocomplete.term=null)},search:function(){p().show()},open:function(){p().hide()},close:function(){!e.container.find("ul.ui-autocomplete").is(":visible")&&k&&(e.container.find("ul.ui-autocomplete").show(),k=!1),p().hide()}}).blur(function(){t(this).removeClass("autocompleteOpen")}).data("ui-autocomplete")._renderItem=function(e,t){return S(e,t)},m().click(function(){return t(this).hide(),e.container.find(".autocomplete_description").hide(),e.container.find(".field_search .form-info").show(),e.container.find(".ui-combobox").show(),e.container.find("#"+c).val(""),u(e.clearItemCallback),f().val(""),!1}),e.container.find(".autocomplete_show_all").click(function(){if(1==t(this).data("disabled"))return!1;var e=t.trim(f().val()).replace(a,"");0===e.length?n.trigger("focus").autocomplete("search","*:*"):n.trigger("focus").autocomplete("search",e)}),t(document).keyup(function(e){e.keyCode===t.ui.keyCode.ESCAPE&&w()})}}}(this,jQuery);var CHAT_APP_WIDGET_KEY="fa2577f6-15ad-4efb-bc5a-776d1d5a513f",trackChatEvents=function(){SnapABug.setUserEmail($("#email_hidden").val(),!0);var e;SnapABug.setCallback("OpenProactive",function(t){e=t,_gaq.push(["_trackEvent","SnapEngage",CHAT_OPENED,t]),$.track(CHAT_OPENED,APP_CHAT)}),SnapABug.setCallback("StartChat",function(){_gaq.push(["_trackEvent","SnapEngage",CHAT_STARTED,e]),$.track(CHAT_STARTED,APP_CHAT)}),SnapABug.setCallback("Close",function(){_gaq.push(["_trackEvent","SnapEngage",CHAT_CLOSED,e]),$.track(CHAT_CLOSED,APP_CHAT)})},loadInAppChatScript=function(){loadChatScript(CHAT_APP_WIDGET_KEY,trackChatEvents)},loadChatScript=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="//commondatastorage.googleapis.com/code.snapengage.com/js/"+e+".js";var i=!1;n.onload=n.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,t&&$.isFunction(t)&&t())};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)};!function(e){e.fn.multiCurrency=function(){var t=this.filter("[data-multi_currency_role=currency]"),n=this.filter("[data-multi_currency_role=date]"),i=this.filter("[data-multi_currency_role=foreign_value]"),r=this.filter("[data-multi_currency_role=native_value]"),a=this.filter("[data-multi_currency_role=automatic_currency_conversion]"),o=this.filter("[data-multi_currency_role=foreign_symbol]"),s="[data-multi_currency_role=native_currency_block]",l="[data-multi_currency_role=sales_tax]",c=function(){return t.val()==t.data("native_currency")},u=function(){return a.is(":checked")},h=function(){d(),o.text(t.find(":selected").data("symbol")),c()?(e(s).hide(),e(l).show(),a.prop("checked",!0)):(e(s).show(),e(l).hide())},d=function(){e.ajax("/exchange_rate.json",{data:{currency:t.val(),date:n.val()},success:function(e){t.data("exchange_rate",e.rate),p()}})},p=function(){u()?(exchange_rate=parseFloat(t.data("exchange_rate")),foreign_currency_value=parseFloat(i.val()),native_currency_value=(foreign_currency_value/exchange_rate).toFixed(2),r.prop("disabled",!0),isNaN(native_currency_value)?r.val("0.00"):r.val(native_currency_value)):r.prop("disabled",!1)};return t.change(h),n.change(d),i.change(p),a.change(p),this}}(jQuery),function(e){e.fn.rebillable=function(){function e(){""==n.val()?(r.hide(),i.val("").change()):("price"==i.val()&&o.text(n.find(":selected").data("currency")),r.show())}function t(){"price"==i.val()?(o.text(n.find(":selected").data("currency")),s.text(""),a.show()):"markup"==i.val()?(o.text(""),s.text("%"),a.show()):(a.hide(),a.find("input").val(""))}var n=this.filter("[data-rebill_role=project]"),i=this.filter("[data-rebill_role=type]"),r=this.filter("[data-rebill_role=options]"),a=this.filter("[data-rebill_role=factor]"),o=this.filter("[data-rebill_role=factor_prefix]"),s=this.filter("[data-rebill_role=factor_suffix]");return n.change(e),i.change(t),this}}(jQuery),function(e){e(function(){"use strict";function t(t){e("#rti_container").html(t.html["workflow"in t.html?"workflow":"correction_workflow"]),e(".error, .date_warning").length&&e("html, body").animate({scrollTop:e(".error, .date_warning").offset().top-100})}window.currentCurrency=e("meta[name=native-currency]").attr("content"),window.currentCurrencyUnit=e("meta[name=native-currency-unit]").attr("content"),window.currentCurrencySeparator=e("meta[name=native-currency-separator]").attr("content"),window.currentCurrencyDelimiter=e("meta[name=native-currency-delimiter]").attr("content"),window.currentCurrencyFormat=e("meta[name=native-currency-format]").attr("content"),window.maxAttachmentSizeName=e("meta[name=max-attachment-size-name]").attr("content"),e("meta[name=freeagent-start-date]").first().each(function(){window.freeAgentStartDate=Date.parseDate(e(this).attr("content"),"%Y-%m-%d")}),e("body").breakPoints(2050,1720,1500,1280,1155,1130,1110,1090,1070,1050,1010),e("#info-popup-content").livequery(function(){e(this).dialog({autoOpen:!1,width:440,minHeight:30,modal:!0,resizable:!1})}),e("#info-popup-open").live("click",function(){e("#info-popup-content").dialog("open")}),e("#contact_cards li.c_card").dynamicCards(),e(document).delegate("[data-pjax] a, a[data-pjax]","click",function(t){var n=e(this).closest("[data-pjax-container]");n.data("push")===!1?e.pjax.click(t,{container:n,cache:!0,push:!1,timeout:2e3}):e.pjax.click(t,{container:n,cache:!0})}),e("a[rel=tab]").staticTabs(),e("input[data-role='calendar']:enabled").livequery(function(){e(this).calendar()}),e("body").on("bind_date_inputs",function(){e("span[role=date_input]").each(function(){var t=e(this),n=t.find("input"),i=t.find(".date_input_picker")[0];Calendar.setup({inputField:n[0],button:i,ifFormat:n.data("date-format")})})}),e("body").trigger("bind_date_inputs"),e("#timeslip_control").livequery(function(){e(window).bind("mousemove",getCursorXY)}),e("#notes a.edit, #notes a.cancel").live("click",function(t){var n="#note"+e(this).attr("href").split("/").pop(),i=e(n+" form"),r=e(n+" .note_content");return i.toggle()[0].reset(),r.toggle(),i.is(":visible")&&e("textarea.autogrow",i).trigger("keyup"),t.preventDefault(),!1}),e(document).on("click","#meta .slim_table .action",function(t){var n=e(this).closest(".slim_table");n.toggleClass("expanded"),t.preventDefault()}),e("textarea.autogrow").livequery(function(){e(this).elastic()}),e(".power_actions").livequery(function(){e(this).powerDropdown()}).find("a[href=#]").live("click",function(){return!1}),e("#options_toggle").live("click",function(t){var n=e(this),i=e("#advanced_options");return i.slideToggle("fast",function(){n.toggleClass("up down")}),t.preventDefault(),!1}),e(".tooltip").livequery(function(){e(this).cluetip({splitTitle:"|",dropShadow:!1,showtitle:!1,arrows:!0,leftOffset:20,activation:"hover",onShow:function(t){e("h3",t).removeClass("ui-widget-header")}})}),e("form.forminline select").live("change",function(){e(this).closest("form").submit()}),e("input#master_checkbox").livequery(function(){e(this).toggleCheckboxes()}),e("#create_button, #create_another_button").live("click",function(){e(this);var t=e(this).attr("id"),n="create_another_button";e("#another").attr("value",n==t)}),e("input.two_dp").live("change",function(){e(this).twoDP()}),e("#attachment_image a[rel=delete], #logo_preview a[rel=delete]").data("loading",function(){e("#inline-spinner").toggle(),e("#attachment_actions").toggle()}),e("#attachment_image a.expense_preview").attachmentPreview("#attachment_preview"),e("fieldset#paypal_auto_import input#bank_account_enable_paypal_sync").live("click",function(){var t=e(this),n=e("fieldset#paypal_auto_import input#bank_account_enable_auto_explain");n.attr("disabled",!t.is(":checked")),t.is(":checked")||n.attr("checked",!1)}),e("section.chart").livequery(function(){e(this).powerChart()}),e("section.bar_chart.panel").livequery(function(){e(this).powerBarChart()});var n=function(t){var n=["Other Capital Asset Purchase","Computer Equipment Purchase","Fixtures and Fittings Purchase","Motor Vehicle Purchase"],i=e.inArray(t.find("option:selected").html(),n)>=0;e("#capital_assets").toggle(i)},i=function(t){e("#stock_options")&&("Purchase of Stock"==t.find("option:selected").html()?(e("#bill_stock_transaction_attributes_stock_item_id").disabled=!1,e("#bill_stock_transaction_attributes_quantity").disabled=!1):(e("#bill_stock_transaction_attributes_stock_item_id").disabled=!0,e("#bill_stock_transaction_attributes_quantity").disabled=!0)),e("#stock_options").toggle("Purchase of Stock"==t.find("option:selected").html())},r=function(){e("select#recurring").val()?e("#recurring_end_date").show():(e("#recurring_end_date").hide(),e("#expense_recurring_end_date")&&e("#expense_recurring_end_date").val(""),e("#bill_recurring_end_date")&&e("#bill_recurring_end_date").val(""))};e("form select#bill_nominal_code, form select#expense_nominal_code").live("change",function(){n(e(this)),i(e(this))}).livequery(function(){e(this).trigger("change")}),e("select#recurring").live("change",r),e("a#add_contact, a#use_existing_contact").live("click",function(t){var n=e("#existing_contact"),i=e("#new_contact"),r=e("div[id$=_project_details]"),a=i.find("input,select");return n.toggle(),i.toggle(),r.toggle(),i.is(":hidden")?a.attr("disabled","disabled"):a.attr("disabled",!1),t.preventDefault(),!1});var a=function(){"-3.0"==e(this).val()?(e("#preset_sales_tax").hide(),e("#manual_sales_tax").show(),e(this).is(":disabled")?e("#manual_sales_tax").find("input").disable():e("#manual_sales_tax").find("input").enable()):(e("#preset_sales_tax").show(),e("#manual_sales_tax").hide())};e(document).delegate("select#bill_sales_tax_rate, select#expense_sales_tax_rate","change",a),e("select#bill_sales_tax_rate, select#expense_sales_tax_rate").livequery(a),e("#payslip_manually_enter_paye_ni").live("click",function(){e("#manual_paye_ni").toggle(e(this).is(":checked"))}),e("input[id^=first_payslip_ni_calc_type]").live("change",function(){var t=e("input#first_payslip_ni_calc_type_director").is(":checked");e("#director_starting_date").toggle(t)}).livequery(function(){e(this).trigger("change")}),e("#vat_return_selector").live("change",function(){document.location.href="/tax/vat_returns/"+e(this).val()});var o=function(){e("#reclaim_car").hide(),e("#reclaim_motorcycle").hide(),e("#reclaim_bicycle").hide(),"Bicycle"==e("#expense_vehicle_type").val()?(e("#vat_reclaim").hide(),e("#reclaim_bicycle").show()):"Motorcycle"==e("#expense_vehicle_type").val()?(e("#vat_reclaim").show(),e("#reclaim_motorcycle").show(),e("#car_engine_details").hide()):(e("#vat_reclaim").show(),e("#car_engine_details").show(),e("#reclaim_car").show())};e("form select#bill_nominal_code, form select#expense_nominal_code").live("change",function(){n(e(this)),i(e(this))}).livequery(function(){e(this).trigger("change")}),e("select#recurring").live("change",r),e("select#expense_vehicle_type").live("change",o).livequery(o),e("#attachment_preview").livequery(function(){e(this).dialog({autoOpen:!1,width:"auto",modal:!0,resizable:!1})}),e("#attachment_image a.expense_preview").live("click",function(t){return e("#attachment_preview").dialog("open"),t.preventDefault(),!1}),e(".infobox input#invoice_send_reminder_emails").live("click",function(){e.ajax({url:"/invoices/"+e(this).attr("data-invoice-id")+"/emails/toggle_reminder_emails",type:"post",dataType:"script",data:{_method:"put"}})}),e(".infobox input#invoice_send_thank_you_emails").live("click",function(){e.ajax({url:"/invoices/"+e(this).attr("data-invoice-id")+"/emails/toggle_thank_you_emails",type:"post",dataType:"script",data:{_method:"put"}})}),e("#online_payment_link_check_modal").textCheckModal("[online_payment_link]","#email_body","#email_submit input"),e("#contents .row .content").groupElements(3,"div.col",'<div class="child_row">'),e("#main_title_innards .flash_notice").livequery(function(){var t=e(this).find(".status").html();e(this).hasClass("success")?e.n.success(t):e(this).hasClass("warning")?e.n.warning(t):e(this).hasClass("errors")?e.n.error(t):e(this).hasClass("notice")&&e.n(t)}),e(":input[placeholder]").livequery(function(){e(this).placeHoldize()}),e(document).on("ajax:success","#up_to_date_confirmation_dialog form",function(t,n){var i=JSON.parse(n);""==i?e("#up_to_date_confirmation_dialog").slideUp():e("#up_to_date_confirmation_dialog").replaceWith(i)}),e(document).on("ajax:error","#up_to_date_confirmation_dialog form",function(){alert("There was an error confirming your information.")}),e("#up_to_date_confirmation_dialog input.target").live("click",function(){e("input#up_to_date_until").val()==e(this).val()?(e("input#up_to_date_until").val(""),e("#up_to_date_confirmation_dialog input.target").attr("checked",!1)):(e("input#up_to_date_until").val(e(this).val()),0==e(this).attr("checked")&&e(this).attr("checked",!0),e("#up_to_date_confirmation_dialog input.target:lt("+e(this).data("index")+")").attr("checked",!0),e("#up_to_date_confirmation_dialog input.target:gt("+e(this).data("index")+")").attr("checked",!1))}),e("select#sales_tax_rate_selector").live("change",function(){var t=e.trim(e(this).val());"Custom"==t?(e("p#sales_tax_p input#invoice_item_sales_tax_rate, p#sales_tax_p input#estimate_item_sales_tax_rate").val(""),e("p#sales_tax_p span#sales_tax_rate_span").show()):(e("p#sales_tax_p input#invoice_item_sales_tax_rate, p#sales_tax_p input#estimate_item_sales_tax_rate").val(t),e("p#sales_tax_p span#sales_tax_rate_span").hide())}),e("select#second_sales_tax_rate_selector").live("change",function(){var t=e.trim(e(this).val());"Custom"==t?(e("p#second_sales_tax_p input#invoice_item_second_sales_tax_rate, p#second_sales_tax_p input#estimate_item_second_sales_tax_rate").val(""),e("p#second_sales_tax_p span#second_sales_tax_rate_span").show()):(e("p#second_sales_tax_p input#invoice_item_second_sales_tax_rate, p#second_sales_tax_p input#estimate_item_second_sales_tax_rate").val(t),e("p#second_sales_tax_p span#second_sales_tax_rate_span").hide())}),e("#feature_modal").infoModal({closeOnEscape:!1,draggable:!1,close:function(t){var n=e(t.target).data("modal_name");e.cookie(n+"_feature_modal_dismissed",!0,{expires:365})}},function(t){t.find("a[rel=close]").live("click",function(){return t.dialog("close"),e(this).preventDefault,!1}),t.find("a[rel=dismiss]").live("click",function(){t.dialog("close")})});var s=function(t,n,i){return window.open(t.attr("href")),e.track(n+": "+t.text(),i),!1};e("#kb_modal_link").click(function(t){return t.preventDefault(),e.get(e(this).attr("href"),function(t){var n=e(t).data("kb_modal_opened_event"),i=e(t).data("link_clicked_event"),r=e(t).data("event_module_name");e(t).infoModal({dialogClass:"feature_modal kb_modal",draggable:!1,open:function(){e.track(n,r)}},function(t){t.find("a").click(function(t){t.preventDefault(),s(e(this),i,r)})})},"html"),!1}),e("a.kb_link_tracking").click(function(t){t.preventDefault();var n=e(this).data("link-clicked-event"),i=e(this).data("event-module-name");s(e(this),n,i)}),e("#onboarding_modal_link").each(function(){var t=e(this);t.click(function(t){t.preventDefault();var n=e(this),i=n.attr("href");e.get(i,{completed_task:n.data("completed-task")},function(t){e(t).infoModal({dialogClass:"onboarding-Modal"},function(t){t.find("a[rel=dismiss]").click(function(n){n.preventDefault(),e.cookie("ignore_entrypoint","false"),t.dialog("close")})})},"html")}),"undefined"!=typeof t.data("completed-task")&&t.trigger("click")}),e("#express_checkout_option_status").addPermissionListeners("#bank_account_email","#pending_ajax_message"),e("#paypal_feeds_option_status").addPermissionListeners("#bank_account_email","#pending_ajax_message"),e("input#payroll_profile_ni_calc_type_director").make_it_toggle(),e("input#payroll_profile_ni_calc_type_employee").make_it_toggle(),e("input#started_this_year_yes").make_it_toggle(),e("input#started_this_year_no").make_it_toggle(),e("input#paid_this_year_yes").make_it_toggle(),e("input#paid_this_year_no").make_it_toggle(),e("input#payroll_profile_starting_declaration_a").make_it_toggle(),e("input#payroll_profile_starting_declaration_b").make_it_toggle(),e("input#payroll_profile_starting_declaration_c").make_it_toggle(),e(".rebill").rebillable(),e(".multi_currency").multiCurrency(),e("#ni_category").delegate(".remove_ni_category","click",function(t){t.preventDefault();var n=e(this).parent().parent(),i=e(this).data("delete-url");return"undefined"!=typeof i?e.ajax({url:i,type:"delete",dataType:"json",success:function(){n.remove()},error:function(){alert("There was an error, sorry")}}):n.remove(),e("#ni_category a[rel=add]").show(),!1}),e("#ni_category").delegate("a[rel=add]","click",function(t){var n=(new Date).getTime(),i=new RegExp(e(this).data("id"),"g"),r=e(this).data("fields").replace(i,n);e("#ni_categories").append(r),t.preventDefault()}),0===e("#ni_category").find("tbody td").length&&e("#ni_category").find("a[rel=add]").first().click(),e("div.ajax-loading").ajaxPollRefresh();var l=["one","two","three","four","five"],c=function(){var t=0;e(".workflow_steps .workflow_step").each(function(){e(this).removeClass(l.join(" ")),e(this).is(":visible")&&(e(this).addClass(l[t]),t++)})};e("#contents").on("change","#no_rti_checkbox",function(){var t=e(this).is(":checked");e("#needs_gateway_details, .run_and_report_button").toggle(!t),e(".run_button, #no_rti_warning").toggle(t),e(".rti_note").parent().toggle(!t),e(".rti_only").toggle(!t),c()}),e("#contents").on("submit","form#rti_workflow",function(n){var i=e(this),r=i.serialize(),a=i.attr("action");e.ajax({type:"PUT",url:a,data:r}).always(function(e){t(e),"gateway_creds"in e.html&&Fa.Modal.openWith({title:e.html.gateway_modal_title,content:e.html.gateway_creds,options:{width:720}})}),n.preventDefault()}),e("#main").on("click",".run_and_report_button",function(t){e("form#rti_workflow").submit(),t.preventDefault()}),e("#contents").on("change","#period_dated_on",function(){var n=e("form#rti_workflow").attr("action");e.ajax({type:"PUT",url:n,data:{"period[dated_on]":e(this).val()}}).always(t)}),e("#contents").on("click","#rti_workflow a.option_button",function(t){return t.preventDefault(),Fa.SelfAssessmentForm.activateButton(e(this)),!1}),e("#bankAccountStatusFieldset").each(function(){Fa.BankAccountStatusFieldset.initialise(e(this))}),e("#contents").on("change","#rti_workflow #bank_account_id",function(){var t=e(this).val();""===t?(e("#repayment_bank_account_number").val(""),e("#repayment_bank_sort_code").val("")):e.getJSON("/bank_accounts/"+t+"/summary").done(function(t){e("#repayment_bank_account_owner").val(t.account_owners_name),e("#repayment_bank_account_number").val(t.account_number),e("#repayment_bank_sort_code").val(t.sort_code)})}),e(".toggle_buttons").on("click",".toggle",function(){var t=e(this).hasClass("yes"),n=e(this).parent(),i=n.data("section");t?(n.find(".yes").addClass("selected"),n.find(".no").removeClass("selected"),e("#"+i).removeClass("hidden")):(n.find(".no").addClass("selected"),n.find(".yes").removeClass("selected"),e("#"+i).addClass("hidden"),n.closest("fieldset").find("input[type=text]").val("").change())}),e("#additional_statutory_paternity_pay").change(function(){var t=parseFloat(e(this).val())>0;e("#partner_details").toggle(t)})})}(jQuery),"undefined"==typeof Fa&&(Fa={}),Fa.initPaidItemAutocomplete=function(e,t,n,i,r,a){if(a||(a={}),t.length){var o=t.data("selected-item"),s=t.data("bank-entry-date"),l=t.data("payment-added"),c=t.data("show-selected-item-in-results"),u=function(e){var t="";switch(e){case"Open":t="status open";break;case"Paid":case"Paid on":case"Refunded":t="status paid";break;case"Overdue":t="status overdue"}return t},h=a.currency||n.closest("form").data("currency"),d="*";h!=currentCurrency&&(d=h);var p={currency_exchange_date:s||"",selected_item_id:o&&c?o.id:"",currency:d},f=function(e){return a.queryParamsCallback?$.extend(p,a.queryParamsCallback(e)):p};createAutocomplete({inputTextBox:t,container:n,searchType:e,onCreateCallback:function(){},buildItemCallback:function(e,t){var n=$("<span />"),r=$('<span id="autocomplete_item_'+e.id+'" />'),a=$('<strong class="reference" />'),o=$('<span class="title" />'),s="value "+u(e.status),l=$('<span class="'+s+'" />');t&&r.addClass(i);var c=e.reference;a.text(c);var h=$.trim(e.title.substring(0,40)).length<e.title.length?$.trim(e.title.substring(0,40))+"…":e.title;return o.text(h),l.html(e.value),r.append(a).append(o).append(l),r.attr("data-id",e.id),r.attr("data-native-currency",e.native_currency),r.attr("data-foreign-currency",e.foreign_currency),r.attr("data-native-value",e.native_value),r.attr("data-native-formatted-value",e.native_formatted_value),r.attr("data-foreign-value",e.foreign_value),n.append(r),n.html()},selectItemCallback:function(e){var t=n.find("#autocomplete_item_"+e.id);return r&&t.length>0&&r(t),e.id},clearItemCallback:function(){r&&r($()),$("#project_allocation").html("")},selectedValue:o,pageSize:20,queryParamsCallback:f,inputAttributes:{placeholder:"Search by reference, contact, or total…"},locked:l||"true"===$("#is_locked").val()})}},function(e){e.fn.bankAccountEntryForm=function(){var t=this,n=this.find("select[data-role=main_type]"),i=this.data("currency"),r=this.find("#gross_value"),a=function(){var n=e(this).find(":selected");t.attr("data-main_type",n.data("main_type")),t.attr("data-direction",n.data("direction")),t.attr("data-sales_tax",1==n.data("sales_tax")),h(e("span.selected_invoice"))},o=function(){var t=e(this).find(":selected").data("manual"),n=e(this).closest(".sales_tax");n.attr("data-manual",t||"false")},s=function(){var n=e(this).find(":selected"),r=n.data("currency");r!=i?(t.attr("data-foreign_currency_transfer","true"),t.find(".transfer_entry [data-role=foreign_currency_code]").text(r),t.find(".transfer_entry [data-role=transfer_bank_account_name]").text(n.text())):t.attr("data-foreign_currency_transfer","false")},l=function(){return t.find("fieldset:hidden, fieldset *:hidden:not(#sales-tax-form-elements)").find("input, select").disable(),!0},c=function(t){return{direction:e(t).closest("form").attr("data-direction")}},u=function(e){0!==e.length&&(i!=e.attr("data-foreign-currency")?(t.find(".invoice_entry [data-role=foreign_currency_value]").val(e.attr("data-foreign-value")),t.find(".invoice_entry [data-role=foreign_currency_code]").text(e.attr("data-foreign-currency")),t.find(".invoice_entry [data-role=formatted_native_value]").html(e.attr("data-native-formatted-value")),t.attr("data-foreign_currency_invoice",!0)):t.attr("data-foreign_currency_invoice",!1),h(e))},h=function(t){var i=r.data("multiple-projects-invoice"),a=r.data("include-paid-amount"),o=t.length>0,s=r.val(),l=n.find(":selected"),c=l.data("main_type"),u=l.data("direction"),h="invoice"==c&&"money_out"==u,d="invoice"==c&&"money_in"==u;h&&(s=-1*s),i&&(d||h)&&o&&e.getScript("/invoices/"+t[0].id+"/project_allocation.js?value="+s+"&include_paid_amount="+a)},d=function(t,n){e(this).data("autocomplete-default",n.content[0])},p=function(e){e.autocomplete({delay:100,minLength:0,source:e.data("source"),select:m,change:m,focus:function(){return!1},response:d})},f=function(){var t=e(this),n=t.prev();n.trigger("focus").autocomplete("search","")},m=function(t,n){return null==n.item?(e("#disposed_asset").val(""),e("input[role=disposed_asset_id]").val("")):(e("#disposed_asset").val(n.item.label),e("input[role=disposed_asset_id]").val(n.item.value)),!1};return r.on("change",function(){h(e("span.selected_invoice"))}),n.on("change",a).change(),t.on("submit",l),t.find("#sales-tax-form-elements").on("change",".sales_tax select",o),t.find("#sales-tax-form-elements .sales_tax select").change(),t.find("select[data-role=transfer_bank_account]").on("change",s).change(),Fa.initPaidItemAutocomplete("invoices",e("#paid_invoice_id.autocomplete_input"),e("#paid_invoice_id").closest("p"),"selected_invoice",u,{queryParamsCallback:c}),Fa.initPaidItemAutocomplete("bills",e("#paid_bill_id.autocomplete_input"),e("#paid_bill_id").closest("p"),"selected_bill",null,{queryParamsCallback:c}),p(t.find("[data-role=capital_asset_disposal] input.ui-autocomplete-input")),t.on("click","[data-role=capital_asset_disposal] a.autocomplete_show_all",f),this
},e(document).ready(function(){e("form#bank_account_entry").bankAccountEntryForm(),e("#bank_account_entry_disposed_asset").change()})}(jQuery),function(e){e(function(){var t=function(t){var n=e("#subs_info"),i=n.find(".details"),r=i.filter("#"+t+"-details");i.addClass("inactive"),r.removeClass("inactive"),n.show().find(".inactive").hide(1,function(){r.fadeIn(500)})},n=function(){t("monthly")},i=function(){t("yearly")},r=function(){var t=e("#billing_profile_period_monthly"),r=e("#billing_profile_period_yearly");t.live("click",n),r.live("click",i),t.is(":checked")?n():r.is(":checked")&&i()};r(),e("select#billing_profile_country").ready(handleBillingProfileRegion),e("select#billing_profile_country").livequery("change",handleBillingProfileRegion)})}(jQuery);var handleBillingProfileRegion=function(){"United States"==$("select#billing_profile_country").val()?(showRegionSelect("billing_profile_region"),$("label[for='billing_profile_town']").html('City <strong class="required">*</strong>'),$("label[for='billing_profile_postcode']").html('Zip Code <strong class="required">*</strong>')):(hideRegionSelect("billing_profile_region"),$("label[for='billing_profile_town']").html('Town <strong class="required">*</strong>'),$("label[for='billing_profile_postcode']").html('Post/Zip Code <strong class="required">*</strong>'))};!function(e){e(function(){e("a#toggle_support_access").live("click",function(t){var n=e("p#support_access strong"),i=e("p#support_access a#toggle_support_access");return"ENABLED"===n.html()?(n.html("DISABLED"),i.html("Enable access")):(n.html("ENABLED"),i.html("Disable access")),e.ajax({url:"/settings/toggle_support_access",type:"post",dataType:"script",data:{_method:"put"}}),t.preventDefault(),!1}),e("a#generate_support_code").live("click",function(t){var n=e("span#support_code"),i=e.ajax({url:"/settings/generate_support_code",type:"put",dataType:"text"});return i.done(function(e){n.html("<strong>"+e+"<strong>")}),t.preventDefault(),!1}),e("table#reminders input.toggle").live("click",function(){var t=e(this),n="/email_templates/"+t.attr("id").replace(/^toggle_reminder_/,"")+"/toggle_reminder";e.ajax({url:n,type:"post",dataType:"script",data:{_method:"put"}})});var t=function(){"Universal"==e("#company_type").val()?(e("#company_registration_number_field").show(),e("#company_registration_mandatory").hide()):"Limited Company"==e("#company_type").val()||"Limited Liability Partnership"==e("#company_type").val()?(e("#company_registration_number_field").show(),e("#company_registration_mandatory").show()):(e("#company_registration_number_field").hide(),e("#company_registration_mandatory").hide())},n=function(){"Not Registered"==e("#company_sales_tax_registration_status").val()?(e("#registration_number").hide(),e("#registration_effective_date").hide(),e("#deregistration_effective_date").hide(),e("#effective_date_info").hide(),e("#registration_initial_details").hide()):"Registration Applied For"==e("#company_sales_tax_registration_status").val()?(e("#registration_number").hide(),e("#registration_effective_date").show(),e("#deregistration_effective_date").hide(),e("#effective_date_info").show(),e("#registration_initial_details").hide()):"De-registered"==e("#company_sales_tax_registration_status").val()?(e("#effective_date_info").hide(),e("#registration_effective_date").show(),e("#deregistration_effective_date").show(),e("#registration_number").show(),e("#registration_initial_details").show()):(e("#effective_date_info").hide(),e("#registration_effective_date").show(),e("#deregistration_effective_date").hide(),e("#registration_number").show(),e("#registration_initial_details").show())},i=function(){"Not Registered"==e("#company_sales_tax_registration_status").val()?e("#sales_tax_settings").hide():e("#sales_tax_settings").show()},r=function(){e("#company_sales_tax_registration_status.vatReg").val()?n():i()},a=function(){e("#company_type").val().match(/^US/)?e("span.company_type_warning").addClass("show"):e("span.company_type_warning").removeClass("show")};e("#company_type").live("change",function(){t(),a(),handleCompanyRegion()}).livequery(t),e("#company_sales_tax_registration_status").live("change",r).livequery(r),e(".user_permissions_slider").cumulativeSlider(),e("#send_invitation").livequery(function(){e(this).toggleInvitation()});var o=function(){"before"==e("select#email_template_before_after").val()?(e("span#optional_reminder_details").hide(),e("input#email_template_using_optional_reminder").attr("checked",!1),e("span#optional_reminder_details").addClass("inactive"),e("input#email_template_optional_reminder_period_in_days").attr("disabled",!0)):(e("span#optional_reminder_details").show(),e("input#email_template_using_optional_reminder").is(":checked")?(e("span#optional_reminder_details").removeClass("inactive"),e("input#email_template_optional_reminder_period_in_days").attr("disabled",!1)):(e("span#optional_reminder_details").addClass("inactive"),e("input#email_template_optional_reminder_period_in_days").attr("disabled",!0)))};e("select#email_template_before_after").live("change",o),e("input#email_template_using_optional_reminder").live("click",o),e("#optional_reminder_details").livequery(function(){o()}),e("#price_list_item_item_type").livequery("change",function(){var t=e(this),n=t.val();if(n)switch(e("#price_list_item_time_help").hide(),e("#price_list_item_stock_item_id").hide(),n){case"Hours":e("#price_list_item_time_help").show();break;case"Stock":e("#price_list_item_stock_item_id").show();break;default:var i=e("#price_list_item_quantity").val().split(":");i.length>1&&e("#price_list_item_quantity").val(i[0])}}).livequery(function(){e(this).trigger("change")}),e("select#company_country").livequery("change",function(){handleCompanyRegion()})})}(jQuery),$(function(){$("#email_attachments").attachable(),$("a#add_attachment_link").data("modal",{load:function(){$("#add_attachments_form").refreshSelectedAttachments($("#email_attachments").attachable("ids")),setAJAXCallbacksForAnyProcessingFiles()}}),$('#add_attachments_form input[type="checkbox"]').live("click",function(){$(this).is(":checked")?$("#email_attachments").attachable("add",$(this).val()):$("#email_attachments").attachable("remove",$(this).val()),$("#add_attachments_form").refreshSelectedAttachments($("#email_attachments").attachable("ids"))}),$("#email_attachments .datadelete").live("click",function(e){var t=$(this).attr("data-document_id");return $("#email_attachments").attachable("remove",t),$("#attached_document_"+t).fadeOut(function(){$(this).remove()}),e.preventDefault(),!1}),$("#email_expense_receipts").live("click",function(){if($(this).is(":checked")){var e=this;$(e).disable(),jQuery.ajax({url:$("#invoice").attr("data-url")+"/expense_attachments",type:"get",dataType:"json",success:function(t){$(t.html.expense_attachments).hide().insertAfter("#email_attachments").fadeIn(),$(e).enable()}})}else $("#expense_attachments").fadeOut(function(){$(this).remove()})})}),$(function(){setAJAXCallbacksForAnyProcessingFiles(),$("form#new_document").live("ajax:remotipartSubmit",function(){$("input[type=submit]",this).addClass("disabled").val("Uploading...")}),$("#document_submit").live("click",function(e){$("#document_attachment_attributes_attachment").val()?$(this).addClass("disabled spinner"):(e.preventDefault(),$("input[type=submit]").blur(),alert('No file selected! Please choose a file before clicking the "Upload File" button.'))}),$("form#new_document").live("ajax:complete",function(e,response){if(json_response=eval("("+response.responseText+")"),"success"===json_response.status)if($("#add_attachments_form").length>0)$(json_response.html.attachable_document).hide().prependTo("#add_attachments_form ol").fadeIn(),$("#add_attachments_form ol li").length>12&&($("#add_attachments_form ol li:last").remove(),$("#attachable_pagination").html(""),$("#attachable_pagination").html(json_response.html.modal_pagination),$(".pagination a").attr("data-remote","true")),$("#add_attachments_form").refreshSelectedAttachments($("#email_attachments").attachable("ids")),resetUploadForm();else if($("table#files").length>0){var new_row=$(json_response.html.document);$("table tbody tr:first").hasClass("odd")?new_row.removeClass("odd").addClass("even"):new_row.removeClass("even").addClass("odd"),new_row.hide().prependTo("table#files tbody").fadeIn().css("display","table-row"),resetUploadForm()}else window.location.pathname="/files";else"redirect"===json_response.status?window.location=json_response.redirect:($("form#new_document :submit").removeClass("disabled").val("Upload File").enable(),(json_response.flash||json_response.flash.length>0)&&alert(json_response.flash));return e.preventDefault(),!1})}),function(e){e(function(){prices_form_options={success:function(t,n){e("#blank_slate").replaceWith(n.html.blank_slate),e("#primary_content").replaceWith(n.html.list),e("#talaria_tabs").replaceWith(n.html.tabs),e("#talaria_title_actions").replaceWith(n.html.title_actions),t.dialog("close")},add_another:function(t,n){e("#blank_slate").replaceWith(n.html.blank_slate),e("#primary_content").replaceWith(n.html.list),e("#talaria_tabs").replaceWith(n.html.tabs),e("#talaria_title_actions").replaceWith(n.html.title_actions),t.html(n.html["new"])},error:function(e,t){modal_content=t.html["new"]?t.html["new"]:t.html.edit,e.html(modal_content)}},e("#modal form.stock_item").modalForm(prices_form_options),e("#modal form.price_list_item").modalForm(prices_form_options)})}(jQuery),function(e){e(function(){function t(t){e("#tertiary_nav li").removeClass("current"),e("#tertiary_nav li."+t).addClass("current")}e("#modal form.income_category").modalForm({success:function(t,n){e("#income_categories_list").length>0?e("#income_categories_list").replaceWith(n.html.list):e("#tertiary_nav li.invoice_categories a").trigger("click"),t.dialog("close")},add_another:function(n,i){e("#income_categories_list, #admin_expenses_categories_list, #cost_of_sales_categories_list").replaceWith(i.html.list),t("income_categories"),n.html(i.html["new"])},error:function(e,t){modal_content=t.html["new"]?t.html["new"]:t.html.edit,e.html(modal_content)}}),e("#modal form.admin_expenses_category").modalForm({success:function(t,n){e("#admin_expenses_categories_list").length>0?e("#admin_expenses_categories_list").replaceWith(n.html.list):e("#tertiary_nav li.admin_expenses_categories a").trigger("click"),t.dialog("close")},add_another:function(n,i){e("#income_categories_list, #admin_expenses_categories_list, #cost_of_sales_categories_list").replaceWith(i.html.list),t("admin_expenses_categories"),n.html(i.html["new"])},error:function(e,t){modal_content=t.html["new"]?t.html["new"]:t.html.edit,e.html(modal_content)}}),e("#modal form.cost_of_sales_category").modalForm({success:function(t,n){e("#cost_of_sales_categories_list").length>0?e("#cost_of_sales_categories_list").replaceWith(n.html.list):e("#tertiary_nav li.cost_of_sales_categories a").trigger("click"),t.dialog("close")},add_another:function(n,i){e("#income_categories_list, #admin_expenses_categories_list, #cost_of_sales_categories_list").replaceWith(i.html.list),t("cost_of_sales_categories"),n.html(i.html["new"])},error:function(e,t){modal_content=t.html["new"]?t.html["new"]:t.html.edit,e.html(modal_content)}})})}(jQuery),function(e){e(function(){e("#invoice_gallery li a.dialog").live("click",function(t){var n=e(this),i=n.attr("href").split("#");i.length>1&&(e("#caption_"+i[1]).dialog("open"),t.preventDefault())}),e(".gallery_preview").livequery(function(){e(this).dialog({autoOpen:!1,width:442,modal:!0,resizable:!1})}),e(".theme_confirm").live("click",function(e){return confirm("Resetting the template will remove all your custom CSS, and there's no way to get this back. Are you sure you want to reset?")?void 0:(e.preventDefault(),!1)})})}(jQuery),$(function(){$(function(){$("#change_invoice_theme").live("click",function(e){return $("#customise").fadeIn(),$("li.power_actions.last-child.powerDropdown").removeClass("expanded"),e.preventDefault(),!1}),$("#customise .actions a").click(function(){var e=$("ul.carousel li.current");0!=e&&e.switchTheme(),$("#customise").fadeOut()}),$("#customise a[data-theme-href]").live("click",function(e){$("a[data-theme-href]").closest("li").removeClass("current"),$(this).closest("li").addClass("current");var t=$(this).attr("data-theme-href");return $("link[rel=stylesheet][title=theme]").attr("href",t),e.preventDefault(),!1}),$(document).keyup(function(e){if(27==e.keyCode&&$("#customise").is(":visible")){var t=$("ul.carousel li.current");0!=t&&t.switchTheme(),$("#customise").fadeOut()}});var e=!1;$(document).ready(function(){$("#customise").hover(function(){e=!0},function(){e=!1}),$("body").mouseup(function(){!e&&$("#customise").is(":visible")&&($("ul.carousel li.current").switchTheme(),$("#customise").fadeOut())})}),$("#invoice_item_item_type, #estimate_item_item_type").live("change",function(){var e=$(this),t="estimate_item_item_type"==e.attr("id")?"estimate":"invoice",n=e.val(),i="Enter discounts and credits as negative.",r="The total sales tax amount",a="Unit Price",o="Total Amount",s="n/a",l="0";if(n)switch($("#"+t+"_item_time_help").hide(),$("#"+t+"_item_stock_item_id").hide(),$("#"+t+"_item_unitprice").show(),$("#unit_price_label").html(a),$("#"+t+"_item_category_id").closest("p").show(),$("#"+t+"_item_sales_tax").show(),$("#"+t+"_item_second_sales_tax").show(),$("#price_list_item").show(),$("#"+t+"_item_amount_helper_text").html(i),n){case"Comment":$("#"+t+"_item_quantity").val(s),$("#"+t+"_item_unitprice").hide(),$("#"+t+"_item_category_id").closest("p").hide(),$("#"+t+"_item_sales_tax").hide(),$("#"+t+"_item_second_sales_tax").hide(),$("#"+t+"_item_price_list").removeAttr("checked"),$("#price_list_item").hide(),$("#price_list_code").hide();break;case"VAT":$("#"+t+"_item_amount_helper_text").html(r),$("#unit_price_label").html(o),$("#"+t+"_item_category_id").closest("p").hide(),$("#"+t+"_item_sales_tax").hide(),$("#"+t+"_item_price_list").removeAttr("checked"),$("#price_list_item").hide(),$("#price_list_code").hide();break;case"Hours":$("#"+t+"_item_time_help").show();break;case"Stock":$("#"+t+"_item_stock_item_id").show();break;case"Discount":$("#price_list_item").hide(),$("#price_list_code").hide(),$("#"+t+"_item_price_list").removeAttr("checked");break;case"Credit":$("#price_list_item").hide(),$("#price_list_code").hide(),$("#"+t+"_item_price_list").removeAttr("checked");break;default:var c=$("#"+t+"_item_quantity").val().split(":");c.length>1&&$("#"+t+"_item_quantity").val(c[0]),$("#"+t+"_item_quantity").val()==s&&$("#"+t+"_item_quantity").val(l)}}).livequery(function(){$(this).trigger("change")}),$("#invoice_item_price_list, #estimate_item_price_list").live("click",function(){$(this).attr("checked")?$("#price_list_code").show():$("#price_list_code").hide()});var t=function(e){var t=[];return $("tr[data-model="+e+"_item]").each(function(){var e=$(this).attr("id").match(/(.+)[-=_](.+)/);e&&t.push(e[1]+"[]"+"="+e[2])}),t.join("&")};$("#reorder_invoice_items").live("click",function(){var e=$("div#invoice").data("url").match("estimates")?"estimate":"invoice",n=$(this),i=n.html(),r=$("#add_invoice_item"),a=$('table#invoice-amount tbody[data-behaviour="sortable"]'),o=$("table#invoice-amount"),s=$("#preview_categories").attr("checked"),l=s?".item_controls, .line_item_controls":".item_controls";if(i.match(/I've finished reordering/)){if("invoice"==e)var c=new RegExp(/\/invoices\/?.*\/(\d+)/);else var c=new RegExp(/\/estimates\/?.*\/(\d+)/);var u=c.exec(window.location)[1],h=t(e),d="/"+e+"s/"+u+"/"+e+"_items/reorder"+"?"+h;n.html("<span><em>Saving...</em></span>"),$.ajax({url:d,type:"PUT"}).fail(function(){alert("Failed to reorder items")}).always(function(){n.html("<span><em>Reorder</em></span>"),r.show(),a.sortable("destroy"),o.find(l).show().end().find("tr.item").removeClass("moving").removeAttr("title").end()})}else n.html("<span><em>I've finished reordering</em></span>"),r.hide(),a.sortable({axis:"y",stop:function(){o.zebraStripes()}}),o.find(l).hide().end().find("tr.item").addClass("moving").attr("title","Drag to Reorder").end();return!1}),$("#preview_categories").livequery(function(){$(this).toggleInvoiceCategoryDisplay()}),$('form[enctype="multipart/form-data"], form#invoice_form, form#new_vat_submission, form[name=entryform]').livequery("submit",function(){$(this).find("input[type=submit]").attr("disabled","disabled")}),$("input#invoice_new_contact_attributes_uses_contact_invoice_sequence").live("click",function(){var e=$(this),t=$("#invoice_reference");t&&e.is(":checked")?t.data("old_ref",t.val()).val(""):t.val(t.data("old_ref"))}),$("#additional_text_dialog").livequery(function(){$(this).dialog({autoOpen:!1,width:500,modal:!0,resizable:!1})}),$("#additional_text_action a").livequery(function(){$(this).click(function(e){return $("#additional_text_dialog").dialog("open"),e.preventDefault(),!1})}),$("#additional_text_close").livequery(function(){$(this).click(function(e){return $("#additional_text_dialog").dialog("close"),e.preventDefault(),!1})}),$("#additional_text_dialog form").livequery(function(){$(this).AJAXForm()});var n=function(e){var t=$("select#"+e+"_project_id"),n=$("select#"+e+"_contact_id"),i=t.attr("data-"+e+"-id"),r={project_id:t.val(),contact_id:n.val()};r[e+"_id"]=i,$.ajax({url:"/"+e+"s/project",type:"PUT",dataType:"script",data:r})},i="1"===$("input#invoice_customise_new_invoice_email").val(),r=function(e){$("input#invoice_send_new_invoice_emails").is(":checked")?($("span#email_actions").show(),e&&i&&$("div#email_form").show()):($("input#invoice_customise_new_invoice_email").val("0"),$("span#email_actions").hide(),$("div#email_form").hide())};$("input#invoice_send_new_invoice_emails").live("click",function(){r(!0)}).livequery(function(){r(!1)});var a=function(e){i=e;var t=$("div#email_form, a#reset_email_link"),n=$("a#customise_email_link"),r="custom",a="1";if(!e){var o=n;n=t,t=o,r="default",a="0"}t.show(),n.hide(),$("input#invoice_customise_new_invoice_email").val(a),$("span#new_invoice_email_text").html("Email this invoice automatically using my "+r+" template")};$("a#customise_email_link").live("click",function(){return a(!0),!1}),$("a#reset_email_link").live("click",function(){return a(!1),!1}),$("a#edit_email_link").live("click",function(){return"cancel editing"===$("a#edit_email_link").html()?($("div#email_form").hide(),$("a#edit_email_link").html("edit")):($("a#edit_email_link").html("cancel editing"),$("input#invoice_customise_new_invoice_email").val("1"),$("div#email_form").show()),!1}),$("select#invoice_project_id, select#invoice_contact_id").live("change",function(){n("invoice")}),$("select#estimate_project_id, select#estimate_contact_id").live("change",function(){n("estimate")}),$(".power_actions li a.category","#invoice-amount").livequery("click",function(){var e=$(this),t=e.attr("href"),n=e.attr("data-id"),i=e.closest("tr").attr("data-model");return n&&i?(e.addClass("spinner"),data={},data[i+"[category_id]"]=n,$.ajax({url:t,type:"put",dataType:"json",data:data,success:function(e){switch(e.status){case"success":var t="invoice_item"==i?"invoice_content":"estimate_content",n=e.html[t];$("#primary_content").html(n)}},complete:function(){e.removeClass("spinner")}}),!1):void 0}),$.fn.zebraStripes=function(){return this.each(function(){$("tbody tr.item",$(this)).each(function(e){$(this).removeClass("odd even").addClass(0===e%2?"odd":"even")})})}})}(jQuery)),$(function(){$(function(){$("#estimate_list a.view_history").live("click",function(e){var t=$(this),n="(View History)",i="(Hide History)",r="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",a=t.next("ol");switch(t.html()){case n:a.children().size()>0?(t.html(i),a.slideToggle(200)):(t.html(r),t.addClass("spinner"),$.ajax({url:t.attr("href"),type:"get",dataType:"json",success:function(e){a.html(e.html.history),a.slideToggle(200)},complete:function(){t.removeClass("spinner"),t.html(i)}}));break;case i:t.html(n),a.slideToggle(200)}return e.preventDefault(),!1})})}(jQuery)),$(function(){$(function(){$(document).delegate("a[rel=modal]","click",function(e){var t=$(this),n=t.attr("href"),i=t.attr("title")?t.attr("title"):t.text(),r="#modal",a=$(r).length>0?$(r):$('<div id="modal"/>').appendTo("body"),o=t.attr("data-modal-width")?parseInt(t.attr("data-modal-width")):600,s=t.data("modal");return 0==t.parents("#modal").length&&a.dialog({width:o,autoOpen:!1,modal:!0,resizable:!1,close:function(){window.location.hash.match(/^#!/)&&(window.location.hash="")}}),t.addClass("disabled spinner"),$.ajax({url:n,type:"get",dataType:"json",success:function(e){a.html(e).dialog("option","title",i).dialog("open"),t.removeClass("disabled spinner"),$(".pagination a").attr("data-remote","true"),s&&s.load&&s.load()}}),e.preventDefault(),!1}),$("#modal a.cancel").live("click",function(e){return $("#modal").dialog("close"),e.preventDefault(),!1}),$("#modal form.estimate_item").modalForm({success:function(e,t){$("#primary_content").html(t.html.estimate_content),$("#meta").replaceWith(t.html.meta),$("#title_actions").html(t.html.title_actions),e.dialog("close")},add_another:function(e,t){$("#primary_content").html(t.html.estimate_content),$("#meta").replaceWith(t.html.meta),$("#title_actions").html(t.html.title_actions),e.html(t.html["new"])},error:function(e,t){modal_content=t.html["new"]?t.html["new"]:t.html.edit,e.html(modal_content)}}),$("#modal form.invoice_item").modalForm({success:function(e,t){$("#primary_content").html(t.html.invoice_content),$("#meta").replaceWith(t.html.meta),$("#title_actions").html(t.html.title_actions),e.dialog("close")},add_another:function(e,t){$("#primary_content").html(t.html.invoice_content),$("#meta").replaceWith(t.html.meta),$("#title_actions").html(t.html.title_actions),e.html(t.html["new"])},error:function(e,t){modal_content=t.html["new"]?t.html["new"]:t.html.edit,e.html(modal_content)}});var e=function(){$(".eps_not_ready_yet").length>0&&$(".eps_not_ready_yet").click(function(e){e.preventDefault(),$("#eps_not_ready_yet_modal").infoModal({dialogClass:"feature_modal rti_submission_modal",closeOnEscape:!0,draggable:!1,resizable:!1})})};e(),$("#modal form.payslip").modalForm({success:function(t,n){$("#title_actions").html(n.html.title_actions),$("#rti_container").html(n.html["workflow"in n.html?"workflow":"correction_workflow"]),e(),t.dialog("close")},error:function(e,t){e.html(t.html.edit)}}),$("#modal form#convert_project").modalForm({error:function(e,t){e.html(t.html.new_project)}})})}(jQuery)),$(document).on("ready pjax:complete",function(){$.smartPoller(3e3,function(e){$("#email_history tr.sending").each(function(){var t=$(this);$.ajax({url:"/emails/"+t.data("email-id")+".js"}),t.hasClass("sending")&&e()})});var e={tags:{strong:{},b:{},i:{},em:{},br:{},p:{check_attributes:{style:"style"}},img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers",style:"style"}},ul:{check_attributes:{style:"style"}},ol:{check_attributes:{style:"style"}},li:{check_attributes:{style:"style"}},a:{set_attributes:{target:"_blank",rel:"nofollow"},check_attributes:{href:"url",style:"style"}}}},t=function(e){$(".wysihtml5-sandbox").height()!=e.data.editor.composer.element.offsetHeight-1&&$(".wysihtml5-sandbox").height(e.data.editor.composer.element.offsetHeight)};$(".html_help").hide(),$(".wysihtml5").each(function(){var n=new wysihtml5.Editor($(this).attr("id"),{toolbar:"wysihtml5_toolbar",parserRules:e});n.on("load",function(){$(this.composer.element).bind("keyup keydown blur paste focus",{editor:this},t),t({data:{editor:this}}),$(".wysihtml5-sandbox").contents().find("body").css("overflow","hidden")}),n.on("change_view",function(e){"textarea"===e?$(".html_help").show():$(".html_help").hide()})})}),$(function(){$(function(){$(".category a").live("click",function(e){var t=$(this);return t.parents("tbody").next("tbody").toggle(),t.parents("tr").toggleClass("collapsed"),e.preventDefault(),!1});var e=function(){"750"==$("#journal_entry_code").val()?($("#bank_accounts").show(),$("#users").hide(),$("#stock_options").hide(),$("#journal_entry_user_id").disable(),$("#journal_entry_bank_account_id").enable()):"90"==$("#journal_entry_code").val().substring(0,2)?($("#bank_accounts").hide(),$("#users").show(),$("#stock_options").hide(),$("#journal_entry_user_id").enable(),$("#journal_entry_bank_account_id").disable()):"609"==$("#journal_entry_code").val()?($("#bank_accounts").hide(),$("#users").hide(),$("#stock_options").show()):($("#bank_accounts").hide(),$("#users").hide(),$("#stock_options").hide(),$("#journal_entry_user_id").disable(),$("#journal_entry_bank_account_id").disable())};$("#journal_entry_code").live("change",e).livequery(e)})}(jQuery));var invoice_timeline,invoice_timeline_data;$(document).ready(function(){function e(e,t){for(invoice_timeline.showLoading(),invoice_timeline.xAxis[0].setCategories(invoice_timeline_data.labels.slice(e,e+6),!1,t),i=0;i<invoice_timeline_data.series.length;i++)series=invoice_timeline.get(invoice_timeline_data.series[i].id),series?series.setData(invoice_timeline_data.series[i].data.slice(e,e+6),!1):(series=jQuery.extend({},invoice_timeline_data.series[i]),series.data=series.data.slice(e,e+6),invoice_timeline.addSeries(series,!1,t));invoice_timeline.hideLoading(),invoice_timeline.redraw(),$("#invoice_timeline .widget_paging").data("offset",e),$("#invoice_timeline .widget_paging .older").toggleClass("disabled",0>=e),$("#invoice_timeline .widget_paging .newer").toggleClass("disabled",e+6>=invoice_timeline_data.labels.length)}$("body").delegate("div#invoice_timeline","ajax.load",function(){invoice_timeline=new Highcharts.Chart({chart:{renderTo:"invoice_timeline_visualisation",defaultSeriesType:"column",spacingTop:35,spacingRight:0,spacingLeft:0,spacingBottom:14,events:{load:function(){$.ajax({url:"/invoices/timeline.json",success:function(t){$("#invoice_timeline").data("currency",t.currency),invoice_timeline_data=t,e(5,!0)}})}}},credits:{enabled:!1},title:{text:""},xAxis:{lineColor:"#DADADA",tickWidth:0,labels:{style:{color:"#878787",fontSize:"11px",fontWeight:"bold",fontFamily:'"Helvetica Neue",Arial,Helvetica,sans-serif'}}},yAxis:{labels:{style:{color:"#878787",fontSize:"12px",fontWeight:"bold",fontFamily:'"Helvetica Neue",Arial,Helvetica,sans-serif'}},min:0,gridLineDashStyle:"Dash",gridLineColor:"#DADADA",title:{text:""}},legend:{symbolWidth:12,layout:"horizontal",backgroundColor:"#FFFFFF",align:"right",borderColor:"#ffffff",borderWidth:0,verticalAlign:"top",x:0,y:-35,floating:!0,shadow:!1,itemStyle:{color:"#666666",fontSize:"12px",fontFamily:'"Helvetica Neue",Arial,Helvetica,sans-serif',reversed:!1}},tooltip:{borderRadius:2,shadow:!1,borderWidth:2,style:{color:"#666666",fontSize:"12px",fontWeight:"bold",fontFamily:'"Helvetica Neue",Arial,Helvetica,sans-serif'},formatter:function(){return this.series.name+": "+Fa.nativeFormattedCurrency({amount:this.y,precision:2,currencyUnit:$("#invoice_timeline").data("currency")})}},plotOptions:{column:{groupPadding:.25,pointPadding:0,borderWidth:0,shadow:!1,pointWidth:55},series:{stacking:"normal"}}})}),$("#invoice_timeline .widget_paging a").live("click",function(){return current_offset=parseInt($("#invoice_timeline .widget_paging").data("offset")),direction=$(this).hasClass("newer")?1:-1,$(this).hasClass("disabled")||e(current_offset+direction,!1),!1});var t={show:function(e,t){""===$(t.panel).html()&&$(t.panel).html('<div class="loading"></div>')},load:function(e,t){$(t.panel.children()[0]).trigger("ajax.load");var n=$(t.panel).find(".paginate");Fa.updatePaginatedPanel.call(n,1,n.find(".page").length)},cookie:{expires:14},cache:!0},n=function(e,n){$(e).each(function(){var e=$(this),i=t;i.cookie.name=e.attr("id"),n>0&&(i.selected=n),e.tabs(t)})};n($(".panel.tabbed > div")),$(".panel.basic div[data-url]").livequery(function(){var e=$(this),t=e.attr("data-url");$.ajax({url:t,success:function(t){e.html(t)}})}),$("#hide_overview_setup").live("click",function(){return $(this).closest(".overview .infobox_wrapper").fadeOut(),createCookie("hide_overview_setup",1,65),!1});var r=function(){var e={};$(".overview_portlet_wrapper .panel_wrapper").each(function(){var t=$(this);if(t.hasClass("cashflow"))var n="cashflow",i="cashflow";else{var n=t.find("section div").attr("id");if(t.find("section.panel.tabbed").length>0)var i=$("ul","#"+n).sortable("toArray");else var i=t.find("section.panel section > div").attr("id")}e[n]=i}),$.post("overview/save_panel_positions",{panel_positions:e})};$(".tabnav ul").sortable({connectWith:".tabnav ul",appendTo:"#content",helper:"clone",delay:100,start:function(e,t){$("#cashflow, #ne_widget").css({opacity:.5}),t.placeholder.width(t.item.width())},stop:function(){$("#cashflow, #ne_widget").css({opacity:1})},receive:function(e,t){var i=$(this);if(i.children().length>5)$(t.sender).sortable("cancel"),alert("Sorry, panels can have a maximum of five tabs.");else if(0==$(t.sender).children().length)$(t.sender).sortable("cancel"),alert("Sorry, panels must have a mimimum of one tab.");else{var r=i.parent().parent().parent(),a=$(t.sender[0]).parent().parent().parent(),o=r.tabs("option","selected"),s=a.tabs("option","selected");r.tabs("destroy"),a.tabs("destroy"),setTimeout(function(){n(r,o),n(a,s)},10)}},update:r}).disableSelection(),$(".tabnav.disable_sort ul").sortable("disable"),$(".sortable.overview_portlet_wrapper").sortable({connectWith:".overview_portlet_wrapper",tolerance:"pointer",handle:".panel header, .panel .drag_header",cursor:"move",cancel:".sortable.overview_portlet_wrapper .powerDropdown",start:function(e,t){t.placeholder.height(t.item.height()),t.placeholder.width(t.item.width())},update:r}),$(".overview_portlet_wrapper .tabnav .ui-tabs-nav").wrap('<div class="drag_header"></div>'),$(document).bind("keyup",function(e){27===e.keyCode&&($(".tabnav ul").sortable("cancel"),$(".sortable.overview_portlet_wrapper").sortable("cancel"))})}),$(function(){$("select#project_currency").bind("change",function(){var e=$("select#project_currency option:selected").data("currency"),t=$("select#project_budget_units option[value=Monetary]");t.html(e)}),$("#tasks_list a.ajaxget-spinner").live("click",function(e){return $(this).addClass("spinner"),$.get(this.href,null,null,"script"),e.preventDefault(),!1}),$("form#written_off_date a").live("click",function(e){return $("#current_written_off_date, #toggle_written_off_form_link, #written_off_form, #written_off_form_errors").toggle(),$("#written_off_form_errors").html(""),$("#invoice_written_off_date").css({background:"#FFFFFF"}),e.preventDefault(),!1}),$("#profitability_chart_block input#project_include_unbilled_time_in_profitability").live("click",function(){var e=$(this),t=e.attr("data-project-id");$.ajax({url:"/projects/"+t+"/toggle_unbilled_time_in_profitability",type:"post",dataType:"json",data:{_method:"put"},beforeSend:function(){e.attr("disabled","disabled").hide().parent().addClass("progressing")},complete:function(){e.removeAttr("disabled").show().parent().removeClass("progressing")},success:function(e){$("#profitability_chart_block .summary_block").replaceWith(e.html.profitability)},error:function(){alert("Could not update the project preferences"),e.attr("checked")?e.removeAttr("checked"):e.attr("checked","checked")}})}),$("#filter_tasks select").live("change",function(){determine_visible_tasks(),calculate_task_totals()})}),$(function(){$("select#report_contact_id").live("change",function(){var e=$(this),t={report_contact_id:e.val()};$.ajax({url:"/time_reports/update_project_list",type:"get",dataType:"script",data:t})}),$("select#report_project_id").live("change",function(){var e=$(this),t={report_project_id:e.val()};$.ajax({url:"/time_reports/update_task_list_no_add",type:"get",dataType:"script",data:t})}),$("select#report_timeframe").live("change",function(){var e=$(this);$("#report_custom_timeframe").toggle("Custom"==e.val())}),$("select#timeslip_project_id").live("change",function(){var e=$(this),t={project_id:e.val()};e.attr("data-weekly")&&(t.weekly=!0),$.ajax({url:"/weekly_timesheets/update_task_list",type:"get",dataType:"script",data:t})}),$("select#timeslip_task_id").live("change",function(){var e=$(this);"new"==e.val()&&$("#task_dialog").dialog("open")}),$("a.cancel_timeslip").live("click",function(e){return $("#inline-form-block").slideUp("fast"),$("#inline-form").remove(),$("tr.timeslipdetails").show(),e.preventDefault(),!1});var e={autoOpen:!1,width:600,modal:!0,resizable:!1};$("#task_dialog").livequery(function(){$(this).dialog(e)}).live("dialogclose",function(){$("#timeslip_task_id").data("autocomplete-hidden-field")||$("#timeslip_task_id").val("")}),$("#task_dialog input[type=submit]").live("click",function(){$("#task_dialog .submitarea").hide(),$("#task_dialog .loading").show(),$("#task_reload").attr("value",!$("#tasks_tab").hasClass("active"))}),$("#task_dialog form").livequery(function(){$(this).AJAXForm()
}),$(".close_task").live("click",function(e){return $("#task_dialog").dialog("close"),e.preventDefault(),!1}),$(".timeslips_create .timeslips_submit:not(.start_timer)").live("click",function(){_gaq.push(["_trackEvent","Time tracking","New timeslip","Desktop"])}),$(".timeslips_update .timeslips_submit").live("click",function(){_gaq.push(["_trackEvent","Time tracking","Update timeslip","Desktop"])})});var createCookie=function(e,t,n){var i="";if(n){var r=new Date;r.setTime(r.getTime()+1e3*60*60*24*n),i="; expires="+r.toGMTString()}document.cookie=e+"="+t+i+"; path=/"},readCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},eraseCookie=function(e){createCookie(e,"",-1)},sum_times=function(e){var t=0,n=0;for(i=0;i<e.length;i++){var r=new Date;r.setHours(e[i].split(":")[0]),r.setMinutes(e[i].split(":")[1]),n+=r.getHours(),t+=r.getMinutes()}return extra_hours=Math.floor(t/60)+n,extra_minutes=t%60,1==extra_minutes.toString().length&&(extra_minutes="0"+extra_minutes),extra_hours+":"+extra_minutes},calculate_task_totals=function(){var e=new Array,t=new Array,n=new Array;$("#tasks_list tr.item:visible td.billed_hours").each(function(){e.push($(this).text())}),$("#tasks_list tr.item:visible td.unbilled_hours").each(function(){t.push($(this).text())}),$("#tasks_list tr.item:visible td.unbillable_hours").each(function(){n.push($(this).text())}),$("#tasks_list #billed_hours").text(sum_times(e)),$("#tasks_list #unbilled_hours").text(sum_times(t)),$("#tasks_list #unbillable_hours").text(sum_times(n))},determine_visible_tasks=function(){var e=$("#filter_tasks select"),t=e.closest("form"),n=e.val();$("#tasks_list").removeClass("status_all status_active status_completed status_hidden").addClass(n),"status_all"==n&&(n="item"),0==$("#tasks_list tr."+n).size()?($("#filter_no_tasks").show(),$("#tasks_list").hide(),t.addClass("no_results")):($("#filter_no_tasks").hide(),$("#tasks_list").show(),t.removeClass("no_results"))},getCursorXY=function(e){mouseX=window.addEventListener?e.pageX:e.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),mouseY=window.addEventListener?e.pageY:e.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)},handleCompanyRegion=function(){var e=$("select#company_type").val(),t="Universal"==e?"":' <strong class="required">*</strong>';"United States"==$("select#company_country").val()?(showRegionSelect("company_region"),$("label[for='company_town']").html('City <strong class="required">*</strong>'),$("label[for='company_postcode']").html("Zip Code"+t)):(hideRegionSelect("company_region"),$("label[for='company_town']").html('Town <strong class="required">*</strong>'),$("label[for='company_postcode']").html("Post/Zip Code"+t))},handleContactRegion=function(){$("select#contact_type").val(),"United States"==$("select#contact_country").val()?(showRegionSelect("contact_region"),$("label[for='contact_town']").html("City"),$("label[for='contact_postcode']").html("Zip Code")):(hideRegionSelect("contact_region"),$("label[for='contact_town']").html("Town"),$("label[for='contact_postcode']").html("Post/Zip Code"))},hideRegionSelect=function(e){var t=$("select#"+e),n=$("input#"+e);t.hide(),t.attr("disabled",!0),n.show(),n.attr("disabled",!1),n.val()==t.val()&&n.val(""),$("label[for='"+e+"']").html("Region or State")},showRegionSelect=function(e){var t=$("select#"+e),n=$("input#"+e);t.show(),t.attr("disabled",!1),n.hide(),n.attr("disabled",!0),$("label[for='"+e+"']").html("State")};$(function(){var e,t,n,i=function(n){e&&(e.abort(),delete e),t&&(clearTimeout(t),delete t),t=setTimeout(function(){$("form.search input").addClass("spinner"),$.isFunction(history.pushState)&&history.pushState("","",n.attr("action")+"?"+n.serialize()),e=$.getJSON(n.attr("action"),n.serialize(),function(e){$("#search_results").html(e.html.results).trigger("layout"),$("form.search input").removeClass("spinner")})},500)};$("form.search input").keyup(function(e){var t=$("form.search"),r=$.trim(t.find("#query").val());r.length>=2&&9!=e.which&&27!=e.which&&n!=r&&(e.preventDefault(),n=r,i(t))}),$("form.search").submit(function(e){e.preventDefault();var t=$("form.search");return i(t),!1}),$("#search-box").blur(function(){$(this).val("")}),$("#search_results a.toggle").live("click",function(e){e.preventDefault();var t=$(this).closest(".category_results"),n=t.find("h2");t.find("ol"),n.toggleClass("collapsed"),t.find("ol").toggle(),t.find("div.next").toggle(),t.find("div.show").toggle()}),$("#search_results div.next a").live("click",function(e){e.preventDefault();var t=$(this).closest(".category_results"),n=$(this).attr("href");$(this).remove(),t.find(".spinner").show(),$.getJSON(n,function(e){t.find(".spinner").hide(),t.find("ol").append(e.html.results_list),t.find(".next").replaceWith(e.html.pagination_link)})});var r={elbowRoom:10};$("#search_results").rowMaker(r).live("layout",function(){$(this).rowMaker(r)}),$(window).resize(function(){$("#search_results").trigger("layout")})}),/*!
jQuery Waypoints - v1.1.7
Copyright (c) 2011-2012 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/MIT-license.txt
https://github.com/imakewebthings/jquery-waypoints/blob/master/GPL-license.txt
*/
function(e,t,n,i){"$:nomunge";var r=e(i),a="waypoint.reached",o=function(e,n){e.element.trigger(a,n),e.options.triggerOnce&&e.element[t]("destroy")},s=function(e,t){if(!t)return-1;for(var n=t.waypoints.length-1;n>=0&&t.waypoints[n].element[0]!==e[0];)n-=1;return n},l=[],c=function(t){e.extend(this,{element:e(t),oldScroll:0,waypoints:[],didScroll:!1,didResize:!1,doScroll:e.proxy(function(){var t=this.element.scrollTop(),i=t>this.oldScroll,r=this,a=e.grep(this.waypoints,function(e){return i?e.offset>r.oldScroll&&e.offset<=t:e.offset<=r.oldScroll&&e.offset>t}),s=a.length;this.oldScroll&&t||e[n]("refresh"),this.oldScroll=t,s&&(i||a.reverse(),e.each(a,function(e,t){(t.options.continuous||e===s-1)&&o(t,[i?"down":"up"])}))},this)}),e(t).bind("scroll.waypoints",e.proxy(function(){this.didScroll||(this.didScroll=!0,i.setTimeout(e.proxy(function(){this.doScroll(),this.didScroll=!1},this),e[n].settings.scrollThrottle))},this)).bind("resize.waypoints",e.proxy(function(){this.didResize||(this.didResize=!0,i.setTimeout(e.proxy(function(){e[n]("refresh"),this.didResize=!1},this),e[n].settings.resizeThrottle))},this)),r.load(e.proxy(function(){this.doScroll()},this))},u=function(t){var n=null;return e.each(l,function(e,i){return i.element[0]===t?(n=i,!1):void 0}),n},h={init:function(i,r){return this.each(function(){var o,h=e.fn[t].defaults.context,d=e(this);r&&r.context&&(h=r.context),e.isWindow(h)||(h=d.closest(h)[0]),o=u(h),o||(o=new c(h),l.push(o));var p=s(d,o),f=0>p?e.fn[t].defaults:o.waypoints[p].options,m=e.extend({},f,r);m.offset="bottom-in-view"===m.offset?function(){var t=e.isWindow(h)?e[n]("viewportHeight"):e(h).height();return t-e(this).outerHeight()}:m.offset,0>p?o.waypoints.push({element:d,offset:null,options:m}):o.waypoints[p].options=m,i&&d.bind(a,i),r&&r.handler&&d.bind(a,r.handler)}),e[n]("refresh"),this},remove:function(){return this.each(function(t,n){var i=e(n);e.each(l,function(e,t){var n=s(i,t);n>=0&&(t.waypoints.splice(n,1),t.waypoints.length||(t.element.unbind("scroll.waypoints resize.waypoints"),l.splice(e,1)))})})},destroy:function(){return this.unbind(a)[t]("remove")}},d={refresh:function(){e.each(l,function(t,i){var r=e.isWindow(i.element[0]),a=r?0:i.element.offset().top,s=r?e[n]("viewportHeight"):i.element.height(),l=r?0:i.element.scrollTop();e.each(i.waypoints,function(e,t){if(t){var n=t.options.offset,r=t.offset;if("function"==typeof t.options.offset)n=t.options.offset.apply(t.element);else if("string"==typeof t.options.offset){var c=parseFloat(t.options.offset);n=t.options.offset.indexOf("%")?Math.ceil(s*(c/100)):c}t.offset=t.element.offset().top-a+l-n,t.options.onlyOnScroll||(null!==r&&i.oldScroll>r&&i.oldScroll<=t.offset?o(t,["up"]):null!==r&&i.oldScroll<r&&i.oldScroll>=t.offset?o(t,["down"]):!r&&i.element.scrollTop()>t.offset&&o(t,["down"]))}}),i.waypoints.sort(function(e,t){return e.offset-t.offset})})},viewportHeight:function(){return i.innerHeight?i.innerHeight:r.height()},aggregate:function(){var t=e();return e.each(l,function(n,i){e.each(i.waypoints,function(e,n){t=t.add(n.element)})}),t}};e.fn[t]=function(n){return h[n]?h[n].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof n&&n?"object"==typeof n?h.init.apply(this,[null,n]):(e.error("Method "+n+" does not exist on jQuery "+t),void 0):h.init.apply(this,arguments)},e.fn[t].defaults={continuous:!0,offset:0,triggerOnce:!1,context:i},e[n]=function(e){return d[e]?d[e].apply(this):d.aggregate()},e[n].settings={resizeThrottle:200,scrollThrottle:100},r.load(function(){e[n]("refresh")})}(jQuery,"waypoint","waypoints",window),function(e){e(function(){e("select#contact_country").ready(handleContactRegion),e("select#contact_country").livequery("change",handleContactRegion)})}(jQuery),$(document).delegate("#account_history_wrapper form[data-pjax]","submit",function(e){var t=$(this).closest("[data-pjax-container]");$.pjax.submit(e,{container:t,cache:!0})}),function(e){function t(){return e(".export-happening").length>0}function n(){setTimeout(i,a())}function i(){e.getJSON(o(),r)}function r(e){e&&e.exporting===!0?n():window.location.href=s()}function a(){return t()?e(".export-happening").data("poll-interval"):void 0}function o(){return t()?e(".export-happening").data("check-path"):void 0}function s(){return t()?e(".export-happening").data("finished-path"):void 0}e(document).ready(function(){t()===!0&&n()})}(jQuery),Fa=Fa||{},Fa.joinWords=function(e,t,n){if(void 0==n&&(n=t),0==e.length)return"";var i=e.slice(0,-1),r=e[e.length-1];return 0==i.length?r:[i.join(t),r].join(n)},function(e){e(document).ready(function(){var t="#invoice_currency",n=function(){e("#gocardless_checkbox_error").text("")},i=function(){e("#gocardless_checkbox_error").text("(Pound Sterling only)")};e("#payment_methods_gocardless").enableOnDropdown("GBP",t,!0,n,i);var r=function(){e("#dwolla_checkbox_error").text("")},a=function(){e("#dwolla_checkbox_error").text("(US Dollar only)")};e("#payment_methods_dwolla").enableOnDropdown("USD",t,!0,r,a);var o=function(n){var i=e(t+' option[value="'+n+'"]:first');return i.length?i.text():n},s=function(t){var n=e.parseJSON(e(this).attr("data-currencies"));return-1!=e.inArray(t,n)},l=function(){e("#stripe_checkbox_error").text("")},c=function(){var t=e.parseJSON(e(this).attr("data-currencies"));t=e.map(t,o);var n=Fa.joinWords(t,", "," or ");e("#stripe_checkbox_error").text("("+n+" only)")};e("#payment_methods_stripe").enableOnDropdown(s,t,!0,l,c)})}(jQuery);var Fa=Fa||{};Fa.BankStatementUpload=function(e){"use strict";var t,n,i,r=0,a=function(){t=e("div.step-bg.working"),n=e("div.step-bg.success"),i=e("div.step.review")},o=function(){t.find("#UploadStatmentFieldset").addClass("processing"),t.find("#step2-upload").hide(),t.find("#step2-processing").show()},s=function(){t.find("#step2-processing").hide(),t.find("#step2-longer").show()},l=function(e){e.success_message.length&&n.find("#upload_success_message").text(e.success_message),t.hide(),n.show(),i.find("div#step3-review-transactions").show(),i.find("fieldset").addClass("blockf"),m()},c=function(){t.find("#UploadStatmentFieldset").removeClass("processing"),t.find("#step2-processing").hide(),t.find("#step2-longer").hide(),t.find("#step2-upload").show(),t.find("#step2-upload-no-error").hide()},u=function(e,n){c(),t.find("#step2-upload #"+e).show(),n&&t.find("#step2-upload #statement-upload-error-details span").text(n),t.find("#upload_statement_form").show(),m()},h=function(){c(),e("#statement-upload-import-other-error").show()},d=null,p=0,f=function(e){switch(e.status){case"completed":case"completed_viewed":clearTimeout(d),l(e);break;case"error":case"error_viewed":clearTimeout(d),u(e.error_template_id,e.error_message);break;case"running":case"pending":d=setTimeout(g,3500),2===p&&s(),p++}},m=function(){return r?(e.ajax({url:"/bank_accounts/mark_as_viewed",type:"POST",data:{import_id:r},dataType:"json"}),void 0):!1},g=function(){return r?(e.ajax({url:"/bank_accounts/check_import",type:"GET",data:{import_id:r},dataType:"json",success:function(e){f(e.importStatus)},error:function(){h()}}),void 0):!1},v=function(t,n){e(document).ready(function(){if(r=t,a(),n)u(n);else switch(r){case 0:break;default:o(),g()}})};return{initialize:v}}(jQuery),$(function(){var e="input[data-sales_tax_role=date]",t=$("#sales-tax-form-elements"),n=$("select[data-multi_currency_role=currency]"),i=function(){$.ajax($("#sales-tax-form-elements").data("sales-tax-url"),{data:{date:Date.parseDate($(e).val(),$(e).data("date-format")),currency:n.val(),old_date:Date.parseDate($("#current_sales_tax_date").data("sales-tax-date"),"%y-%m-%d")},success:function(e){"success"==e.status&&(t.html(e.html.sales_tax_rates),t.find(".sales_tax select").change())}})},r=function(){$.ajax($("#category-elements").data("category-url"),{data:{date:Date.parseDate($(e).val(),$(e).data("date-format")),old_date:Date.parseDate($("#current_sales_tax_date").data("sales-tax-date"),"%y-%m-%d"),nominal_code:a()},success:function(e){"success"==e.status&&$("#category-elements").html(e.html.form_category)}})},a=function(){return $("#spending_category").is(":visible")?$("#spending_category").val():$("#income_category").val()};$("form").on("change",e,i),$("form").on("change",e,r)}),function(e){var t=function(e,t){this.selector=e,this.errors=[],this.handlers=[],this.handlers.push(t),this.check=function(){for(this.errors=[],i=0;i<this.handlers.length;i++)this.handlers[i].apply(this);this.errors.length>0?this.errorHandler():(this.reset(),this.errors=[])},this.valid=function(){return this.check(),0==this.errors.length},this.errorHandler=function(){var e=this.errors.join(", ");this.addErrorMessage(e)},this.reset=function(){this.selector.hasClass("input_error")&&(this.selector.removeClass("input_error"),this.removeErrorMessage())},this.removeErrorMessage=function(){this.selector.parent().find("span.error-change").remove()},this.addErrorMessage=function(e){this.removeErrorMessage(),this.selector.addClass("input_error"),this.selector.after('<span class="errormessage error-change">'+e+"</span>")}},n=function(n){var i=this;this.form=n,this.rules=[],this.addRule=function(n,r){this.form.find(n).each(function(){var n=i.findRule(e(this));null==n?i.rules.push(new t(e(this),r)):n.handlers.push(r)})},this.findRule=function(t){var n=null;return e.each(this.rules,function(e,i){return i.selector[0]==t[0]?(n=i,void 0):void 0}),n},this.validate=function(){var t=!0;return e.each(this.rules,function(e,n){t*=n.valid()}),t},this.findValidFields=function(){return this.form.find(":not(.input_error)")},this.saveForm=function(t){e(t).parents(".section_grouping, .hmrc_form_section ul").not(".section_grouping ul").addClass("saving");var n=this.findValidFields().serialize()+"&field_id="+e(t).attr("id");e.ajax({url:this.form.attr("action"),type:"PUT",dataType:"script",data:n,statusCode:{204:function(){e(t).parents().removeClass("saving")}}})};var r=0;this.validateAndSave=function(e,t){r&&window.clearTimeout(r),r=window.setTimeout(function(){i.validate(),i.saveForm(e.target)},t)},this.form.unbind("change keyup"),this.form.delegate("input, select[data-autosave=true], textarea","change",function(e){return i.validateAndSave(e,0),!0}),this.form.delegate("textarea","keyup",function(e){return i.validateAndSave(e,2e3),!0}),this.form.delegate("select[data-autosave=false]","change",function(){var t="sa_return[bank_account_id]="+e(this).val()+"&field_id="+e(this).attr("id");e.ajax({url:e(this.form).attr("action"),type:"PUT",dataType:"script",data:t})}),this.onError=function(){var t=e("span.errormessage:first").parents("li").offset().top;e("html, body").animate({scrollTop:t},"slow")}};e.fn.validate=function(){var t=this,i=!0;return t.each(function(){validator=new n(e(this)),validator.addRule("input[data-validation-type], textarea[data-validation-type]",function(){var e=this.selector.data("validation-type"),t=this.selector.val();if("boolean"==e)""!=t&&"true"!=t&&"false"!=t&&this.errors.push("Please choose an option");else if("decimal"==e){var n=/^-?\d*[0-9](|.\d*[0-9]|,\d*[0-9])?$/;""==t||n.test(t)||this.errors.push("Please enter numbers only")}else if("integer"==e)""!=t&&0!=t%1&&this.errors.push("Please enter whole numbers only");else if("date"==e){var i=/^(0[1-9]|[12][0-9]|3[01])[\s](0[1-9]|1[012])[\s](19|20)\d\d$/;""==t||i.test(t)||this.errors.push("Enter a valid date as DD MM YYYY")}}),validator.addRule("input[data-validation-minimum-inclusive], input[data-validation-minimum-exclusive], input[data-validation-maximum-inclusive], input[data-validation-maximum-exclusive], textarea[data-validation-minimum-inclusive], textarea[data-validation-minimum-exclusive], textarea[data-validation-maximum-inclusive], textarea[data-validation-maximum-exclusive]",function(){var e=parseFloat(this.selector.data("validation-minimum-inclusive")),t=parseFloat(this.selector.data("validation-minimum-exclusive")),n=parseFloat(this.selector.data("validation-maximum-inclusive")),i=parseFloat(this.selector.data("validation-maximum-exclusive")),r=parseFloat(this.selector.val());if(!(isNaN(t)||isNaN(r)||r>t)){var a="Enter a value that is greater than "+t;0==r&&(a+=" Just leave this field blank if it isn’t relevant to you."),this.errors.push(a)}isNaN(e)||isNaN(r)||r>=e||this.errors.push("Enter a value that is greater than or equal to "+e),isNaN(i)||isNaN(r)||i>r||this.errors.push("Enter a value that is less than "+i),isNaN(n)||isNaN(r)||n>=r||this.errors.push("Enter a value that is less than or equal to "+n)}),validator.addRule("input[data-validation-maximum-length], textarea[data-validation-maximum-length]",function(){var e=this.selector.data("validation-maximum-length"),t=this.selector.val();if(""!=t&&!(t.length<=e)){var n="Must be fewer than "+e+" characters.";this.errors.push(n)}}),validator.addRule("input[data-validation-format], textarea[data-validation-format]",function(){var e=this.selector.data("validation-format"),t=this.selector.val();if(""!=t&&!t.match(e)){var n="Doesn't match the correct format";this.errors.push(n)}}),validator.addRule("input[data-require], textarea[data-require]",function(){requisite=validator.findRule(e(this.selector.data("require"))),(!requisite.valid()||""==requisite.selector.val()&&this.selector.val().length>0)&&this.errors.push(this.selector.data("message"))}),validator.addRule("input[data-validation-sum-not-more-than]",function(){var t=Fa.SelfAssessmentForm.asFloat(e(this.selector.data("validation-sum-not-more-than"))),n=Fa.SelfAssessmentForm.asFloat(this.selector),i=Fa.SelfAssessmentForm.asFloat(e(this.selector.data("validation-other-addend")));n+i>t&&this.errors.push(this.selector.data("validation-message"))}),validator.addRule("input[data-validation-not-more-than]",function(){var t=Fa.SelfAssessmentForm.asFloat(e(this.selector.data("validation-not-more-than"))),n=Fa.SelfAssessmentForm.asFloat(this.selector);n>t&&this.errors.push(this.selector.data("validation-message"))}),i*=validator.validate()}),i}}(jQuery);var Fa=Fa||{};Fa.SelfAssessmentForm=function(e){return this.activateButton=function(e){val="Yes"==e.html()?!0:!1,e.parent().find("input[type='hidden']").val(val).trigger("change"),e.parent().find("a").removeClass("active"),e.addClass("active")},this.optionButton=function(t){e(t).each(function(){var t=e(this);t.click(function(e){return t.parent().hasClass("locked")||activateButton(t),e.preventDefault(),!1})})},this.hideSavingIndicators=function(){setTimeout(function(){e(".hmrc_form_section ul.saving, .hmrc_form_section .section_grouping.saving").removeClass("saving")},600)},this.updateMetaNavStatuses=function(e){var t="in_progress";for(removeMetaNavStatus(t),i=0;i<e.length;i++)addMetaNavStatus(e[i],t)},this.removeMetaNavStatus=function(t){var n=e("#meta .list_nav ."+t);n.removeClass(t)},this.addMetaNavStatus=function(t,n){var i=e("#meta .list_nav ."+t);i.addClass(n)},this.updateStatus=function(t){var n=t.pageId,r=t.fields,a=t.updatedFieldIds,o=t.sections,s=t.page_status,l=e("#"+n),c=t.incompletePages;for(removeErrorMessages(l,a),e(".input_required").removeClass("input_required"),l.find("span.task_status").removeClass("task_incomplete").html(""),i=0;i<r.length;i++){var u="#"+r[i]+" span.task_status";l.find(u).html("Incomplete"),l.find(u).addClass("task_incomplete");var h=l.find("input[id*="+r[i]+"][type!='hidden']");markAsRequired(h)}for(i=0;i<o.length;i++){var d="#"+o[i]+"_included span.task_status";l.find(d).html("Incomplete"),l.find(d).addClass("task_incomplete")}updatePageStatus(n,s),updateMetaNavStatuses(c)},this.updatePageStatus=function(t,n){var i=e("#"+t+" .page_status_container");i.html(n)},this.highlightInvalidFields=function(t,n,r){if(1==r){var a=e("#"+t);for(i=0;i<n.length;i++){var o=a.find("#"+n[i].field_id);o.addClass("input_error"),o.parent().append('<span class="errormessage error-change">'+n[i].message+"</span>")}}},this.markAsRequired=function(t){var n=e(t);n.addClass("input_required"),"Required"!=n.parent().find("span.error-change").html()&&n.after('<span class="errormessage error-change">Required</span>')},this.removeErrorMessages=function(e,t){for(var n=0;n<t.length;n++)removeErrorMessage(e,t[n])},this.removeErrorMessage=function(e,t){var n=e.find(".hmrc_data "+buildFieldSelector(t)),i=n.parent(),r=i.find("span.errormessage");r.remove()},this.buildFieldSelector=function(e){return"#"+e},this.asFloat=function(e){var t=e.is("input")?e.val():e.text();return t=t.replace(/[^\d.-]/g,""),t?parseFloat(t):0},this.optionalSections=function(){e(".hmrc_section.optional").each(function(){var t=e(this),n=t.find(".section_question .option_buttons");shouldLockSection(n)?n.addClass("locked"):n.removeClass("locked");var i=n.find("a");i.unbind("click.optionalSections"),i.bind("click.optionalSections",function(i){if(!shouldLockSection(n)){var r=e(this);r.hasClass("yes")?t.removeClass("inactive",sectionTransitionMillis):r.hasClass("no")&&t.addClass("inactive",sectionTransitionMillis),activateButton(r)}return i.preventDefault(),!1})})},this.shouldLockSection=function(t){if("true"==t.attr("data-read-only"))return!0;if(t.attr("data-lock-if-nonzero")){var n=t.data("lock-if-nonzero").split(",");for(i=0;i<n.length;i++)if(asFloat(e("#"+n[i]))>0)return!0;return!1}},this.sectionTransitionMillis=300,this.overriddenFields=function(){e(".hmrc_data.overrideable, .hmrc_data.override").each(function(){var t=e(this);t.find("a").mousedown(function(e){var n=t.find("input");return n.length&&(n.val(""),n.trigger("change")),t.siblings().removeClass("inactive"),t.addClass("inactive"),e.stopPropagation(),!1})})},this.pageQuestionToggle=function(t){var n=e(t).find(".option_buttons");e(n).find("a").click(function(t){if(!n.hasClass("locked")){var i=e(this);e.ajax({url:i.attr("href"),type:"PUT",data:{reference:i.data("reference"),"sa_return[answer]":i.data("value"),field_id:i.data("field-id")},dataType:"script"}),activateButton(i)}return t.preventDefault(),!1})},this.refreshValues=function(t,n){for(i=0;i<t.length;i++){var r=t[i],a=e("#"+n+" #"+r.reference);a.is("span")?a.html(r.value):a.is("input")&&a.val(r.value)}},this}(jQuery),$(document).ready(function(){$(document).delegate("input#add_employment","click",function(e){var t=$("#add_emp5_employers_name").val(),n=$(this).closest("form");return""==t?alert("Please enter a valid employer name"):$.post(n.attr("action"),n.serialize(),"script"),e.stopPropagation(),!1}),$(document).delegate(".prev_next_nav a","click",function(e){var t=$("form.edit_self_assessment_return").validate();if(1==t)$.pjax({url:$(this).attr("href"),container:"#main",cache:!0,timeout:2e3});else{var n=$("span.errormessage:first").parents("li").offset().top;$("html, body").animate({scrollTop:n},"slow")}return e.stopPropagation(),!1})}),$(document).bind("ready pjax:complete sa:init",function(){Fa.SelfAssessmentForm.optionButton(".hmrc_data .option_button"),Fa.SelfAssessmentForm.optionalSections(),Fa.SelfAssessmentForm.overriddenFields(),Fa.SelfAssessmentForm.pageQuestionToggle(".notice_question"),$("form.edit_self_assessment_return").validate(),$("#meta.fixed_meta").fixedMeta()}),function(){"use strict";function e(e,t){e.classList?e.classList.add(t):e.className+=" "+t}"undefined"==typeof window.Fa&&(window.Fa={}),Fa.svg={browserSupport:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,applyShim:function(){return Fa.svg.browserSupport?(document.addEventListener("DOMContentLoaded",Fa.svg.setBodyClass,!1),void 0):(window.addEventListener?(document.addEventListener("DOMContentLoaded",Fa.svg.changePaths,!1),document.addEventListener("DOMContentLoaded",Fa.svg.setBodyClass,!1),document.addEventListener("pjax:complete",Fa.svg.changePaths,!1)):window.attachEvent&&(document.attachEvent("onreadystatechange",Fa.svg.setBodyClass),document.attachEvent("onreadystatechange",Fa.svg.changePaths),document.attachEvent("pjax:complete",Fa.svg.changePaths)),void 0)},changePath:function(e){var t=/(.svg)(\?\w*)?$/,n=e.getAttribute("src");if(n.match(t)){var i=e.getAttribute("data-png-fallback")||n.replace(/(.*)(.svg)(\?\w*)?/,"$1.png$3");e.setAttribute("src",i)}},changePaths:function(){var e,t=document.querySelectorAll("img");for(e=0;e<t.length;e++)Fa.svg.changePath(t[e])},setBodyClass:function(){Fa.svg.browserSupport?e(document.body,"svg"):e(document.body,"no_svg")}},Fa.svg.applyShim()}(),Fa.ViewUpdater=function(e,t){this.update=function(n){for(var i in e)e.hasOwnProperty(i)&&$("#"+i,t).html(e[i]);return"function"==typeof n&&n(),this}},Fa.Timers=function(e,t){this.timers=$(e,t);var n=200,i=".display",r="timeout",a={};this.start=function(){this.timers.each(function(e){var t=$(this),n=$(i,t),a=new Date,s=t.data(r),l=a.getTime()+s;o(n,l,e)})};var o=function(e,t,n){var i,r=new Date,a=Math.floor((t-r.getTime())/1e3);a>=0&&(e.html(a),i=function(){o(e,t,n)}),s(i,n)},s=function(e,t){void 0===e?delete a[t]:(clearTimeout(a[t]),a[t]=setTimeout(e,n))}},Fa.Modal={modalID:"modal",defaults:{width:600,autoOpen:!1,modal:!0,resizable:!1},openWith:function(e){void 0!==e.title&&this.setTitle(e.title),void 0!==e.content&&this.setContent(e.content),void 0!==e.options&&this.setOptions(e.options),this.open()},setTitle:function(e){this.setOptions({title:e})},setContent:function(e){this.getModal().html(e)},setOptions:function(e){for(var t in e)e.hasOwnProperty(t)&&this.getModal().dialog("option",t,e[t])},open:function(){this.getModal().dialog("open")},getModal:function(){if(void 0===this.modal){var e=$("#"+this.modalID);this.modal=0===e.length?this.createModal():e}return this.modal},createModal:function(){return this.buildModal().dialog(this.defaults)},buildModal:function(){return $("<div>").attr("id",this.modalID).appendTo("body")}},Fa.PopupWindow={url:"",title:"",width:600,height:400,open:function(e){void 0!==e.url&&this.setUrl(e.url),void 0!==e.title&&this.setTitle(e.title),void 0!==e.width&&this.setWidth(e.width),void 0!==e.height&&this.setHeight(e.height);var t=this.getDimensions(),n=this.getPosition(),i=window.open(this.url,this.title,"scrollbars=yes, width="+t.width+", height="+t.height+", top="+n.top+", left="+n.left);window.focus&&i.focus()},setUrl:function(e){this.url=e},setTitle:function(e){this.title=e},setWidth:function(e){this.width=e},setHeight:function(e){this.height=e},getDimensions:function(){return{width:this.width,height:this.height}},getPosition:function(){var e=void 0!=window.screenLeft?window.screenLeft:screen.left,t=void 0!=window.screenTop?window.screenTop:screen.top;clientWidth=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,clientHeight=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var n=clientWidth/2-this.width/2+e,i=clientHeight/2-this.height/2+t;return{left:n,top:i}}},function(e){e(function(){var t={contextSelector:"div#mfa_container",listen:function(){e(this.contextSelector).livequery(function(){t.setContext(),t.start()})},cancel:function(){e.ajax({url:t.context.data("closeUrl"),type:"post"})},setContext:function(){this.context=e(this.contextSelector)},start:function(){var e=new this.ResponseHandler;e.start()},request:function(e,t,n){var i=new this.ResponseHandler;i.submit(e,t,n)},ResponseHandler:function(){this.container=t.context,this.startUrl=this.container.data("startUrl"),this.nextUrl=this.container.data("nextUrl"),this.completedUrl=this.container.data("completedUrl"),this.start=function(){var t=this;e.ajax({url:t.startUrl,type:"post",success:function(e){t.handle(e)}})},this.next=function(){var t=this;e.ajax({url:t.nextUrl,success:function(e){t.handle(e)}})},this.submit=function(t,n,i){var r=this;e.ajax({url:t,type:n,data:i,success:function(e){r.handle(e)}})},this.handle=function(e){var t=this,i={next_step:function(e){n(e.html)},waiting:function(e){n(e.html),setTimeout(function(){t.next()},5e3)},errors:function(e){n(e.html)},done:function(){document.location=t.completedUrl}};i[e.status](e)};var n=function(e){var n=new Fa.ViewUpdater(e,this.container);n.update(function(){t.ajaxifyForms("form",this.container),new Fa.Timers(".timeout",this.container).start()})}},ajaxifyForms:function(n,i){var r="Submitting...";e(n,i).each(function(){var n=e(this);n.bind("submit",function(){return e("input[type=submit]",n).attr({value:r,disabled:"disabled"}),t.request(n.attr("action"),n.attr("method"),n.serialize()),!1})})}},n={buttonSelector:".bank_feed_transaction_importer",listen:function(){e(this.buttonSelector).live("click",n.handleBankFeedImportRequest)},handleBankFeedImportRequest:function(t){t.preventDefault();var i=e(this),r=i.attr("href");e.ajax({url:r,type:"post",success:n.handleBankFeedImportResponse})},handleBankFeedImportResponse:function(e){var t={mfa:n.handleBankFeedMFAResponse};t[e.status](e)},handleBankFeedMFAResponse:function(e){Fa.Modal.openWith({title:"Import new transactions",content:e.html.mfa_import,options:{position:{my:"top",at:"top",of:"#contents"},beforeClose:t.cancel}})}};t.listen(),n.listen()})}(jQuery),// copyright chris wanstrath
function(e){function t(t,i,r){var a=this;return this.bind("click.pjax",t,function(t){var o=e.extend({},d(i,r));o.container||(o.container=e(this).attr("data-pjax")||a),n(t,o)})}function n(t,n,i){i=d(n,i);var a=t.currentTarget;if("A"!==a.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||location.protocol!==a.protocol||location.host!==a.host||a.hash&&a.href.replace(a.hash,"")===location.href.replace(location.hash,"")||a.href===location.href+"#")){var o={url:a.href,container:e(a).attr("data-pjax"),target:a,fragment:null};r(e.extend({},o,i)),t.preventDefault()}}function i(t,n,i){i=d(n,i);var a=t.currentTarget;if("FORM"!==a.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var o={type:a.method.toUpperCase(),url:a.action,data:e(a).serializeArray(),container:e(a).attr("data-pjax"),target:a,fragment:null};r(e.extend({},o,i)),t.preventDefault()}function r(t){function n(t,n){var r=e.Event(t,{relatedTarget:i});return s.trigger(r,n),!r.isDefaultPrevented()}t=e.extend(!0,{},e.ajaxSettings,r.defaults,t),e.isFunction(t.url)&&(t.url=t.url());var i=t.target,a=h(t.url).hash,s=t.context=p(t.container);t.data||(t.data={}),t.data._pjax=s.selector;var l;t.beforeSend=function(e,i){return"GET"!==i.type&&(i.timeout=0),e.setRequestHeader("X-PJAX","true"),e.setRequestHeader("X-PJAX-Container",s.selector),n("pjax:beforeSend",[e,i])?(i.timeout>0&&(l=setTimeout(function(){n("pjax:timeout",[e,t])&&e.abort("timeout")},i.timeout),i.timeout=0),t.requestUrl=h(i.url).href,void 0):!1},t.complete=function(e,i){l&&clearTimeout(l),n("pjax:complete",[e,i,t]),n("pjax:end",[e,t])},t.error=function(e,i,r){var a=g("",e,t),s=n("pjax:error",[e,i,r,t]);"GET"==t.type&&"abort"!==i&&s&&o(a.url)},t.success=function(i,l,u){var d="function"==typeof e.pjax.defaults.version?e.pjax.defaults.version():e.pjax.defaults.version,p=u.getResponseHeader("X-PJAX-Version"),f=g(i,u,t);if(d&&p&&d!==p)return o(f.url),void 0;if(!f.contents)return o(f.url),void 0;if(r.state={id:t.id||c(),url:f.url,title:f.title,container:s.selector,fragment:t.fragment,timeout:t.timeout},(t.push||t.replace)&&window.history.replaceState(r.state,f.title,f.url),f.title&&(document.title=f.title),s.html(f.contents),"number"==typeof t.scrollTo&&e(window).scrollTop(t.scrollTo),(t.replace||t.push)&&window._gaq&&_gaq.push(["_trackPageview"]),""!==a){var m=h(f.url);m.hash=a,r.state.url=m.href,window.history.replaceState(r.state,f.title,m.href);var v=e(m.hash);v.length&&e(window).scrollTop(v.offset().top)}n("pjax:success",[i,l,u,t])},r.state||(r.state={id:c(),url:window.location.href,title:document.title,container:s.selector,fragment:t.fragment,timeout:t.timeout},window.history.replaceState(r.state,document.title));var d=r.xhr;d&&d.readyState<4&&(d.onreadystatechange=e.noop,d.abort()),r.options=t;var d=r.xhr=e.ajax(t);return d.readyState>0&&(t.push&&!t.replace&&(v(r.state.id,s.clone().contents()),window.history.pushState(null,"",u(t.requestUrl))),n("pjax:start",[d,t]),n("pjax:send",[d,t])),r.xhr}function a(t,n){var i={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return r(e.extend(i,d(t,n)))}function o(e){window.history.replaceState(null,"","#"),window.location.replace(e)}function s(t){var n=t.state;if(n&&n.container){var i=e(n.container);if(i.length){var a=x[n.id];if(!r.state)return r.state=n,void 0;var s=r.state.id<n.id?"forward":"back";y(s,r.state.id,i.clone().contents());var l=e.Event("pjax:popstate",{state:n,direction:s});i.trigger(l);var c={id:n.id,url:n.url,container:i,push:!1,fragment:n.fragment,timeout:n.timeout,scrollTo:!1};a?(i.trigger("pjax:start",[null,c]),n.title&&(document.title=n.title),i.html(a),r.state=n,i.trigger("pjax:end",[null,c])):r(c),i[0].offsetHeight}else o(location.href)}}function l(t){var n=e.isFunction(t.url)?t.url():t.url,i=t.type?t.type.toUpperCase():"GET",r=e("<form>",{method:"GET"===i?"GET":"POST",action:n,style:"display:none"});"GET"!==i&&"POST"!==i&&r.append(e("<input>",{type:"hidden",name:"_method",value:i.toLowerCase()}));var a=t.data;if("string"==typeof a)e.each(a.split("&"),function(t,n){var i=n.split("=");r.append(e("<input>",{type:"hidden",name:i[0],value:i[1]}))});else if("object"==typeof a)for(key in a)r.append(e("<input>",{type:"hidden",name:key,value:a[key]}));e(document.body).append(r),r.submit()}function c(){return(new Date).getTime()}function u(e){return e.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function h(e){var t=document.createElement("a");return t.href=e,t}function d(t,n){return t&&n?n.container=t:n=e.isPlainObject(t)?t:{container:t},n.container&&(n.container=p(n.container)),n}function p(t){if(t=e(t),t.length){if(""!==t.selector&&t.context===document)return t;if(t.attr("id"))return e("#"+t.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+t.selector}function f(e,t){return e.filter(t).add(e.find(t))}function m(t){return e.parseHTML(t,document,!0)}function g(t,n,i){var r={};if(r.url=u(n.getResponseHeader("X-PJAX-URL")||i.requestUrl),/<html/i.test(t))var a=e(m(t.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),o=e(m(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var a=o=e(m(t));if(0===o.length)return r;if(r.title=f(a,"title").last().text(),i.fragment){if("body"===i.fragment)var s=o;else var s=f(o,i.fragment).first();s.length&&(r.contents=s.contents(),r.title||(r.title=s.attr("title")||s.data("title")))}else/<html/i.test(t)||(r.contents=o);return r.contents&&(r.contents=r.contents.not("title"),r.contents.find("title").remove()),r.title&&(r.title=e.trim(r.title)),r}function v(e,t){for(x[e]=t,k.push(e);C.length;)delete x[C.shift()];for(;k.length>r.defaults.maxCacheLength;)delete x[k.shift()]}function y(e,t,n){var i,r;x[t]=n,"forward"===e?(i=k,r=C):(i=C,r=k),i.push(t),(t=r.pop())&&delete x[t]}function b(){return e("meta").filter(function(){var t=e(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()}).attr("content")}function _(){e.fn.pjax=t,e.pjax=r,e.pjax.enable=e.noop,e.pjax.disable=w,e.pjax.click=n,e.pjax.submit=i,e.pjax.reload=a,e.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:b},e(window).bind("popstate.pjax",s)}function w(){e.fn.pjax=function(){return this},e.pjax=l,e.pjax.enable=_,e.pjax.disable=e.noop,e.pjax.click=e.noop,e.pjax.submit=e.noop,e.pjax.reload=function(){window.location.reload()},e(window).unbind("popstate.pjax",s)}e.parseHTML=function(e,t,n){var i,r=/^<(\w+)\s*\/?>(?:<\/\1>|)$/;return e&&"string"==typeof e?("boolean"==typeof t&&(n=t,t=0),t=t||document,(i=r.exec(e))?[t.createElement(i[1])]:(i=jQuery.buildFragment([e],t,n?null:[]),jQuery.merge([],(i.cacheable?jQuery.clone(i.fragment):i.fragment).childNodes))):null};var x={},C=[],k=[];e.inArray("state",e.event.props)<0&&e.event.props.push("state"),e.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),e.support.pjax?_():w()}(jQuery),/*!
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
// Copyright (c) 2010 "Cowboy" Ben Alman,
function(e,t){"$:nomunge";var n,i=e.jQuery||e.Cowboy||(e.Cowboy={});i.throttle=n=function(e,n,r,a){function o(){function i(){l=+new Date,r.apply(c,h)}function o(){s=t}var c=this,u=+new Date-l,h=arguments;a&&!s&&i(),s&&clearTimeout(s),a===t&&u>e?i():n!==!0&&(s=setTimeout(a?o:i,a===t?e-u:e))}var s,l=0;return"boolean"!=typeof n&&(a=r,r=n,n=t),i.guid&&(o.guid=r.guid=r.guid||i.guid++),o},i.debounce=function(e,i,r){return r===t?n(e,i,!1):n(e,r,i!==!1)}}(this),function(e){var t=8,n=9,i=13,r=27,a=38,o=40,s=function(t,n){var i=this;this.options=n,this.$element=e(t),this.$textField=this.$element.find("[data-autocomplete-text-field]"),this.$displayField=this.$element.find("[data-autocomplete-display-field]"),this.$hiddenField=this.$element.find("[data-autocomplete-hidden-field]"),this.$toggle=this.$element.find("[data-autocomplete-toggle]"),this.$searchResults=this.$element.find(".search_results").hide(),this.required=this.$element.data("required"),this.disabled=!1,this.resultsLoaded=!1,this.resultsShown=!1,n.delay&&(this.textTyped=e.debounce(n.delay,this.textTyped)),this.$element.delegate(".ui-menu-item.result","mousedown",e.proxy(this.menuItemClicked,this)),this.$element.delegate("[data-autocomplete-text-field]","keyup",e.proxy(this.keyUpHandler,this)),this.$element.delegate("[data-autocomplete-text-field]","keydown",e.proxy(this.keyDownHandler,this)),this.$element.delegate(".ui-menu-item","mouseenter",e.proxy(this.onMenuItemHover,this)),this.$element.delegate("[data-autocomplete-toggle]","mousedown",e.proxy(this.toggleClicked,this)),this.$textField.bind("blur",e.proxy(this.onBlur,this)),this.$textField.bind("focus",e.proxy(this.onFocus,this)),this.$searchResults.on("scroll",e.proxy(this.onScroll,this)),e(document).on("click","body",function(t){e.contains(i.$element[0],t.target)||e.proxy(i.onClickedOutside,i)()}),this.required&&this.$textField.bind("change",e.proxy(this.onChange,this))};s.DEFAULTS={delay:300},s.prototype.select=function(e){var t=this.$element.find(".result")[e];this.selectResult(t)},s.prototype.selectMenuItem=function(t){var n=e(t);if(n.length)if(n.data("value")){this.selectResult(n);var i=this.$textField;setTimeout(function(){i.focus()},50),this.$textField.is("textarea")&&this.$textField.trigger("paste")}else n.find("a[data-remote]").length&&n.find("a").click();else this.val(""),this.$element.trigger("autocomplete.change")},s.prototype.selectResult=function(t){var n=e(t),i=n.data("value")||"",r=parseInt(this.val()),a=e.trim(n.text().replace(/(\s|\n)+/g," "));this.$displayField.text(a),this.$textField.val(a),i!=r&&(this.val(i),this.$element.trigger("autocomplete.change")),i&&this.required&&this.$element.removeClass("error"),setTimeout(e.proxy(this.hideResults,this),50)},s.prototype.disable=function(){this.disabled=!0,this.$element.removeClass("error"),this.$element.addClass("disabled"),this.$textField.attr("disabled","disabled")},s.prototype.enable=function(){this.disabled=!1,this.$element.removeClass("disabled"),this.$textField.removeAttr("disabled")},s.prototype.highlightFirstMenuItem=function(){var e=this.$searchResults.find("[role=menuitem]").first();this.highlightMenuItem(e)},s.prototype.highlightMenuItem=function(t){var n=e(t);this.highlightedElm().removeClass("highlight"),n.addClass("highlight")},s.prototype.showResults=function(){this.positionSearchResults(),this.$searchResults.show(),this.$element.addClass("show_results"),this.resultsShown=!0},s.prototype.hideResults=function(){this.$searchResults.hide(),this.$element.removeClass("show_results"),this.resultsShown=!1},s.prototype.searchUrl=function(e){this.$element.data("timetracking-autocomplete",e),this.$element.attr("data-timetracking-autocomplete",e)},s.prototype.search=function(t,n){var i=this.queryUrl(t),r=this,a=n;e.ajax(i,{dataType:"script",complete:function(e,t){"function"==typeof a&&a.apply(r,[e,t]),r.resizeResults(r),r.highlightFirstMenuItem(r)}})},s.prototype.val=function(e){return"undefined"==typeof e?this.$hiddenField.val():this.$hiddenField.val(e)},s.prototype.highlightedElm=function(){return this.$searchResults.find(".highlight").first()},s.prototype.queryUrl=function(t,n){var i=this.$element.data("timetracking-autocomplete");i=i.match(/\?/)?i+"&":i+"?";var r={q:t,autocomplete_id:this.$element.attr("id")};return n&&(r.page=n),i+=e.param(r)},s.prototype.highlightNextMenuItem=function(){var e=this.$searchResults.find(".highlight"),t=null;this.showResults(),t=e.length?e.nextAll(".ui-menu-item").first():this.$searchResults.find(".ui-menu-item").first(),t.length&&(this.highlightMenuItem(t),this.scrollTo(t))},s.prototype.highlightPreviousMenuItem=function(){var e,t=this.highlightedElm();this.showResults(),e=t.length?t.prevAll(".ui-menu-item").first():this.$searchResults.find(".ui-menu-item").last(),e.length&&(this.highlightMenuItem(e),this.scrollTo(e))},s.prototype.withResultsLoaded=function(e){var t=this;this.resultsLoaded?e&&e.apply(t):(this.search("",function(){e&&e.apply(t)}),this.resultsLoaded=!0)},s.prototype.positionSearchResults=function(){var e=this.$textField.position(),t=this.$textField.outerHeight();this.$searchResults.css({position:"absolute",top:e.top+t+1+"px",left:e.left+"px"})},s.prototype.resizeResults=function(){var e=this.$textField.outerWidth()-1,t=this.$searchResults.find(".ui-menu.ui-autocomplete ");t.attr("style","width: "+e+"px !important")},s.prototype.scrollTo=function(t){var n=e(t),i=n.position(),r=n.closest(".ui-autocomplete");if(i&&r){var a=n.position().top-r.position().top,o=r.scrollTop()+a-r.height()/2+n.height()/2;r.scrollTop(o)}},s.prototype.menuItemClicked=function(t){if(1==t.which){var n=e(t.target).closest(".ui-menu-item");this.selectMenuItem(n)}},s.prototype.toggleClicked=function(e){e.preventDefault(),e.stopPropagation(),this.disabled||(this.resultsShown&&0==this.$searchResults.find(".result").length?this.search(""):this.resultsShown?this.hideResults():this.withResultsLoaded(function(){this.showResults(),this.$textField.focus()}))},s.prototype.onBlur=function(){return this.required&&!this.val()?this.$element.addClass("error"):this.$element.removeClass("error"),!0},s.prototype.onClickedOutside=function(){return this.resultsShown&&this.hideResults(),!0},s.prototype.onChange=function(){this.highlightedElm().length&&this.highlightedElm().data("value")?this.selectMenuItem(this.highlightedElm()):(this.val(""),this.$element.trigger("autocomplete.change"))},s.prototype.onFocus=function(){this.$textField.select()},s.prototype.onMouseDown=function(){document.activeElement!=this.$textField[0]&&this.$textField.one("mouseup",function(e){e.preventDefault()}).select()},s.prototype.onMenuItemHover=function(e){this.highlightMenuItem(e.currentTarget)},s.prototype.textTyped=function(){var e=this.$textField.val().replace(":","");this.search(e)},s.prototype.keyDownHandler=function(e){var t=e.keyCode==a||e.keyCode==o;e.keyCode==r||e.keyCode==n?this.$searchResults.hide():t&&this.resultsShown?e.preventDefault():e.keyCode==i&&this.returnPressed(e)},s.prototype.keyUpHandler=function(e){e.keyCode==a||e.keyCode==o?this.arrowKeyHandler(e):(e.keyCode==t||e.keyCode>43)&&this.textChangedHandler()},s.prototype.textChangedHandler=function(){var e=this;this.withResultsLoaded(function(){e.showResults(),e.highlightFirstMenuItem(),e.textTyped()})},s.prototype.arrowKeyHandler=function(e){var t=this.resultsLoaded&&!this.resultsShown,n=!this.$textField.val(),i=this.$textField.is("textarea");this.$textField.is("input[type=text]"),i&&!n&&t||(t&&this.showResults(),e.keyCode==a?this.withResultsLoaded(this.highlightPreviousMenuItem):e.keyCode==o&&this.withResultsLoaded(this.highlightNextMenuItem))},s.prototype.returnPressed=function(e){var t="none"!==this.$searchResults.css("display"),n=0===this.$searchResults.find("li[data-value]").length,i=t&&!n;(!this.$textField.is("textarea")||i)&&(e.stopPropagation(),e.preventDefault(),this.hideResults(),this.selectMenuItem(this.highlightedElm()),this.$textField.select())},e.fn.timeTrackingAutocomplete=function(t){return this.each(function(){var n=e(this),i=n.data("fa.timeTrackingAutocomplete"),r=e.extend({},s.DEFAULTS,n.data(),"object"==typeof t&&t);i||(i=new s(this,r),n.data("fa.timeTrackingAutocomplete",i))})},e(function(){e(document).delegate("[data-autocomplete-toggle]","mousedown",function(){e(this).closest("[data-timetracking-autocomplete]").timeTrackingAutocomplete(),e(this).trigger("mousedown")}),e(document).delegate("[data-autocomplete-text-field]","focus",function(){e(this).closest("[data-timetracking-autocomplete]").timeTrackingAutocomplete()}),e(document).delegate("[data-autocomplete-text-field]","mousedown",function(t){var n=e(this).closest("[data-timetracking-autocomplete]");n.timeTrackingAutocomplete(),n.data("fa.timeTrackingAutocomplete").onMouseDown(t)})})}(window.jQuery),function(e){var t=function(e,t){var n=Math.floor(e/3600),i=Math.floor((e-3600*n)/60),r=e-3600*n-60*i;10>i&&(i="0"+i),10>r&&(r="0"+r);var a='<span class="hours">'+n+"</span>"+'<span class="min">:'+i+"</span>";return t&&(a=a+'<span class="seconds">:'+r+"</span>"),a},n=function(n){var i,r=e(n),a=r.data("elapsed-seconds")||0,o=new Date(1e3*r.data("datetime")).getTime();a>0&&(o=new Date(1e3*r.data("datetime")-1e3*a).getTime()),o>(new Date).getTime()&&(o=new Date);var s=function(){var e=new Date,n=Math.floor((e.getTime()-o)/1e3),i=n,a=t(i,!0);r.html(a)};s(),r.hasClass("running")||(r.addClass("running"),i=setInterval(s,1e3))};e(document).on("ajax:beforeSend",'.record_time[data-remote="true"]',function(t,n,i){var r=e(t.target),a=r.closest(".entity_time"),o=a.find('input[name="timeslip[hours]"]');return o.length&&o.val()&&(i.url=i.url+"&"+e.param({hours:o.val()})),!0}),e.fn.timeTrackingTimer=function(){return this.each(function(){var t=e(this),i=t.data("fa.timeTrackingTimer");i||(i=new n(this),t.data("fa.timeTrackingTimer",i))})}}(jQuery),Fa=Fa||{},Fa.timetracking={setupFilterCalendar:function(){$("#date").calendar({date:$("#date").val(),ifFormat:"%Y-%m-%d",showOthers:!0,button:"time_tracking_date",onClose:Fa.timetracking.refreshTimeslips})},setupCalendars:function(){$("input.timeslip_calendar").each(function(){var e=$(this).attr("id"),t=e.replace("_dated_on","_calendar_btn");$("#"+e).calendar({button:t,onUpdate:function(){$("#"+e).trigger("change").select()}})})},linkAutocompleteFields:function(){$(document).delegate(".project_autocomplete[data-timetracking-autocomplete]","autocomplete.change",function(e){var t=$(e.target).closest(".project_autocomplete").data("fa.timeTrackingAutocomplete"),n=t.$element.attr("id"),i=n.replace("project_","task_"),r=$("#"+i).timeTrackingAutocomplete(),a=r.data("fa.timeTrackingAutocomplete"),o=t.val();o?(a.enable(),a.searchUrl("/autocomplete/tasks?project_id="+o),a.search("",function(){a.select(0)})):(a.disable(),a.$textField.val(""),a.val(""))})},formatHours:function(){if($(this).val().match(/^\d+$/)){var e=$(this).val()+":00";$(this).val(e)}},setupNewTimeslipForm:function(){$(document).on("change","#time_tracking_filters input, #time_tracking_filters select",Fa.timetracking.refreshTimeslips),$(document).on("click","#add_timeslip_btn",function(e){var t=$(e.target).closest("form"),n=t.find('textarea[name="timeslip[comment]"]');"Comment (optional)"===n.val()&&n.val("")})},setupComments:function(){$(document).delegate(".cell_comment p a","click",function(e){$(e.target).closest(".cell_comment").children("p").toggle()})},addLiveValidation:function(e,t){$("#time_tracking_redux").delegate(e,"change",function(e){var n=jQuery.grep(t,function(t){var n=$.trim($(e.target).val());return!!n.match(t)});n.length?$(e.target).closest(".validate").removeClass("error"):$(e.target).closest(".validate").addClass("error")})},poll:function(){var e=$("#timeslip_list").attr("data-poll-url"),t=$(".inline_form").length;e&&!t&&$.ajax({method:"get",dataType:"script",url:e,cache:!0,ifModified:!0})},refreshTimeslips:function(){$("#time_tracking_filters").submit()},truncateComments:function(){$(".cell_comment:not(.truncated)").each(function(){var e=$(this).children(".full_text"),t=$(e).children("span").html();$(this).addClass("truncated").children(".short_text").hide(),t&&t.length>75?$(this).children("p").toggle():$(e).children("a").hide()})},setupTimetrackingPage:function(){Fa.timetracking.linkAutocompleteFields(),Fa.timetracking.setupNewTimeslipForm(),Fa.timetracking.setupComments(),Fa.timetracking.setupFilterCalendar(),Fa.timetracking.truncateComments(),Fa.timetracking.setupCalendars();var e=[/^\d+(\.\d+)?$/,/^\d+:\d\d$/,/^\s*$/],t=[/^([-\/\d])+$/,/\d+\s\w+\s\d+/];Fa.timetracking.addLiveValidation('[name="timeslip[hours]"]',e),Fa.timetracking.addLiveValidation('[name="timeslip[dated_on]"]',t),$("#time_tracking_redux").on("change","[name='timeslip[hours]']",Fa.timetracking.formatHours),setInterval(Fa.timetracking.poll,12e4)},setupStandaloneForm:function(){$("#new_timeslip_dated_on").calendar({button:"new_timeslip_calendar_btn"}),Fa.timetracking.linkAutocompleteFields()},trackEventAndSubmitForm:function(e){e.preventDefault();var t=$(this).closest("form"),n=$(e.target);"create_another_button"==n.attr("id")&&$("#another").val("true");try{_gaq.push(e.data)}catch(i){}setTimeout(function(){t.submit()},100)},addOverlay:function(){$("<div></div>").addClass("ui-widget-overlay").appendTo(document.body).css({height:$(document).height(),"z-index":1001})},setupAnalytics:function(){var e=function(e){var t=window._gaq||[];t.push(e)};$("#standalone_timeslip_form").on("click",".timeslips_submit.create_timeslip",["_trackEvent","Time tracking","New timeslip","Desktop"],Fa.timetracking.trackEventAndSubmitForm),$("#standalone_timeslip_form").on("click",".timeslips_submit.start_timer",["_trackEvent","Time tracking","Start timer","Desktop"],Fa.timetracking.trackEventAndSubmitForm),$("#standalone_timeslip_form").on("click","#update_button",["_trackEvent","Time tracking","Update timeslip","Desktop"],Fa.timetracking.trackEventAndSubmitForm),$("#time_tracking_redux").on("click",".create_timeslip",function(){e(["_trackEvent","Time tracking","New timeslip","Desktop"])}),$("#time_tracking_redux").on("click","form.edit_timeslip input[type=submit]",function(){e(["_trackEvent","Time tracking","Update timeslip","Desktop"])}),$(document).on("click","#add_timeslip_btn.start_timer, .record_time",function(){var t=$(this).find("span.pause").length;t?e(["_trackEvent","Time tracking","Stop timer","Desktop"]):e(["_trackEvent","Time tracking","Start timer","Desktop"])})}},function(e){e(function(){e("#timeslip_list").length&&Fa.timetracking.setupTimetrackingPage(),e("#standalone_timeslip_form").length&&Fa.timetracking.setupStandaloneForm(),Fa.timetracking.setupAnalytics(),e("#time_tracking_redux").on("focus","input[type=text]:not([data-autocomplete-text-field]), textarea",function(){var t=e(this);setTimeout(function(){t.select()},50)}),e(".timer:not(.running)").timeTrackingTimer(),e("[data-start-timer-button]").startTimerButton(),e("#time_tracking_redux").on("click",".add_timeslip_inline",function(t){t.stopPropagation(),t.preventDefault(),Fa.timetracking.addOverlay();var n=e(this).data("inline-form"),i=e("#"+n).show();i.find("textarea").elastic()}),e.browser.msie?e("#time_tracking_redux").on("click","a.edit_cancel",function(){return location.reload(),!1}):e("#time_tracking_redux").on("click",".edit_cancel.new_timeslip",function(){return e(this).closest(".inline_form").hide(),e(".ui-widget-overlay").remove(),e(".calendar").remove(),!1}),e("#time_tracking_redux").on("timeslips:updated",function(){e(".timer:not(.running)").timeTrackingTimer(),Fa.timetracking.truncateComments(),Fa.timetracking.setupCalendars(),e("[data-start-timer-button]").startTimerButton()})}),e(document).on("pjax:success",function(){e(".timer:not(.running)").timeTrackingTimer()}),e(document).on("tabsload","section.overview",function(e,t){t.panel.find("#timeslips .timer:not(.running)").timeTrackingTimer()}),e(document).on("powerPager:pageUpdated","section.overview",function(t,n){e(n).find(".timer:not(.running)").timeTrackingTimer()})}(jQuery),function(e){e.fn.startTimerButton=function(){return this.each(function(){var t=e(this);if(!t.data("start-timer-applied")){t.data("start-timer-applied",!0);var n=t.closest("form"),i=n.find('input[name="timeslip[hours]"]'),r=n.find('input[name="timeslip[add_timer]"]'),a=t.hasClass("add_another")?" and Add Another":"",o=function(){return"0:00"===i.val()||!i.val()},s=function(){o()?(t.removeClass("create_timeslip").addClass("start_timer"),t.val("Start Timer"+a),t.data("disable-with","Starting Timer"),r.val("true")):(t.removeClass("start_timer").addClass("create_timeslip"),t.val("Add Timeslip"+a),t.data("disable-with","Adding Timeslip"),r.val(""))};i.on("change keyup",s),s()}})},e(function(){e("[data-start-timer-button]").startTimerButton()})}(jQuery),function(e){"use strict";e(document).ready(function(){!function(){var t=e("#submit_ui input[type=submit]");createAutocomplete({pageSize:20,inputTextBox:e("#bank_service_code"),container:e("#bank_service_search"),searchType:"bank_services",showAll:!1,buildItemCallback:function(t){var n=e("<span />"),i=e('<span id="bank_service_'+t.code+'" />'),r=e('<span class="title" />');return r.text(t.name),i.append(r),n.append(i),n.html()},selectItemCallback:function(e){return t.enable(),e.code},clearItemCallback:function(){t.disable()},httpErrorCallback:function(){e(".backup-ui").show(),e(".primary-ui").hide()},inputAttributes:{size:40,placeholder:"Search by bank name"}})}()})}(jQuery),function(e){var t="";e(document).on("change","#email_template_using_optional_reminder",function(){var n=e("#email_template_optional_reminder_period_in_days").first(),i=e(this);i.prop("checked")?n.val(t):(t=n.val(),n.val(""))})}(jQuery),$(function(){var e=function(){var e=$("#matching-transaction-selection .row_checkbox:checked").length,t=e>0?e.toString()+" ":"";$("#matching-transaction-counter").text(t)};$("#matching-transaction-selection tbody .row_checkbox").on("change",function(){e(),$(this).prop("checked")||$("#matching-transaction-selection .checkbox_select_all").prop("checked",!1)}),$("#matching-transaction-selection .checkbox_select_all").change(function(){var t=$(this),n=$("#matching-transaction-selection .row_checkbox");t.prop("checked")?n.prop("checked",!0):n.prop("checked",!1),e()}),e()}),"undefined"==typeof Fa&&(Fa={}),Fa.nativeFormattedCurrency=function(e){return amount=e.amount,precision=e.precision,currencyUnit=e.currencyUnit||currentCurrencyUnit,decimalSeparator=e.decimalSeparator||currentCurrencySeparator,thousandsDelimiter=e.thousandsDelimiter||currentCurrencyDelimiter,format=e.format||currentCurrencyFormat,formattedCurrency=format.replace("%u",currencyUnit).replace("%n",Highcharts.numberFormat(amount,precision,decimalSeparator,thousandsDelimiter))},function(e){e(function(){"use strict";e("body").delegate("a[rel=delete]","click",function(t){var n=e(this),i=n.data("confirm"),r=n.data("type"),a=n.data("loading"),o=n.attr("title"),s="Are you sure?";if(r&&(s="Are you sure you want to delete this "+r+"?"),o&&(s=o+": Are you sure?"),i===!1||confirm(s)){if(e.isFunction(a))a();else{if(n.hasClass("spinner"))return!1;n.addClass("spinner")}e.ajax({url:n.attr("href"),type:"post",dataType:"script",data:{_method:"delete"}})}return t.preventDefault(),!1})})}(jQuery),function(e){e(function(){function t(){"custom_range"==e("#report_date_selection #switch_ap").val()&&e("#report_custom_timeframe").css("display","inline-block")}e("#date_filter_button").on("click",function(t){t.preventDefault(),e("#report_date_selection").submit()}),e("#report_date_selection").on("change",function(){"custom_range"==e("#report_date_selection #switch_ap").val()?t():(e("#report_custom_timeframe").remove(),e("#report_date_selection").submit())}),t()})}(jQuery),function(e){e.fn.currencyConverter=function(){return this.each(function(){var t=e(this),n=e(t.data("foreign-value-input")),i=n.data("currency"),r=e(t.data("currency-select")),a=e(t.data("date-input")),o=e(t.data("toggle")),s=function(){o.length>0&&o.is(":checked")&&t.val((n.val()*t.data("exchange-rate")).toFixed(2))},l=function(){var n=r.find(":selected").data("currency");e.ajax("/exchange_rate.json",{data:{from_currency:i,date:a.val(),to_currency:n},success:function(e){t.data("exchange-rate",e.rate),s()}})},c=function(){e(this).is(":checked")?(t.attr("disabled",!0),s()):t.attr("disabled",!1)};n.on("change",s),a.on("change",l),r.on("change",l),o.on("change",c)}),this},e(document).ready(function(){e("input.currency_converted").currencyConverter()})}(jQuery),Fa.tableToCSV=function(e,t){t="undefined"!=typeof t?t:[];var n=",",i=function(e){var t=[],n=r(e);return $.each(n,function(e,n){$(n).attr("data-csv-separator")&&t.push([]),t.push(a(n))}),t},r=function(e){var t=e.find("> thead > tr").get(),n=e.find("> tbody > tr, > tr").get(),i=e.find("> tfoot > tr").get(),r=t.concat(n).concat(i);return $.grep(r,function(e){return!$(e).attr("data-csv-hidden")})},a=function(e){var t=[];return $(e).children().each(function(e,n){var i=o($(n));t.push(i);var r=$(n).attr("colspan");if("undefined"!==r)for(var a=parseInt(r,10),s=1;a>s;s++)t.push("")}),t},o=function(e){var t=e.text();if("undefined"==typeof t)return t;var i="td"==e.prop("tagName").toLowerCase()&&e.hasClass("money"),r=$.trim(t);return i&&(r=r.replace(/[^\d\,\.\-]+/g,""),r=r.replace(n,"")),r=s(r)},s=function(e){return e.indexOf(" ")>-1||e.indexOf(",")>-1||e.indexOf('"')>-1||e.indexOf("\n")>-1?(e=e.replace(/"/g,'""'),'"'+e+'"'):e},l=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].join(","));return t.join("\n")},c=function(){if(0===t.length)return"";var e=$.map(t,s).join(",");return e+"\n\n"},u=i(e);return c()+l(u)},function(e){e(function(){var t,n=e("#csv-export-option"),i=e("#csv-content"),r=e("#csv-export"),a=r.data("company-name"),o=e.trim(e("#reporting_dates").text());n.on("click",function(){if("undefined"==typeof t){var n=e("table[data-csv-exportable]");if(n.length>0){var s=[a+" - "+o];t=Fa.tableToCSV(n.first(),s),i.val(t)}}r.submit()})})}(jQuery),function(e){e.fn.journalSetForm=function(){var t=this,n=this.find("#journal-entry-template").html(),i=this.find("table#journal_entries tbody"),r=this.find("table#journal_entries tfoot tr"),a=function(){var t=(new Date).getTime(),r=new RegExp("NEW_RECORD","g");return i.append(e(n.replace(r,t))),i.find("input[role=code_autocomplete]:last").focus(),!1},o=function(){var t=e(this).closest("tr"),n=t.find("input[role=delete]");return n.length>0?(n.val("true"),t.hide()):t.remove(),l(),!1},s=function(){var t=e(this).closest("tr"),n=t.find("input[role=pseudo-value][data-value-type=credit]"),i=t.find("input[role=pseudo-value][data-value-type=debit]"),r=c(i)-c(n);t.find("input[role=value]").val(r),0==r?(i.val(""),n.val(""),t.removeClass("credit debit"),n.attr("placeholder","0.00"),i.attr("placeholder","0.00")):r>0?(i.val(r.toFixed(2)),n.val(""),n.attr("placeholder","")):(i.val(""),i.attr("placeholder",""),n.val((-r).toFixed(2))),l()},l=function(){var e=0,t=0;i.find("tr:visible input[role=pseudo-value][data-value-type=credit]").each(function(){e+=Math.round(100*c(this))}),i.find("tr:visible input[role=pseudo-value][data-value-type=debit]").each(function(){t+=Math.round(100*c(this))}),r.find("td[role=credit]").text((e/100).toFixed(2)),r.find("td[role=debit]").text((t/100).toFixed(2));var n=e-t;r.find("span[role=balance]").text((n/100).toFixed(2)).toggleClass("zero",0==n)},c=function(t){return parseFloat(e(t).val())||0},u=function(){var t=e(this);h(t)},h=function(e){e.autocomplete({delay:0,minLength:0,source:f(e.data("source")),select:m,change:m,focus:function(){return!1},response:d})},d=function(t,n){e(this).data("autocomplete-default",n.content[0])},p=function(){var t=e(this),n=t.prev();void 0==n.attr("autocomplete")&&h(n),n.trigger("focus").autocomplete("search","")},f=function(e){switch(e){case"categories":return categories;case"bankAccounts":return bankAccounts;case"stockItems":return stockItems;case"users":return users}},m=function(t,n){var i=e(this);if(i[0].defaultValue==i.val()&&null==n.item)return!1;var r=i.attr("role"),a=i.closest("tr"),o=a.find("input[role="+r.replace("_autocomplete","")+"]");return i.data("autocomplete-default")&&""!=i.val()&&null==n.item&&(n.item=i.data("autocomplete-default")),v(i,o,n.item),"code_autocomplete"==r&&g(a,n.item),!1},g=function(e,t){e.removeClass("user bank_account stock_item"),null!=t&&e.addClass(t.type)},v=function(e,t,n){null===n||void 0===n?(e.val(""),t.val("")):(e.val(n.label),t.val(n.value))};return t.on("click","a[role=add]",a),t.on("click","a[role=delete]",o),t.on("change","input[role=pseudo-value]",s),t.on("keyup.autocomplete","input.ui-autocomplete-input",u),t.on("click","a.autocomplete_show_all",p),l(),this},e(document).ready(function(){e("form#journal_set").journalSetForm()})}(jQuery),"undefined"==typeof Fa&&(Fa={}),Fa.MultipleProjectsSelector=function(e){var t=[],n=[],i=[],r=$(e).parent().find("span.add_project a");e.value||$("#secondary_projects").html(""),$(e).find("option").each(function(e,n){n.value&&t.push({id:n.value,name:n.text})});var a=function(){n=[],e.value&&n.push(parseInt(e.value)),$.each($('#secondary_projects input[type="checkbox"]'),function(e,t){$(t).is(":checked")&&n.push(parseInt(t.value))}),i=jQuery.grep(t,function(e){var t=jQuery.inArray(parseInt(e.id),n);return 0>t});var a=$('input[type=checkbox][name="invoice[project_ids][]"]:checked');e.value&&0==a.length&&i.length>0?r.show():r.hide()};a();var o=function(){$("#secondary_projects").show(),html='<label class="multiple_choice_label invisible">Additional Projects</label>',html+='<ul class="form_list">',$.each(i,function(e,t){html+="<li>",html+='<input type="checkbox" name="invoice[project_ids][]" value="'+t.id+'" id="invoice_project_'+t.id+'" /> ',html+='<label for="invoice_project_'+t.id+'">'+t.name+"</label>",html+="</li>"}),html+="</ul></div>",$("#secondary_projects").html(html)};r.unbind("click"),r.on("click",function(e){o(),a(),r.hide(),e.preventDefault()}),$(e).on("change",function(){$("#secondary_projects").html(""),$("#secondary_projects").hide()})},function(e){e.fn.multipleProjectsSelector=function(){return this.each(function(){new Fa.MultipleProjectsSelector(this)})},e(function(){e("select#invoice_project_id[data-multi-selector='true']").multipleProjectsSelector()})}(jQuery),function(e){e(function(){"use strict";e(".capital_asset_link").click(function(t){t.preventDefault();var n=e("#"+e(this).closest("tr").attr("id")+"_info"),i=n.is(":visible");e(".capital_asset_info").hide(),i||n.show()})})}(jQuery),$(document).ready(function(){$(document).on("click",".social_buttons .website",function(e){$(".website_share").slideToggle(),e.preventDefault()}),$(document).on("click",".social_buttons .twitter",function(e){Fa.PopupWindow.open({url:$(this).attr("href"),title:"Twitter",width:575,height:300}),e.preventDefault()})});